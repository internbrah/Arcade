(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32263,(e,t,r)=>{"use strict";var n=e.r(3909),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,s=n.useEffect,o=n.useLayoutEffect,c=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var l="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),i=n[0].inst,l=n[1];return o(function(){i.value=r,i.getSnapshot=t,u(i)&&l({inst:i})},[e,r,t]),s(function(){return u(i)&&l({inst:i}),e(function(){u(i)&&l({inst:i})})},[e]),c(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},27006,(e,t,r)=>{"use strict";t.exports=e.r(32263)},64564,(e,t,r)=>{"use strict";var n=e.r(3909),i=e.r(27006),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=i.useSyncExternalStore,o=n.useRef,c=n.useEffect,u=n.useMemo,l=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var f=o(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;var h=s(e,(f=u(function(){function e(e){if(!c){if(c=!0,s=e,e=n(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return o=t}return o=e}if(t=o,a(s,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(s=e,t):(s=e,o=r)}var s,o,c=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,i]))[0],f[1]);return c(function(){d.hasValue=!0,d.value=h},[h]),l(h),h}},45819,(e,t,r)=>{"use strict";t.exports=e.r(64564)},41801,(e,t,r)=>{var n={675:function(e,t){"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,a=c(e),s=a[0],o=a[1],u=new i((s+o)*3/4-o),l=0,f=o>0?s-4:s;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;return 2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[l++]=255&t),1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],s=0,o=n-i;s<o;s+=16383)a.push(function(e,t,n){for(var i,a=[],s=t;s<n;s+=3)i=(e[s]<<16&0xff0000)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}(e,s,s+16383>o?o:s+16383));return 1===i?a.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&a.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")};for(var r=[],n=[],i="u">typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,o=a.length;s<o;++s)r[s]=a[s],n[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},72:function(e,t,r){"use strict";var n=r(675),i=r(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function s(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return l(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);var a=0|h(n,i),c=s(a),u=c.write(n,i);return u!==a&&(c=c.slice(0,u)),c}if(ArrayBuffer.isView(e))return f(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(R(e,SharedArrayBuffer)||e&&R(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var l=e.valueOf&&e.valueOf();if(null!=l&&l!==e)return o.from(l,t,r);var p=function(e){if(o.isBuffer(e)){var t=0|d(e.length),r=s(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?s(0):f(e):"Buffer"===e.type&&Array.isArray(e.data)?f(e.data):void 0}(e);if(p)return p;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return u(e),s(e<0?0:0|d(e))}function f(e){for(var t=e.length<0?0:0|d(e.length),r=s(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(u(e),e<=0)?s(e):void 0!==t?"string"==typeof r?s(e).fill(t,r):s(e).fill(t):s(e)},o.allocUnsafe=function(e){return l(e)},o.allocUnsafeSlow=function(e){return l(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function h(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return A(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return P(e).length;default:if(i)return n?-1:A(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i,a,s,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=N[e[a]];return i}(this,t,r);case"utf8":case"utf-8":return g(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=this,a=t,s=r,0===a&&s===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(a,s));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function y(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){var a;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(a=r*=1)!=a&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return b(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){var a,s=1,o=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,o/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(a=r;a<o;a++)if(u(e,a)===u(t,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===c)return l*s}else -1!==l&&(a-=a-l),l=-1}else for(r+c>o&&(r=o-c),a=r;a>=0;a--){for(var f=!0,d=0;d<c;d++)if(u(e,a+d)!==u(t,d)){f=!1;break}if(f)return a}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(R(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(R(a,Uint8Array)&&(a=o.from(a)),!o.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=h,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)y(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?g(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(o.prototype[a]=o.prototype.inspect),o.prototype.compare=function(e,t,r,n,i){if(R(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,c=Math.min(a,s),u=this.slice(n,i),l=e.slice(t,r),f=0;f<c;++f)if(u[f]!==l[f]){a=u[f],s=l[f];break}return a<s?-1:+(s<a)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)};function g(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,s,o,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=r)switch(f){case 1:u<128&&(l=u);break;case 2:(192&(a=e[i+1]))==128&&(c=(31&u)<<6|63&a)>127&&(l=c);break;case 3:a=e[i+1],s=e[i+2],(192&a)==128&&(192&s)==128&&(c=(15&u)<<12|(63&a)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],(192&a)==128&&(192&s)==128&&(192&o)==128&&(c=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),i+=f}var d=n,h=d.length;if(h<=4096)return String.fromCharCode.apply(String,d);for(var p="",y=0;y<h;)p+=String.fromCharCode.apply(String,d.slice(y,y+=4096));return p}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,i,a){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function x(e,t,r,n,i,a){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function E(e,t,r,n,a){return t*=1,r>>>=0,a||x(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,a){return t*=1,r>>>=0,a||x(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,a,s,o,c,u,l,f,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var h=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;n>a/2&&(n=a/2);for(var s=0;s<n;++s){var o,c=parseInt(t.substr(2*s,2),16);if((o=c)!=o)break;e[r+s]=c}return s}(this,e,t,r);case"utf8":case"utf-8":return i=t,a=r,S(A(e,this.length-i),this,i,a);case"ascii":return s=t,o=r,S(T(e),this,s,o);case"latin1":case"binary":return function(e,t,r,n){return S(T(t),e,r,n)}(this,e,t,r);case"base64":return c=t,u=r,S(P(e),this,c,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,f=r,S(function(e,t){for(var r,n,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i.push(r%256),i.push(n);return i}(e,this.length-l),this,l,f);default:if(h)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,o.prototype),n},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),i.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),i.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;v(this,e,t,r,i,0)}var a=1,s=0;for(this[t]=255&e;++s<r&&(a*=256);)this[t+s]=e/a&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;v(this,e,t,r,i,0)}var a=r-1,s=1;for(this[t+a]=255&e;--a>=0&&(s*=256);)this[t+a]=e/s&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);v(this,e,t,r,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);v(this,e,t,r,i-1,-i)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||v(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return E(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return E(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var a=i-1;a>=0;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var s=o.isBuffer(e)?e:o.from(e,n),c=s.length;if(0===c)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%c]}return this};var I=/[^+/0-9A-Za-z-_]/g;function A(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function T(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function P(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function S(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var N=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,n,i){var a,s,o=8*i-n-1,c=(1<<o)-1,u=c>>1,l=-7,f=r?i-1:0,d=r?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-l)-1,h>>=-l,l+=o;l>0;a=256*a+e[t+f],f+=d,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=d,l-=8);if(0===a)a=1-u;else{if(a===c)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),a-=u}return(h?-1:1)*s*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var s,o,c,u=8*a-i-1,l=(1<<u)-1,f=l>>1,d=5960464477539062e-23*(23===i),h=n?0:a-1,p=n?1:-1,y=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+f>=1?t+=d/c:t+=d*Math.pow(2,1-f),t*c>=2&&(s++,c/=2),s+f>=l?(o=0,s=l):s+f>=1?(o=(t*c-1)*Math.pow(2,i),s+=f):(o=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&o,h+=p,o/=256,i-=8);for(s=s<<i|o,u+=i;u>0;e[r+h]=255&s,h+=p,s/=256,u-=8);e[r+h-p]|=128*y}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},s=!0;try{n[e](r,r.exports,a),s=!1}finally{s&&delete i[e]}return r.exports}a.ab="/ROOT/Vibes/Arcade2/node_modules/next/dist/compiled/buffer/",t.exports=a(72)},60843,e=>{"use strict";let t,r,n;var i,a=e.i(3479),s=e.i(3909),o=e.i(96164);function c(e){let t=e.state.current,r=e.state.connections.get(t),n=r?.accounts,i=n?.[0],a=e.chains.find(e=>e.id===r?.chainId),s=e.state.status;switch(s){case"connected":return{address:i,addresses:n,chain:a,chainId:r?.chainId,connector:r?.connector,isConnected:!0,isConnecting:!1,isDisconnected:!1,isReconnecting:!1,status:s};case"reconnecting":return{address:i,addresses:n,chain:a,chainId:r?.chainId,connector:r?.connector,isConnected:!!i,isConnecting:!1,isDisconnected:!1,isReconnecting:!0,status:s};case"connecting":return{address:i,addresses:n,chain:a,chainId:r?.chainId,connector:r?.connector,isConnected:!1,isConnecting:!0,isDisconnected:!1,isReconnecting:!1,status:s};case"disconnected":return{address:void 0,addresses:void 0,chain:void 0,chainId:void 0,connector:void 0,isConnected:!1,isConnecting:!1,isDisconnected:!0,isReconnecting:!1,status:s}}}function u(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){let r,n;if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)&&Array.isArray(t)){if((r=e.length)!==t.length)return!1;for(n=r;0!=n--;)if(!u(e[n],t[n]))return!1;return!0}if("function"==typeof e.valueOf&&e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if("function"==typeof e.toString&&e.toString!==Object.prototype.toString)return e.toString()===t.toString();let i=Object.keys(e);if((r=i.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!Object.hasOwn(t,i[n]))return!1;for(n=r;0!=n--;){let r=i[n];if(r&&!u(e[r],t[r]))return!1}return!0}return e!=e&&t!=t}var l=e.i(86737),f=e.i(84941);class d extends f.BaseError{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return"wagmi@3.3.4"}}class h extends d{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function p(e={}){let t=e.config??(0,s.useContext)(l.WagmiContext);if(!t)throw new h;return t}var y=e.i(45819);let m=e=>"object"==typeof e&&!Array.isArray(e);function b(e={}){let t=p(e);return function(e,t,r=t,n=u){let i=(0,s.useRef)([]),a=(0,y.useSyncExternalStoreWithSelector)(e,t,r,e=>e,(e,t)=>{if(m(e)&&m(t)&&i.current.length){for(let r of i.current)if(!n(e[r],t[r]))return!1;return!0}return n(e,t)});return(0,s.useMemo)(()=>{if(m(a)){let e={...a},t={};for(let[r,n]of Object.entries(e))t={...t,[r]:{configurable:!1,enumerable:!0,get:()=>(i.current.includes(r)||i.current.push(r),n)}};return Object.defineProperties(e,t),e}return a},[a])}(e=>(function(e,t){let{onChange:r}=t;return e.subscribe(()=>c(e),r,{equalityFn(e,t){let{connector:r,...n}=e,{connector:i,...a}=t;return u(n,a)&&r?.id===i?.id&&r?.uid===i?.uid}})})(t,{onChange:e}),()=>c(t))}var g=e.i(5039);async function w(e,{address:t,blockNumber:r,blockTag:n=e.experimental_blockTag??"latest"}){let i="bigint"==typeof r?(0,g.numberToHex)(r):void 0;return BigInt(await e.request({method:"eth_getBalance",params:[t,i||n]}))}function v(e,t,r){let n=e[t.name];if("function"==typeof n)return n;let i=e[r];return"function"==typeof i?i:r=>t(e,r)}async function x(e,t){let{address:r,blockNumber:n,blockTag:i,chainId:a}=t,s=e.getClient({chainId:a}),o=v(s,w,"getBalance"),c=await o(n?{address:r,blockNumber:n}:{address:r,blockTag:i}),u=e.chains.find(e=>e.id===a)??s.chain;return{decimals:u.nativeCurrency.decimals,symbol:u.nativeCurrency.symbol,value:c}}function E(e){return JSON.stringify(e,(e,t)=>!function(e){if(!B(e))return!1;let t=e.constructor;if(void 0===t)return!0;let r=t.prototype;return!!B(r)&&!!r.hasOwnProperty("isPrototypeOf")}(t)?"bigint"==typeof t?t.toString():t:Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}))}function B(e){return"[object Object]"===Object.prototype.toString.call(e)}function I(e){let{_defaulted:t,behavior:r,gcTime:n,initialData:i,initialDataUpdatedAt:a,maxPages:s,meta:o,networkMode:c,queryFn:u,queryHash:l,queryKey:f,queryKeyHashFn:d,retry:h,retryDelay:p,structuralSharing:y,getPreviousPageParam:m,getNextPageParam:b,initialPageParam:g,_optimisticResults:w,enabled:v,notifyOnChangeProps:x,placeholderData:E,refetchInterval:B,refetchIntervalInBackground:I,refetchOnMount:A,refetchOnReconnect:T,refetchOnWindowFocus:P,retryOnMount:S,select:R,staleTime:N,suspense:C,throwOnError:O,abi:k,config:F,connector:M,query:U,watch:j,...L}=e;return M?{connectorUid:M?.uid,...L}:L}var A=e.i(2891),T=e.i(2412),P=e.i(94041),S=e.i(26671),R=e.i(41807),N=e.i(24529),C=e.i(51767),O=class extends S.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#t=null,this.#r=(0,R.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#n=void 0;#i=void 0;#a=void 0;#s;#o;#r;#t;#c;#u;#l;#f;#d;#h;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#n.addObserver(this),k(this.#n,this.options)?this.#y():this.updateResult(),this.#m())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return F(this.#n,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return F(this.#n,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#g(),this.#n.removeObserver(this)}setOptions(e){let t=this.options,r=this.#n;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,N.resolveEnabled)(this.options.enabled,this.#n))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#n.setOptions(this.options),t._defaulted&&!(0,N.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#n,observer:this});let n=this.hasListeners();n&&M(this.#n,r,this.options,t)&&this.#y(),this.updateResult(),n&&(this.#n!==r||(0,N.resolveEnabled)(this.options.enabled,this.#n)!==(0,N.resolveEnabled)(t.enabled,this.#n)||(0,N.resolveStaleTime)(this.options.staleTime,this.#n)!==(0,N.resolveStaleTime)(t.staleTime,this.#n))&&this.#v();let i=this.#x();n&&(this.#n!==r||(0,N.resolveEnabled)(this.options.enabled,this.#n)!==(0,N.resolveEnabled)(t.enabled,this.#n)||i!==this.#h)&&this.#E(i)}getOptimisticResult(e){var t,r;let n=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(n,e);return t=this,r=i,(0,N.shallowEqualObjects)(t.getCurrentResult(),r)||(this.#a=i,this.#o=this.options,this.#s=this.#n.state),i}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#r.status||this.#r.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#n}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#y({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#y(e){this.#w();let t=this.#n.fetch(this.options,e);return e?.throwOnError||(t=t.catch(N.noop)),t}#v(){this.#b();let e=(0,N.resolveStaleTime)(this.options.staleTime,this.#n);if(N.isServer||this.#a.isStale||!(0,N.isValidTimeout)(e))return;let t=(0,N.timeUntilStale)(this.#a.dataUpdatedAt,e);this.#f=C.timeoutManager.setTimeout(()=>{this.#a.isStale||this.updateResult()},t+1)}#x(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#n):this.options.refetchInterval)??!1}#E(e){this.#g(),this.#h=e,!N.isServer&&!1!==(0,N.resolveEnabled)(this.options.enabled,this.#n)&&(0,N.isValidTimeout)(this.#h)&&0!==this.#h&&(this.#d=C.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||A.focusManager.isFocused())&&this.#y()},this.#h))}#m(){this.#v(),this.#E(this.#x())}#b(){this.#f&&(C.timeoutManager.clearTimeout(this.#f),this.#f=void 0)}#g(){this.#d&&(C.timeoutManager.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){let r,n=this.#n,i=this.options,a=this.#a,s=this.#s,o=this.#o,c=e!==n?e.state:this.#i,{state:u}=e,l={...u},f=!1;if(t._optimisticResults){let r=this.hasListeners(),a=!r&&k(e,t),s=r&&M(e,n,t,i);(a||s)&&(l={...l,...(0,P.fetchState)(u.data,e.options)}),"isRestoring"===t._optimisticResults&&(l.fetchStatus="idle")}let{error:d,errorUpdatedAt:h,status:p}=l;r=l.data;let y=!1;if(void 0!==t.placeholderData&&void 0===r&&"pending"===p){let e;a?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(e=a.data,y=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#l?.state.data,this.#l):t.placeholderData,void 0!==e&&(p="success",r=(0,N.replaceData)(a?.data,e,t),f=!0)}if(t.select&&void 0!==r&&!y)if(a&&r===s?.data&&t.select===this.#c)r=this.#u;else try{this.#c=t.select,r=t.select(r),r=(0,N.replaceData)(a?.data,r,t),this.#u=r,this.#t=null}catch(e){this.#t=e}this.#t&&(d=this.#t,r=this.#u,h=Date.now(),p="error");let m="fetching"===l.fetchStatus,b="pending"===p,g="error"===p,w=b&&m,v=void 0!==r,x={status:p,fetchStatus:l.fetchStatus,isPending:b,isSuccess:"success"===p,isError:g,isInitialLoading:w,isLoading:w,data:r,dataUpdatedAt:l.dataUpdatedAt,error:d,errorUpdatedAt:h,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>c.dataUpdateCount||l.errorUpdateCount>c.errorUpdateCount,isFetching:m,isRefetching:m&&!b,isLoadingError:g&&!v,isPaused:"paused"===l.fetchStatus,isPlaceholderData:f,isRefetchError:g&&v,isStale:U(e,t),refetch:this.refetch,promise:this.#r,isEnabled:!1!==(0,N.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=void 0!==x.data,r="error"===x.status&&!t,i=e=>{r?e.reject(x.error):t&&e.resolve(x.data)},a=()=>{i(this.#r=x.promise=(0,R.pendingThenable)())},s=this.#r;switch(s.status){case"pending":e.queryHash===n.queryHash&&i(s);break;case"fulfilled":(r||x.data!==s.value)&&a();break;case"rejected":r&&x.error===s.reason||a()}}return x}updateResult(){let e=this.#a,t=this.createResult(this.#n,this.options);if(this.#s=this.#n.state,this.#o=this.options,void 0!==this.#s.data&&(this.#l=this.#n),(0,N.shallowEqualObjects)(t,e))return;this.#a=t;let r=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#p.size)return!0;let n=new Set(r??this.#p);return this.options.throwOnError&&n.add("error"),Object.keys(this.#a).some(t=>this.#a[t]!==e[t]&&n.has(t))};this.#B({listeners:r()})}#w(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#n)return;let t=this.#n;this.#n=e,this.#i=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#m()}#B(e){T.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#a)}),this.#e.getQueryCache().notify({query:this.#n,type:"observerResultsUpdated"})})}};function k(e,t){return!1!==(0,N.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&F(e,t,t.refetchOnMount)}function F(e,t,r){if(!1!==(0,N.resolveEnabled)(t.enabled,e)&&"static"!==(0,N.resolveStaleTime)(t.staleTime,e)){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&U(e,t)}return!1}function M(e,t,r,n){return(e!==t||!1===(0,N.resolveEnabled)(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&U(e,r)}function U(e,t){return!1!==(0,N.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,N.resolveStaleTime)(t.staleTime,e))}e.i(71629);var j=e.i(33667),L=s.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),q=s.createContext(!1);q.Provider;var z=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()}),$=e.i(13968),D=S,H=class extends D.Subscribable{#e;#a=void 0;#I;#A;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#T()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,N.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#I,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,N.hashKey)(t.mutationKey)!==(0,N.hashKey)(this.options.mutationKey)?this.reset():this.#I?.state.status==="pending"&&this.#I.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#I?.removeObserver(this)}onMutationUpdate(e){this.#T(),this.#B(e)}getCurrentResult(){return this.#a}reset(){this.#I?.removeObserver(this),this.#I=void 0,this.#T(),this.#B()}mutate(e,t){return this.#A=t,this.#I?.removeObserver(this),this.#I=this.#e.getMutationCache().build(this.#e,this.options),this.#I.addObserver(this),this.#I.execute(e)}#T(){let e=this.#I?.state??(0,$.getDefaultState)();this.#a={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#B(e){T.notifyManager.batch(()=>{if(this.#A&&this.hasListeners()){let t=this.#a.variables,r=this.#a.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#A.onSuccess?.(e.data,t,r,n)}catch(e){Promise.reject(e)}try{this.#A.onSettled?.(e.data,null,t,r,n)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#A.onError?.(e.error,t,r,n)}catch(e){Promise.reject(e)}try{this.#A.onSettled?.(void 0,e.error,t,r,n)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#a)})})}};function _(e,t){let r=(0,j.useQueryClient)(t),[n]=s.useState(()=>new H(r,e));s.useEffect(()=>{n.setOptions(e)},[n,e]);let i=s.useSyncExternalStore(s.useCallback(e=>n.subscribe(T.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),a=s.useCallback((e,t)=>{n.mutate(e,t).catch(N.noop)},[n]);if(i.error&&(0,N.shouldThrowError)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function G(e){let t=function(e,t,r){let n,i=s.useContext(q),a=s.useContext(L),o=(0,j.useQueryClient)(r),c=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(c);let u=o.getQueryCache().get(c.queryHash);if(c._optimisticResults=i?"isRestoring":"optimistic",c.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=c.staleTime;c.staleTime="function"==typeof t?(...r)=>e(t(...r)):e(t),"number"==typeof c.gcTime&&(c.gcTime=Math.max(c.gcTime,1e3))}n=u?.state.error&&"function"==typeof c.throwOnError?(0,N.shouldThrowError)(c.throwOnError,[u.state.error,u]):c.throwOnError,(c.suspense||c.experimental_prefetchInRender||n)&&!a.isReset()&&(c.retryOnMount=!1),s.useEffect(()=>{a.clearReset()},[a]);let l=!o.getQueryCache().get(c.queryHash),[f]=s.useState(()=>new t(o,c)),d=f.getOptimisticResult(c),h=!i&&!1!==e.subscribed;if(s.useSyncExternalStore(s.useCallback(e=>{let t=h?f.subscribe(T.notifyManager.batchCalls(e)):N.noop;return f.updateResult(),t},[f,h]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),s.useEffect(()=>{f.setOptions(c)},[c,f]),c?.suspense&&d.isPending)throw z(c,f,a);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(i&&void 0===e.data||(0,N.shouldThrowError)(r,[e.error,n])))({result:d,errorResetBoundary:a,throwOnError:c.throwOnError,query:u,suspense:c.suspense}))throw d.error;if(o.getDefaultOptions().queries?._experimental_afterQuery?.(c,d),c.experimental_prefetchInRender&&!N.isServer&&d.isLoading&&d.isFetching&&!i){let e=l?z(c,f,a):u?.promise;e?.catch(N.noop).finally(()=>{f.updateResult()})}return c.notifyOnChangeProps?d:f.trackResult(d)}({...e,queryKeyHashFn:E},O,void 0);return t.queryKey=e.queryKey,t}function V(e){return e.state.chainId}function W(e={}){let t=p(e);return(0,s.useSyncExternalStore)(e=>(function(e,t){let{onChange:r}=t;return e.subscribe(e=>e.chainId,r)})(t,{onChange:e}),()=>V(t),()=>V(t))}var Q=e.i(99789);async function K(e,t){let r;if((r="function"==typeof t.connector?e._internal.connectors.setup(t.connector):t.connector).uid===e.state.current)throw new Q.ConnectorAlreadyConnectedError;try{e.setState(e=>({...e,status:"connecting"})),r.emitter.emit("message",{type:"connecting"});let{connector:n,...i}=t,a=await r.connect(i);return r.emitter.off("connect",e._internal.events.connect),r.emitter.on("change",e._internal.events.change),r.emitter.on("disconnect",e._internal.events.disconnect),await e.storage?.setItem("recentConnectorId",r.id),e.setState(e=>({...e,connections:new Map(e.connections).set(r.uid,{accounts:i.withCapabilities?a.accounts.map(e=>"object"==typeof e?e.address:e):a.accounts,chainId:a.chainId,connector:r}),current:r.uid,status:"connected"})),{accounts:i.withCapabilities?a.accounts.map(e=>"object"==typeof e?e:{address:e,capabilities:{}}):a.accounts,chainId:a.chainId}}catch(t){throw e.setState(e=>({...e,status:e.current?"connected":"disconnected"})),t}}let Z=[];function Y(e){let t=e.connectors;return Z.length===t.length&&Z.every((e,r)=>e===t[r])?Z:(Z=t,t)}async function J(e,t={}){let r;if(t.connector)r=t.connector;else{let{connections:t,current:n}=e.state,i=t.get(n);r=i?.connector}let n=e.state.connections;r&&(await r.disconnect(),r.emitter.off("change",e._internal.events.change),r.emitter.off("disconnect",e._internal.events.disconnect),r.emitter.on("connect",e._internal.events.connect),n.delete(r.uid)),e.setState(e=>{if(0===n.size)return{...e,connections:new Map,current:null,status:"disconnected"};let t=n.values().next().value;return{...e,connections:new Map(n),current:t.connector.uid}});{let t=e.state.current;if(!t)return;let r=e.state.connections.get(t)?.connector;if(!r)return;await e.storage?.setItem("recentConnectorId",r.id)}}let X=[];function ee(e){let t=[...e.state.connections.values()];return"reconnecting"===e.state.status||u(X,t)?X:(X=t,t)}var et=e.i(58205),er=e.i(9590),en=e.i(51210),ei=e.i(1118),ea=e.i(1550),es=e.i(66371),eo=e.i(84469);function ec(e){if(!(e instanceof es.BaseError))return!1;let t=e.walk(e=>e instanceof eo.ContractFunctionRevertedError);return t instanceof eo.ContractFunctionRevertedError&&(t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile")}var eu=e.i(7361),el=e.i(49085),ef=e.i(16593),ed=e.i(3960),eh=e.i(33430);function ep(e){if(66!==e.length||0!==e.indexOf("[")||65!==e.indexOf("]"))return null;let t=`0x${e.slice(1,65)}`;return(0,eh.isHex)(t)?t:null}function ey(e){let t=new Uint8Array(32).fill(0);if(!e)return(0,g.bytesToHex)(t);let r=e.split(".");for(let e=r.length-1;e>=0;e-=1){let n=ep(r[e]),i=n?(0,ef.toBytes)(n):(0,ed.keccak256)((0,ef.stringToBytes)(r[e]),"bytes");t=(0,ed.keccak256)((0,el.concat)([t,i]),"bytes")}return(0,g.bytesToHex)(t)}function em(e){let t=e.replace(/^\.|\.$/gm,"");if(0===t.length)return new Uint8Array(1);let r=new Uint8Array((0,ef.stringToBytes)(t).byteLength+2),n=0,i=t.split(".");for(let e=0;e<i.length;e++){var a;let t=(0,ef.stringToBytes)(i[e]);t.byteLength>255&&(t=(0,ef.stringToBytes)((a=function(e){let t=new Uint8Array(32).fill(0);return e?ep(e)||(0,ed.keccak256)((0,ef.stringToBytes)(e)):(0,g.bytesToHex)(t)}(i[e]),`[${a.slice(2)}]`))),r[n]=t.length,r.set(t,n+1),n+=t.length+1}return r.byteLength!==n+1?r.slice(0,n+1):r}function eb(e,t,r){let n=e[t.name];if("function"==typeof n)return n;let i=e[r];return"function"==typeof i?i:r=>t(e,r)}var eg=e.i(64118),ew=e.i(77931),ev=e.i(115);function ex(e,{abi:t,address:r,args:n,docsPath:i,functionName:a,sender:s}){let o=e instanceof eo.RawContractError?e:e instanceof es.BaseError?e.walk(e=>"data"in e)||e.walk():{},{code:c,data:u,details:l,message:f,shortMessage:d}=o,h=e instanceof eg.AbiDecodingZeroDataError?new eo.ContractFunctionZeroDataError({functionName:a}):[3,ev.InternalRpcError.code].includes(c)&&(u||l||f||d)||c===ev.InvalidInputRpcError.code&&"execution reverted"===l&&u?new eo.ContractFunctionRevertedError({abi:t,data:"object"==typeof u?u.data:u,functionName:a,message:o instanceof ew.RpcRequestError?l:d??f}):e;return new eo.ContractFunctionExecutionError(h,{abi:t,args:n,contractAddress:r,docsPath:i,functionName:a,sender:s})}var eE=e.i(65817);async function eB(e,t){let{abi:r,address:n,args:i,functionName:a,...s}=t,o=(0,en.encodeFunctionData)({abi:r,args:i,functionName:a});try{let{data:t}=await eb(e,eE.call,"call")({...s,data:o,to:n});return(0,er.decodeFunctionResult)({abi:r,args:i,functionName:a,data:t||"0x"})}catch(e){throw ex(e,{abi:r,address:n,args:i,docsPath:"/docs/contract/readContract",functionName:a})}}async function eI(e,t){let{blockNumber:r,blockTag:n,coinType:i,name:a,gatewayUrls:s,strict:o}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw Error("client chain not configured. universalResolverAddress is required.");return(0,ei.getChainContractAddress)({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(e=>a.endsWith(e)))return null;let f=null!=i?[ey(a),BigInt(i)]:[ey(a)];try{let t=(0,en.encodeFunctionData)({abi:et.addressResolverAbi,functionName:"addr",args:f}),i={address:u,abi:et.universalResolverResolveAbi,functionName:"resolveWithGateways",args:[(0,g.toHex)(em(a)),t,s??[eu.localBatchGatewayUrl]],blockNumber:r,blockTag:n},o=eb(e,eB,"readContract"),c=await o(i);if("0x"===c[0])return null;let l=(0,er.decodeFunctionResult)({abi:et.addressResolverAbi,args:f,functionName:"addr",data:c[0]});if("0x"===l||"0x00"===(0,ea.trim)(l))return null;return l}catch(e){if(o)throw e;if(ec(e))return null;throw e}}var eA=es;class eT extends eA.BaseError{constructor({data:e}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(e)}`],name:"EnsAvatarInvalidMetadataError"})}}class eP extends eA.BaseError{constructor({reason:e}){super(`ENS NFT avatar URI is invalid. ${e}`,{name:"EnsAvatarInvalidNftUriError"})}}class eS extends eA.BaseError{constructor({uri:e}){super(`Unable to resolve ENS avatar URI "${e}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class eR extends eA.BaseError{constructor({namespace:e}){super(`ENS NFT avatar namespace "${e}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}eA.BaseError;let eN=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,eC=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,eO=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,ek=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function eF(e){try{let t=await fetch(e,{method:"HEAD"});if(200===t.status){let e=t.headers.get("content-type");return e?.startsWith("image/")}return!1}catch(t){if("object"==typeof t&&void 0!==t.response||!Object.hasOwn(globalThis,"Image"))return!1;return new Promise(t=>{let r=new Image;r.onload=()=>{t(!0)},r.onerror=()=>{t(!1)},r.src=e})}}function eM(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function eU({uri:e,gatewayUrls:t}){let r=eO.test(e);if(r)return{uri:e,isOnChain:!0,isEncoded:r};let n=eM(t?.ipfs,"https://ipfs.io"),i=eM(t?.arweave,"https://arweave.net"),a=e.match(eN),{protocol:s,subpath:o,target:c,subtarget:u=""}=a?.groups||{},l="ipns:/"===s||"ipns/"===o,f="ipfs:/"===s||"ipfs/"===o||eC.test(e);if(e.startsWith("http")&&!l&&!f){let r=e;return t?.arweave&&(r=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:r,isOnChain:!1,isEncoded:!1}}if((l||f)&&c)return{uri:`${n}/${l?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if("ar:/"===s&&c)return{uri:`${i}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let d=e.replace(ek,"");if(d.startsWith("<svg")&&(d=`data:image/svg+xml;base64,${btoa(d)}`),d.startsWith("data:")||d.startsWith("{"))return{uri:d,isOnChain:!0,isEncoded:!1};throw new eS({uri:e})}function ej(e){if("object"!=typeof e||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new eT({data:e});return e.image||e.image_url||e.image_data}async function eL({gatewayUrls:e,uri:t}){try{let r=await fetch(t).then(e=>e.json());return await eq({gatewayUrls:e,uri:ej(r)})}catch{throw new eS({uri:t})}}async function eq({gatewayUrls:e,uri:t}){let{uri:r,isOnChain:n}=eU({uri:t,gatewayUrls:e});if(n||await eF(r))return r;throw new eS({uri:t})}async function ez(e,{nft:t}){if("erc721"===t.namespace)return eB(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if("erc1155"===t.namespace)return eB(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new eR({namespace:t.namespace})}async function e$(e,{gatewayUrls:t,record:r}){return/eip155:/i.test(r)?eD(e,{gatewayUrls:t,record:r}):eq({uri:r,gatewayUrls:t})}async function eD(e,{gatewayUrls:t,record:r}){let n=function(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));let[r,n,i]=t.split("/"),[a,s]=r.split(":"),[o,c]=n.split(":");if(!a||"eip155"!==a.toLowerCase())throw new eP({reason:"Only EIP-155 supported"});if(!s)throw new eP({reason:"Chain ID not found"});if(!c)throw new eP({reason:"Contract address not found"});if(!i)throw new eP({reason:"Token ID not found"});if(!o)throw new eP({reason:"ERC namespace not found"});return{chainID:Number.parseInt(s,10),namespace:o.toLowerCase(),contractAddress:c,tokenID:i}}(r),{uri:i,isOnChain:a,isEncoded:s}=eU({uri:await ez(e,{nft:n}),gatewayUrls:t});if(a&&(i.includes("data:application/json;base64,")||i.startsWith("{")))return eq({uri:ej(JSON.parse(s?atob(i.replace("data:application/json;base64,","")):i)),gatewayUrls:t});let o=n.tokenID;return"erc1155"===n.namespace&&(o=o.replace("0x","").padStart(64,"0")),eL({gatewayUrls:t,uri:i.replace(/(?:0x)?{id}/,o)})}async function eH(e,t){let{blockNumber:r,blockTag:n,key:i,name:a,gatewayUrls:s,strict:o}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw Error("client chain not configured. universalResolverAddress is required.");return(0,ei.getChainContractAddress)({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})(),l=c?.ensTlds;if(l&&!l.some(e=>a.endsWith(e)))return null;try{let t={address:u,abi:et.universalResolverResolveAbi,args:[(0,g.toHex)(em(a)),(0,en.encodeFunctionData)({abi:et.textResolverAbi,functionName:"text",args:[ey(a),i]}),s??[eu.localBatchGatewayUrl]],functionName:"resolveWithGateways",blockNumber:r,blockTag:n},o=eb(e,eB,"readContract"),c=await o(t);if("0x"===c[0])return null;let l=(0,er.decodeFunctionResult)({abi:et.textResolverAbi,functionName:"text",data:c[0]});return""===l?null:l}catch(e){if(o)throw e;if(ec(e))return null;throw e}}async function e_(e,{blockNumber:t,blockTag:r,assetGatewayUrls:n,name:i,gatewayUrls:a,strict:s,universalResolverAddress:o}){let c=await eb(e,eH,"getEnsText")({blockNumber:t,blockTag:r,key:"avatar",name:i,universalResolverAddress:o,gatewayUrls:a,strict:s});if(!c)return null;try{return await e$(e,{record:c,gatewayUrls:n})}catch{return null}}async function eG(e,t){let{address:r,blockNumber:n,blockTag:i,coinType:a=60n,gatewayUrls:s,strict:o}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw Error("client chain not configured. universalResolverAddress is required.");return(0,ei.getChainContractAddress)({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})();try{let t={address:u,abi:et.universalResolverReverseAbi,args:[r,a,s??[eu.localBatchGatewayUrl]],functionName:"reverseWithGateways",blockNumber:n,blockTag:i},o=eb(e,eB,"readContract"),[c]=await o(t);return c||null}catch(e){if(o)throw e;if(ec(e))return null;throw e}}async function eV(e,t){let{blockNumber:r,blockTag:n,name:i}=t,{chain:a}=e,s=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!a)throw Error("client chain not configured. universalResolverAddress is required.");return(0,ei.getChainContractAddress)({blockNumber:r,chain:a,contract:"ensUniversalResolver"})})(),o=a?.ensTlds;if(o&&!o.some(e=>i.endsWith(e)))throw Error(`${i} is not a valid ENS TLD (${o?.join(", ")}) for chain "${a.name}" (id: ${a.id}).`);let[c]=await eb(e,eB,"readContract")({address:s,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[(0,g.toHex)(em(i))],blockNumber:r,blockTag:n});return c}var eW=e.i(19729),eQ=e.i(62989),eK=e.i(42010),eZ=e.i(75897),eY=e.i(73711);async function eJ(e,t){let{account:r=e.account,blockNumber:n,blockTag:i="latest",blobs:a,data:s,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:f,to:d,value:h,...p}=t,y=r?(0,eW.parseAccount)(r):void 0;try{(0,eY.assertRequest)(t);let r="bigint"==typeof n?(0,g.numberToHex)(n):void 0,m=e.chain?.formatters?.transactionRequest?.format,b=(m||eZ.formatTransactionRequest)({...(0,eK.extract)(p,{format:m}),account:y,blobs:a,data:s,gas:o,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:l,maxPriorityFeePerGas:f,to:d,value:h},"createAccessList"),w=await e.request({method:"eth_createAccessList",params:[b,r||i]});return{accessList:w.accessList,gasUsed:BigInt(w.gasUsed)}}catch(r){throw(0,eQ.getCallError)(r,{...t,account:y,chain:e.chain})}}function eX(e,{method:t}){let r={};return"fallback"===e.transport.type&&e.transport.onResponse?.(({method:e,response:n,status:i,transport:a})=>{"success"===i&&t===e&&(r[n]=a.request)}),t=>r[t]||e.request}async function e0(e){let t=eX(e,{method:"eth_newBlockFilter"}),r=await e.request({method:"eth_newBlockFilter"});return{id:r,request:t(r),type:"block"}}var e1=es;class e2 extends e1.BaseError{constructor(e){super(`Filter type "${e}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}var e6=e.i(66475),e5=e.i(40819),e8=e.i(77129),e3=e.i(97650);let e4="/docs/contract/encodeEventTopics";function e9(e){let{abi:t,eventName:r,args:n}=e,i=t[0];if(r){let e=(0,e3.getAbiItem)({abi:t,name:r});if(!e)throw new eg.AbiEventNotFoundError(r,{docsPath:e4});i=e}if("event"!==i.type)throw new eg.AbiEventNotFoundError(void 0,{docsPath:e4});let a=(0,e8.formatAbiItem)(i),s=(0,e6.toEventSelector)(a),o=[];if(n&&"inputs"in i){let e=i.inputs?.filter(e=>"indexed"in e&&e.indexed),t=Array.isArray(n)?n:Object.values(n).length>0?e?.map(e=>n[e.name])??[]:[];t.length>0&&(o=e?.map((e,r)=>Array.isArray(t[r])?t[r].map((n,i)=>e7({param:e,value:t[r][i]})):void 0!==t[r]&&null!==t[r]?e7({param:e,value:t[r]}):null)??[])}return[s,...o]}function e7({param:e,value:t}){if("string"===e.type||"bytes"===e.type)return(0,ed.keccak256)((0,ef.toBytes)(t));if("tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/))throw new e2(e.type);return(0,e5.encodeAbiParameters)([e],[t])}async function te(e,t){let{address:r,abi:n,args:i,eventName:a,fromBlock:s,strict:o,toBlock:c}=t,u=eX(e,{method:"eth_newFilter"}),l=a?e9({abi:n,args:i,eventName:a}):void 0,f=await e.request({method:"eth_newFilter",params:[{address:r,fromBlock:"bigint"==typeof s?(0,g.numberToHex)(s):s,toBlock:"bigint"==typeof c?(0,g.numberToHex)(c):c,topics:l}]});return{abi:n,args:i,eventName:a,id:f,request:u(f),strict:!!o,type:"event"}}async function tt(e,{address:t,args:r,event:n,events:i,fromBlock:a,strict:s,toBlock:o}={}){let c=i??(n?[n]:void 0),u=eX(e,{method:"eth_newFilter"}),l=[];c&&(l=[c.flatMap(e=>e9({abi:[e],eventName:e.name,args:r}))],n&&(l=l[0]));let f=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:"bigint"==typeof a?(0,g.numberToHex)(a):a,toBlock:"bigint"==typeof o?(0,g.numberToHex)(o):o,...l.length?{topics:l}:{}}]});return{abi:c,args:r,eventName:n?n.name:void 0,fromBlock:a,id:f,request:u(f),strict:!!s,toBlock:o,type:"event"}}async function tr(e){let t=eX(e,{method:"eth_newPendingTransactionFilter"}),r=await e.request({method:"eth_newPendingTransactionFilter"});return{id:r,request:t(r),type:"transaction"}}var tn=e.i(27909),ti=e.i(76291),ta=e.i(23500);async function ts({hash:t,signature:r}){let n=(0,eh.isHex)(t)?t:(0,g.toHex)(t),{secp256k1:i}=await e.A(30925),a=(()=>{if("object"==typeof r&&"r"in r&&"s"in r){let{r:e,s:t,v:n,yParity:a}=r,s=to(Number(a??n));return new i.Signature((0,ta.hexToBigInt)(e),(0,ta.hexToBigInt)(t)).addRecoveryBit(s)}let e=(0,eh.isHex)(r)?r:(0,g.toHex)(r);if(65!==(0,ti.size)(e))throw Error("invalid signature length");let t=to((0,ta.hexToNumber)(`0x${e.slice(130)}`));return i.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(t)})().recoverPublicKey(n.substring(2)).toHex(!1);return`0x${a}`}function to(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw Error("Invalid yParityOrV value")}async function tc({hash:e,signature:t}){var r;let n;return r=await ts({hash:e,signature:t}),n=(0,ed.keccak256)(`0x${r.substring(4)}`).substring(26),(0,tn.checksumAddress)(`0x${n}`)}var tu=e.i(2633);function tl(e){if(e<256)return 1;if(e<65536)return 2;if(e<0x1000000)return 3;if(e<0x100000000)return 4;throw new es.BaseError("Length is too large.")}async function tf(e){let{authorization:t,signature:r}=e;return tc({hash:function(e){let{chainId:t,nonce:r,to:n}=e,i=e.contractAddress??e.address,a=(0,ed.keccak256)((0,el.concatHex)(["0x05",function(e,t="hex"){let r=function e(t){var r,n;let i,a,s,o;return Array.isArray(t)?(a=tl(i=(r=t.map(t=>e(t))).reduce((e,t)=>e+t.length,0)),{length:i<=55?1+i:1+a+i,encode(e){for(let{encode:t}of(i<=55?e.pushByte(192+i):(e.pushByte(247+a),1===a?e.pushUint8(i):2===a?e.pushUint16(i):3===a?e.pushUint24(i):e.pushUint32(i)),r))t(e)}}):(o=tl((s="string"==typeof(n=t)?(0,ef.hexToBytes)(n):n).length),{length:1===s.length&&s[0]<128?1:s.length<=55?1+s.length:1+o+s.length,encode(e){1===s.length&&s[0]<128||(s.length<=55?e.pushByte(128+s.length):(e.pushByte(183+o),1===o?e.pushUint8(s.length):2===o?e.pushUint16(s.length):3===o?e.pushUint24(s.length):e.pushUint32(s.length))),e.pushBytes(s)}})}(e),n=(0,tu.createCursor)(new Uint8Array(r.length));return(r.encode(n),"hex"===t)?(0,g.bytesToHex)(n.bytes):n.bytes}([t?(0,g.numberToHex)(t):"0x",i,r?(0,g.numberToHex)(r):"0x"])]));return"bytes"===n?(0,ef.hexToBytes)(a):a}(t),signature:r??t})}var td=e.i(88807),th=es,tp=e.i(21983);class ty extends th.BaseError{constructor(e,{account:t,docsPath:r,chain:n,data:i,gas:a,gasPrice:s,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,to:f,value:d}){super(e.shortMessage,{cause:e,docsPath:r,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Estimate Gas Arguments:",(0,tp.prettyPrint)({from:t?.address,to:f,value:void 0!==d&&`${(0,o.formatEther)(d)} ${n?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:a,gasPrice:void 0!==s&&`${(0,td.formatGwei)(s)} gwei`,maxFeePerGas:void 0!==c&&`${(0,td.formatGwei)(c)} gwei`,maxPriorityFeePerGas:void 0!==u&&`${(0,td.formatGwei)(u)} gwei`,nonce:l})].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}var tm=e.i(85715),tb=e.i(66965),tg=e.i(45877),tw=es;class tv extends tw.BaseError{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class tx extends tw.BaseError{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class tE extends tw.BaseError{constructor({maxPriorityFeePerGas:e}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${(0,td.formatGwei)(e)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}var tB=es;class tI extends tB.BaseError{constructor({blockHash:e,blockNumber:t}){let r="Block";e&&(r=`Block at hash "${e}"`),t&&(r=`Block at number "${t}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}e.i(56490);let tA={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function tT(e,t){let r={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?(0,ta.hexToNumber)(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?(0,ta.hexToNumber)(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?tA[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(r.authorizationList=e.authorizationList.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))),r.yParity=(()=>{if(e.yParity)return Number(e.yParity);if("bigint"==typeof r.v){if(0n===r.v||27n===r.v)return 0;if(1n===r.v||28n===r.v)return 1;if(r.v>=35n)return+(r.v%2n===0n)}})(),"legacy"===r.type&&(delete r.accessList,delete r.maxFeePerBlobGas,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas,delete r.yParity),"eip2930"===r.type&&(delete r.maxFeePerBlobGas,delete r.maxFeePerGas,delete r.maxPriorityFeePerGas),"eip1559"===r.type&&delete r.maxFeePerBlobGas,r}function tP(e,t){let r=(e.transactions??[]).map(e=>"string"==typeof e?e:tT(e));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:r,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function tS(e,{blockHash:t,blockNumber:r,blockTag:n=e.experimental_blockTag??"latest",includeTransactions:i}={}){let a=i??!1,s=void 0!==r?(0,g.numberToHex)(r):void 0,o=null;if(!(o=t?await e.request({method:"eth_getBlockByHash",params:[t,a]},{dedupe:!0}):await e.request({method:"eth_getBlockByNumber",params:[s||n,a]},{dedupe:!!s})))throw new tI({blockHash:t,blockNumber:r});return(e.chain?.formatters?.block?.format||tP)(o,"getBlock")}async function tR(e){return BigInt(await e.request({method:"eth_gasPrice"}))}async function tN(e,t){return tC(e,t)}async function tC(e,t){let{block:r,chain:n=e.chain,request:i}=t||{};try{let t=n?.fees?.maxPriorityFeePerGas??n?.fees?.defaultPriorityFee;if("function"==typeof t){let n=r||await eb(e,tS,"getBlock")({}),a=await t({block:n,client:e,request:i});if(null===a)throw Error();return a}if(void 0!==t)return t;let a=await e.request({method:"eth_maxPriorityFeePerGas"});return(0,ta.hexToBigInt)(a)}catch{let[t,n]=await Promise.all([r?Promise.resolve(r):eb(e,tS,"getBlock")({}),eb(e,tR,"getGasPrice")({})]);if("bigint"!=typeof t.baseFeePerGas)throw new tx;let i=n-t.baseFeePerGas;if(i<0n)return 0n;return i}}async function tO(e,t){return tk(e,t)}async function tk(e,t){let{block:r,chain:n=e.chain,request:i,type:a="eip1559"}=t||{},s=await (async()=>"function"==typeof n?.fees?.baseFeeMultiplier?n.fees.baseFeeMultiplier({block:r,client:e,request:i}):n?.fees?.baseFeeMultiplier??1.2)();if(s<1)throw new tv;let o=s.toString().split(".")[1]?.length??0,c=10**o,u=e=>e*BigInt(Math.ceil(s*c))/BigInt(c),l=r||await eb(e,tS,"getBlock")({});if("function"==typeof n?.fees?.estimateFeesPerGas){let t=await n.fees.estimateFeesPerGas({block:r,client:e,multiply:u,request:i,type:a});if(null!==t)return t}if("eip1559"===a){if("bigint"!=typeof l.baseFeePerGas)throw new tx;let t="bigint"==typeof i?.maxPriorityFeePerGas?i.maxPriorityFeePerGas:await tC(e,{block:l,chain:n,request:i}),r=u(l.baseFeePerGas);return{maxFeePerGas:i?.maxFeePerGas??r+t,maxPriorityFeePerGas:t}}return{gasPrice:i?.gasPrice??u(await eb(e,tR,"getGasPrice")({}))}}async function tF(e,{address:t,blockTag:r="latest",blockNumber:n}){let i=await e.request({method:"eth_getTransactionCount",params:[t,"bigint"==typeof n?(0,g.numberToHex)(n):r]},{dedupe:!!n});return(0,ta.hexToNumber)(i)}function tM(e){let{kzg:t}=e,r=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map(e=>(0,ef.hexToBytes)(e)):e.blobs,i=[];for(let e of n)i.push(Uint8Array.from(t.blobToKzgCommitment(e)));return"bytes"===r?i:i.map(e=>(0,g.bytesToHex)(e))}function tU(e){let{kzg:t}=e,r=e.to??("string"==typeof e.blobs[0]?"hex":"bytes"),n="string"==typeof e.blobs[0]?e.blobs.map(e=>(0,ef.hexToBytes)(e)):e.blobs,i="string"==typeof e.commitments[0]?e.commitments.map(e=>(0,ef.hexToBytes)(e)):e.commitments,a=[];for(let e=0;e<n.length;e++){let r=n[e],s=i[e];a.push(Uint8Array.from(t.computeBlobKzgProof(r,s)))}return"bytes"===r?a:a.map(e=>(0,g.bytesToHex)(e))}var tj=e.i(58545);tj.SHA256;let tL=tj.sha256;tj.SHA224,tj.sha224;var tq=es;class tz extends tq.BaseError{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class t$ extends tq.BaseError{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}tq.BaseError,tq.BaseError;var tD=e.i(45209);function tH(e,{docsPath:t,...r}){let n,i=(n=(0,tb.getNodeError)(e,r))instanceof tm.UnknownNodeError?e:n;return new tp.TransactionExecutionError(i,{docsPath:t,...r})}async function t_(e){let t=await e.request({method:"eth_chainId"},{dedupe:!0});return(0,ta.hexToNumber)(t)}async function tG(e,t){let{account:r=e.account,accessList:n,authorizationList:i,chain:a=e.chain,blobVersionedHashes:s,blobs:o,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,nonceManager:y,to:m,type:b,value:g,...w}=t,v=await (async()=>{if(!r||!y||void 0!==p)return p;let t=(0,eW.parseAccount)(r),n=a?a.id:await eb(e,t_,"getChainId")({});return await y.consume({address:t.address,chainId:n,client:e})})();(0,eY.assertRequest)(t);let x=a?.formatters?.transactionRequest?.format,E=(x||eZ.formatTransactionRequest)({...(0,eK.extract)(w,{format:x}),account:r?(0,eW.parseAccount)(r):void 0,accessList:n,authorizationList:i,blobs:o,blobVersionedHashes:s,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:v,to:m,type:b,value:g},"fillTransaction");try{let r=await e.request({method:"eth_fillTransaction",params:[E]}),n=(a?.formatters?.transaction?.format||tT)(r.tx);delete n.blockHash,delete n.blockNumber,delete n.r,delete n.s,delete n.transactionIndex,delete n.v,delete n.yParity,n.data=n.input,n.gas&&(n.gas=t.gas??n.gas),n.gasPrice&&(n.gasPrice=t.gasPrice??n.gasPrice),n.maxFeePerBlobGas&&(n.maxFeePerBlobGas=t.maxFeePerBlobGas??n.maxFeePerBlobGas),n.maxFeePerGas&&(n.maxFeePerGas=t.maxFeePerGas??n.maxFeePerGas),n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=t.maxPriorityFeePerGas??n.maxPriorityFeePerGas),n.nonce&&(n.nonce=t.nonce??n.nonce);let i=await (async()=>{if("function"==typeof a?.fees?.baseFeeMultiplier){let r=await eb(e,tS,"getBlock")({});return a.fees.baseFeeMultiplier({block:r,client:e,request:t})}return a?.fees?.baseFeeMultiplier??1.2})();if(i<1)throw new tv;let s=i.toString().split(".")[1]?.length??0,o=10**s,c=e=>e*BigInt(Math.ceil(i*o))/BigInt(o);return n.maxFeePerGas&&!t.maxFeePerGas&&(n.maxFeePerGas=c(n.maxFeePerGas)),n.gasPrice&&!t.gasPrice&&(n.gasPrice=c(n.gasPrice)),{raw:r.raw,transaction:{from:E.from,...n}}}catch(r){throw tH(r,{...t,chain:e.chain})}}let tV=["blobVersionedHashes","chainId","fees","gas","nonce","type"],tW=new Map,tQ=new tD.LruMap(128);async function tK(e,t){let r,n,i=t;i.account??=e.account,i.parameters??=tV;let{account:a,chain:s=e.chain,nonceManager:o,parameters:c}=i,u="function"==typeof s?.prepareTransactionRequest?{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]}:Array.isArray(s?.prepareTransactionRequest)?{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}:void 0;async function l(){return r?r:void 0!==i.chainId?i.chainId:s?s.id:r=await eb(e,t_,"getChainId")({})}let f=a?(0,eW.parseAccount)(a):a,d=i.nonce;if(c.includes("nonce")&&void 0===d&&f&&o){let t=await l();d=await o.consume({address:f.address,chainId:t,client:e})}u?.fn&&u.runAt?.includes("beforeFillTransaction")&&(i=await u.fn({...i,chain:s},{phase:"beforeFillTransaction"}),d??=i.nonce);let h=(!(c.includes("blobVersionedHashes")||c.includes("sidecars"))||!i.kzg||!i.blobs)&&!1!==tQ.get(e.uid)&&["fees","gas"].some(e=>c.includes(e))&&(c.includes("chainId")&&"number"!=typeof i.chainId||c.includes("nonce")&&"number"!=typeof d||c.includes("fees")&&"bigint"!=typeof i.gasPrice&&("bigint"!=typeof i.maxFeePerGas||"bigint"!=typeof i.maxPriorityFeePerGas)||c.includes("gas")&&"bigint"!=typeof i.gas)?await eb(e,tG,"fillTransaction")({...i,nonce:d}).then(t=>{let{chainId:r,from:n,gas:a,gasPrice:s,nonce:o,maxFeePerBlobGas:c,maxFeePerGas:u,maxPriorityFeePerGas:l,type:f,...d}=t.transaction;return tQ.set(e.uid,!0),{...i,...n?{from:n}:{},...f?{type:f}:{},...void 0!==r?{chainId:r}:{},...void 0!==a?{gas:a}:{},...void 0!==s?{gasPrice:s}:{},...void 0!==o?{nonce:o}:{},...void 0!==c?{maxFeePerBlobGas:c}:{},...void 0!==u?{maxFeePerGas:u}:{},...void 0!==l?{maxPriorityFeePerGas:l}:{},..."nonceKey"in d&&void 0!==d.nonceKey?{nonceKey:d.nonceKey}:{}}}).catch(t=>("TransactionExecutionError"!==t.name||t.walk?.(e=>"MethodNotFoundRpcError"===e.name||"MethodNotSupportedRpcError"===e.name)&&tQ.set(e.uid,!1),i)):i;d??=h.nonce;let{blobs:p,gas:y,kzg:m,type:b}=i={...h,...f?{from:f?.address}:{},...d?{nonce:d}:{}};async function w(){return n||(n=await eb(e,tS,"getBlock")({blockTag:"latest"}))}if(u?.fn&&u.runAt?.includes("beforeFillParameters")&&(i=await u.fn({...i,chain:s},{phase:"beforeFillParameters"})),c.includes("nonce")&&void 0===d&&f&&!o&&(i.nonce=await eb(e,tF,"getTransactionCount")({address:f.address,blockTag:"pending"})),(c.includes("blobVersionedHashes")||c.includes("sidecars"))&&p&&m){let e=tM({blobs:p,kzg:m});if(c.includes("blobVersionedHashes")){let t=function(e){let{commitments:t,version:r}=e,n=e.to??("string"==typeof t[0]?"hex":"bytes"),i=[];for(let e of t)i.push(function(e){let{commitment:t,version:r=1}=e,n=e.to??("string"==typeof t?"hex":"bytes"),i=tL((0,eh.isHex)(t,{strict:!1})?(0,ef.toBytes)(t):t);return i.set([r],0),"bytes"===n?i:(0,g.bytesToHex)(i)}({commitment:e,to:n,version:r}));return i}({commitments:e,to:"hex"});i.blobVersionedHashes=t}if(c.includes("sidecars")){let t=tU({blobs:p,commitments:e,kzg:m}),r=function(e){let{data:t,kzg:r,to:n}=e,i=e.blobs??function(e){let t=e.to??("string"==typeof e.data?"hex":"bytes"),r="string"==typeof e.data?(0,ef.hexToBytes)(e.data):e.data,n=(0,ti.size)(r);if(!n)throw new t$;if(n>761855)throw new tz({maxSize:761855,size:n});let i=[],a=!0,s=0;for(;a;){let e=(0,tu.createCursor)(new Uint8Array(131072)),t=0;for(;t<4096;){let n=r.slice(s,s+31);if(e.pushByte(0),e.pushBytes(n),n.length<31){e.pushByte(128),a=!1;break}t++,s+=31}i.push(e)}return"bytes"===t?i.map(e=>e.bytes):i.map(e=>(0,g.bytesToHex)(e.bytes))}({data:t,to:n}),a=e.commitments??tM({blobs:i,kzg:r,to:n}),s=e.proofs??tU({blobs:i,commitments:a,kzg:r,to:n}),o=[];for(let e=0;e<i.length;e++)o.push({blob:i[e],commitment:a[e],proof:s[e]});return o}({blobs:p,commitments:e,proofs:t,to:"hex"});i.sidecars=r}}if(c.includes("chainId")&&(i.chainId=await l()),(c.includes("fees")||c.includes("type"))&&void 0===b)try{i.type=function(e){if(e.type)return e.type;if(void 0!==e.authorizationList)return"eip7702";if(void 0!==e.blobs||void 0!==e.blobVersionedHashes||void 0!==e.maxFeePerBlobGas||void 0!==e.sidecars)return"eip4844";if(void 0!==e.maxFeePerGas||void 0!==e.maxPriorityFeePerGas)return"eip1559";if(void 0!==e.gasPrice)return void 0!==e.accessList?"eip2930":"legacy";throw new tp.InvalidSerializableTransactionError({transaction:e})}(i)}catch{let t=tW.get(e.uid);if(void 0===t){let r=await w();t="bigint"==typeof r?.baseFeePerGas,tW.set(e.uid,t)}i.type=t?"eip1559":"legacy"}if(c.includes("fees"))if("legacy"!==i.type&&"eip2930"!==i.type){if(void 0===i.maxFeePerGas||void 0===i.maxPriorityFeePerGas){let t=await w(),{maxFeePerGas:r,maxPriorityFeePerGas:n}=await tk(e,{block:t,chain:s,request:i});if(void 0===i.maxPriorityFeePerGas&&i.maxFeePerGas&&i.maxFeePerGas<n)throw new tE({maxPriorityFeePerGas:n});i.maxPriorityFeePerGas=n,i.maxFeePerGas=r}}else{if(void 0!==i.maxFeePerGas||void 0!==i.maxPriorityFeePerGas)throw new tx;if(void 0===i.gasPrice){let t=await w(),{gasPrice:r}=await tk(e,{block:t,chain:s,request:i,type:"legacy"});i.gasPrice=r}}return c.includes("gas")&&void 0===y&&(i.gas=await eb(e,tZ,"estimateGas")({...i,account:f,prepare:f?.type==="local"?[]:["blobVersionedHashes"]})),u?.fn&&u.runAt?.includes("afterFillParameters")&&(i=await u.fn({...i,chain:s},{phase:"afterFillParameters"})),(0,eY.assertRequest)(i),delete i.parameters,i}async function tZ(e,t){let{account:r=e.account,prepare:n=!0}=t,i=r?(0,eW.parseAccount)(r):void 0,a=Array.isArray(n)?n:i?.type!=="local"?["blobVersionedHashes"]:void 0;try{let r=await (async()=>t.to?t.to:t.authorizationList&&t.authorizationList.length>0?await tf({authorization:t.authorizationList[0]}).catch(()=>{throw new es.BaseError("`to` is required. Could not infer from `authorizationList`")}):void 0)(),{accessList:s,authorizationList:o,blobs:c,blobVersionedHashes:u,blockNumber:l,blockTag:f,data:d,gas:h,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:w,value:v,stateOverride:x,...E}=n?await tK(e,{...t,parameters:a,to:r}):t;if(h&&t.gas!==h)return h;let B=("bigint"==typeof l?(0,g.numberToHex)(l):void 0)||f,I=(0,tg.serializeStateOverride)(x);(0,eY.assertRequest)(t);let A=e.chain?.formatters?.transactionRequest?.format,T=(A||eZ.formatTransactionRequest)({...(0,eK.extract)(E,{format:A}),account:i,accessList:s,authorizationList:o,blobs:c,blobVersionedHashes:u,data:d,gasPrice:p,maxFeePerBlobGas:y,maxFeePerGas:m,maxPriorityFeePerGas:b,nonce:w,to:r,value:v},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:I?[T,B??e.experimental_blockTag??"latest",I]:B?[T,B]:[T]}))}catch(r){throw function(e,{docsPath:t,...r}){let n;return new ty((n=(0,tb.getNodeError)(e,r))instanceof tm.UnknownNodeError?e:n,{docsPath:t,...r})}(r,{...t,account:i,chain:e.chain})}}async function tY(e,t){let{abi:r,address:n,args:i,functionName:a,dataSuffix:s,...o}=t,c=(0,en.encodeFunctionData)({abi:r,args:i,functionName:a});try{return await eb(e,tZ,"estimateGas")({data:`${c}${s?s.replace("0x",""):""}`,to:n,...o})}catch(t){let e=o.account?(0,eW.parseAccount)(o.account):void 0;throw ex(t,{abi:r,address:n,args:i,docsPath:"/docs/contract/estimateContractGas",functionName:a,sender:e?.address})}}async function tJ(e){return BigInt(await e.request({method:"eth_blobBaseFee"}))}let tX=new Map,t0=new Map;async function t1(e,{cacheKey:t,cacheTime:r=1/0}){let n,i,a,s=(i=(n=(e,t)=>({clear:()=>t.delete(e),get:()=>t.get(e),set:r=>t.set(e,r)}))(t,tX),{clear:()=>{i.clear(),a.clear()},promise:i,response:a=n(t,t0)}),o=s.response.get();if(o&&r>0&&Date.now()-o.created.getTime()<r)return o.data;let c=s.promise.get();c||(c=e(),s.promise.set(c));try{let e=await c;return s.response.set({created:new Date,data:e}),e}finally{s.promise.clear()}}async function t2(e,{cacheTime:t=e.cacheTime}={}){let r;return BigInt(await t1(()=>e.request({method:"eth_blockNumber"}),{cacheKey:(r=e.uid,`blockNumber.${r}`),cacheTime:t}))}async function t6(e,{blockHash:t,blockNumber:r,blockTag:n="latest"}={}){let i,a=void 0!==r?(0,g.numberToHex)(r):void 0;return i=t?await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):await e.request({method:"eth_getBlockTransactionCountByNumber",params:[a||n]},{dedupe:!!a}),(0,ta.hexToNumber)(i)}async function t5(e,{address:t,blockNumber:r,blockTag:n="latest"}){let i=void 0!==r?(0,g.numberToHex)(r):void 0,a=await e.request({method:"eth_getCode",params:[t,i||n]},{dedupe:!!i});if("0x"!==a)return a}var t8=e.i(31362),t3=e.i(52829),t4=e.i(16059);let t9="/docs/contract/decodeEventLog";function t7(e){let{abi:t,data:r,strict:n,topics:i}=e,a=n??!0,[s,...o]=i;if(!s)throw new eg.AbiEventSignatureEmptyTopicsError({docsPath:t9});let c=t.find(e=>"event"===e.type&&s===(0,e6.toEventSelector)((0,e8.formatAbiItem)(e)));if(!(c&&"name"in c)||"event"!==c.type)throw new eg.AbiEventSignatureNotFoundError(s,{docsPath:t9});let{name:u,inputs:l}=c,f=l?.some(e=>!("name"in e&&e.name)),d=f?[]:{},h=l.map((e,t)=>[e,t]).filter(([e])=>"indexed"in e&&e.indexed),p=[];for(let e=0;e<h.length;e++){let[t,r]=h[e],n=o[e];if(!n){if(a)throw new eg.DecodeLogTopicsMismatch({abiItem:c,param:t});p.push([t,r]);continue}d[f?r:t.name||r]=function({param:e,value:t}){return"string"===e.type||"bytes"===e.type||"tuple"===e.type||e.type.match(/^(.*)\[(\d+)?\]$/)?t:((0,t4.decodeAbiParameters)([e],t)||[])[0]}({param:t,value:n})}let y=l.filter(e=>!("indexed"in e&&e.indexed)),m=a?y:[...p.map(([e])=>e),...y];if(m.length>0){if(r&&"0x"!==r)try{let e=(0,t4.decodeAbiParameters)(m,r);if(e){let t=0;if(!a)for(let[r,n]of p)d[f?n:r.name||n]=e[t++];if(f)for(let r=0;r<l.length;r++)void 0===d[r]&&t<e.length&&(d[r]=e[t++]);else for(let r=0;r<y.length;r++)d[y[r].name]=e[t++]}}catch(e){if(a){if(e instanceof eg.AbiDecodingDataSizeTooSmallError||e instanceof t3.PositionOutOfBoundsError)throw new eg.DecodeLogDataMismatch({abiItem:c,data:r,params:m,size:(0,ti.size)(r)});throw e}}else if(a)throw new eg.DecodeLogDataMismatch({abiItem:c,data:"0x",params:m,size:0})}return{eventName:u,args:Object.values(d).length>0?d:void 0}}function re(e){let{abi:t,args:r,logs:n,strict:i=!0}=e,a=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return n.map(e=>{let n,s,o=t.filter(t=>"event"===t.type&&e.topics[0]===(0,e6.toEventSelector)(t));if(0===o.length)return null;for(let t of o)try{n=t7({...e,abi:[t],strict:!0}),s=t;break}catch{}if(!n&&!i){s=o[0];try{n=t7({...e,abi:[s],strict:!1})}catch{let t=s.inputs?.some(e=>!("name"in e&&e.name));return{...e,args:t?[]:{},eventName:s.name}}}return n&&s&&(!a||a.includes(n.eventName))&&function(e){let{args:t,inputs:r,matchArgs:n}=e;if(!n)return!0;if(!t)return!1;function i(e,t,r){try{if("address"===e.type)return(0,t8.isAddressEqual)(t,r);if("string"===e.type||"bytes"===e.type)return(0,ed.keccak256)((0,ef.toBytes)(t))===r;return t===r}catch{return!1}}return Array.isArray(t)&&Array.isArray(n)?n.every((e,n)=>{if(null==e)return!0;let a=r[n];return!!a&&(Array.isArray(e)?e:[e]).some(e=>i(a,e,t[n]))}):!("object"!=typeof t||Array.isArray(t)||"object"!=typeof n||Array.isArray(n))&&Object.entries(n).every(([e,n])=>{if(null==n)return!0;let a=r.find(t=>t.name===e);return!!a&&(Array.isArray(n)?n:[n]).some(r=>i(a,r,t[e]))})}({args:n.args,inputs:s.inputs,matchArgs:r})?{...n,...e}:null}).filter(Boolean)}function rt(e,{args:t,eventName:r}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,blockTimestamp:e.blockTimestamp?BigInt(e.blockTimestamp):null===e.blockTimestamp?null:void 0,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...r?{args:t,eventName:r}:{}}}async function rr(e,{address:t,blockHash:r,fromBlock:n,toBlock:i,event:a,events:s,args:o,strict:c}={}){let u=s??(a?[a]:void 0),l=[];u&&(l=[u.flatMap(e=>e9({abi:[e],eventName:e.name,args:s?void 0:o}))],a&&(l=l[0]));let f=(r?await e.request({method:"eth_getLogs",params:[{address:t,topics:l,blockHash:r}]}):await e.request({method:"eth_getLogs",params:[{address:t,topics:l,fromBlock:"bigint"==typeof n?(0,g.numberToHex)(n):n,toBlock:"bigint"==typeof i?(0,g.numberToHex)(i):i}]})).map(e=>rt(e));return u?re({abi:u,args:o,logs:f,strict:c??!1}):f}async function rn(e,t){let{abi:r,address:n,args:i,blockHash:a,eventName:s,fromBlock:o,toBlock:c,strict:u}=t,l=s?(0,e3.getAbiItem)({abi:r,name:s}):void 0,f=l?void 0:r.filter(e=>"event"===e.type);return eb(e,rr,"getLogs")({address:n,args:i,blockHash:a,event:l,events:f,fromBlock:o,toBlock:c,strict:u})}var ri=es;class ra extends ri.BaseError{constructor({address:e}){super(`No EIP-712 domain found on contract "${e}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${e}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function rs(e,t){let{address:r,factory:n,factoryData:i}=t;try{let[t,a,s,o,c,u,l]=await eb(e,eB,"readContract")({abi:ro,address:r,functionName:"eip712Domain",factory:n,factoryData:i});return{domain:{name:a,version:s,chainId:Number(o),verifyingContract:c,salt:u},extensions:l,fields:t}}catch(e){if("ContractFunctionExecutionError"===e.name&&"ContractFunctionZeroDataError"===e.cause.name)throw new ra({address:r});throw e}}let ro=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];async function rc(e,{blockCount:t,blockNumber:r,blockTag:n="latest",rewardPercentiles:i}){var a;let s="bigint"==typeof r?(0,g.numberToHex)(r):void 0;return{baseFeePerGas:(a=await e.request({method:"eth_feeHistory",params:[(0,g.numberToHex)(t),s||n,i]},{dedupe:!!s})).baseFeePerGas.map(e=>BigInt(e)),gasUsedRatio:a.gasUsedRatio,oldestBlock:BigInt(a.oldestBlock),reward:a.reward?.map(e=>e.map(e=>BigInt(e)))}}async function ru(e,{filter:t}){let r="strict"in t&&t.strict,n=await t.request({method:"eth_getFilterChanges",params:[t.id]});if("string"==typeof n[0])return n;let i=n.map(e=>rt(e));return"abi"in t&&t.abi?re({abi:t.abi,logs:i,strict:r}):i}async function rl(e,{filter:t}){let r=t.strict??!1,n=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(e=>rt(e));return t.abi?re({abi:t.abi,logs:n,strict:r}):n}async function rf(e,{address:t,blockNumber:r,blockTag:n,storageKeys:i}){let a=void 0!==r?(0,g.numberToHex)(r):void 0;var s=await e.request({method:"eth_getProof",params:[t,i,a||(n??"latest")]});return{...s,balance:s.balance?BigInt(s.balance):void 0,nonce:s.nonce?(0,ta.hexToNumber)(s.nonce):void 0,storageProof:s.storageProof?s.storageProof.map(e=>({...e,value:BigInt(e.value)})):void 0}}async function rd(e,{address:t,blockNumber:r,blockTag:n="latest",slot:i}){let a=void 0!==r?(0,g.numberToHex)(r):void 0;return await e.request({method:"eth_getStorageAt",params:[t,i,a||n]})}async function rh(e,{blockHash:t,blockNumber:r,blockTag:n,hash:i,index:a,sender:s,nonce:o}){let c=n||"latest",u=void 0!==r?(0,g.numberToHex)(r):void 0,l=null;if(i?l=await e.request({method:"eth_getTransactionByHash",params:[i]},{dedupe:!0}):t?l=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,(0,g.numberToHex)(a)]},{dedupe:!0}):(u||c)&&"number"==typeof a?l=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||c,(0,g.numberToHex)(a)]},{dedupe:!!u}):s&&"number"==typeof o&&(l=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[s,(0,g.numberToHex)(o)]},{dedupe:!0})),!l)throw new tp.TransactionNotFoundError({blockHash:t,blockNumber:r,blockTag:c,hash:i,index:a});return(e.chain?.formatters?.transaction?.format||tT)(l,"getTransaction")}async function rp(e,{hash:t,transactionReceipt:r}){let[n,i]=await Promise.all([eb(e,t2,"getBlockNumber")({}),t?eb(e,rh,"getTransaction")({hash:t}):void 0]),a=r?.blockNumber||i?.blockNumber;return a?n-a+1n:0n}let ry={"0x0":"reverted","0x1":"success"};function rm(e,t){let r={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(e=>rt(e)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?(0,ta.hexToNumber)(e.transactionIndex):null,status:e.status?ry[e.status]:null,type:e.type?tA[e.type]||e.type:null};return e.blobGasPrice&&(r.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(r.blobGasUsed=BigInt(e.blobGasUsed)),r}async function rb(e,{hash:t}){let r=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!r)throw new tp.TransactionReceiptNotFoundError({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||rm)(r,"getTransactionReceipt")}var rg=e.i(65515);async function rw(e,t){let{account:r,authorizationList:n,allowFailure:i=!0,blockNumber:a,blockOverrides:s,blockTag:o,stateOverride:c}=t,u=t.contracts,{batchSize:l=t.batchSize??1024,deployless:f=t.deployless??!1}="object"==typeof e.batch?.multicall?e.batch.multicall:{},d=(()=>{if(t.multicallAddress)return t.multicallAddress;if(f)return null;if(e.chain)return(0,ei.getChainContractAddress)({blockNumber:a,chain:e.chain,contract:"multicall3"});throw Error("client chain not configured. multicallAddress is required.")})(),h=[[]],p=0,y=0;for(let e=0;e<u.length;e++){let{abi:t,address:n,args:a,functionName:s}=u[e];try{let e=(0,en.encodeFunctionData)({abi:t,args:a,functionName:s});y+=(e.length-2)/2,l>0&&y>l&&h[p].length>0&&(p++,y=(e.length-2)/2,h[p]=[]),h[p]=[...h[p],{allowFailure:!0,callData:e,target:n}]}catch(o){let e=ex(o,{abi:t,address:n,args:a,docsPath:"/docs/contract/multicall",functionName:s,sender:r});if(!i)throw e;h[p]=[...h[p],{allowFailure:!0,callData:"0x",target:n}]}}let m=await Promise.allSettled(h.map(t=>eb(e,eB,"readContract")({...null===d?{code:rg.multicall3Bytecode}:{address:d},abi:et.multicall3Abi,account:r,args:[t],authorizationList:n,blockNumber:a,blockOverrides:s,blockTag:o,functionName:"aggregate3",stateOverride:c}))),b=[];for(let e=0;e<m.length;e++){let t=m[e];if("rejected"===t.status){if(!i)throw t.reason;for(let r=0;r<h[e].length;r++)b.push({status:"failure",error:t.reason,result:void 0});continue}let r=t.value;for(let t=0;t<r.length;t++){let{returnData:n,success:a}=r[t],{callData:s}=h[e][t],{abi:o,address:c,functionName:l,args:f}=u[b.length];try{if("0x"===s)throw new eg.AbiDecodingZeroDataError;if(!a)throw new eo.RawContractError({data:n});let e=(0,er.decodeFunctionResult)({abi:o,args:f,data:n,functionName:l});b.push(i?{result:e,status:"success"}:e)}catch(t){let e=ex(t,{abi:o,address:c,args:f,docsPath:"/docs/contract/multicall",functionName:l});if(!i)throw e;b.push({error:e,result:void 0,status:"failure"})}}}if(b.length!==u.length)throw new es.BaseError("multicall results mismatch");return b}var rv=e.i(39235);async function rx(e,t){let{blockNumber:r,blockTag:n=e.experimental_blockTag??"latest",blocks:i,returnFullTransactions:a,traceTransfers:s,validation:o}=t;try{let t=[];for(let e of i){let r=e.blockOverrides?rv.toRpc(e.blockOverrides):void 0,n=e.calls.map(e=>{let t=e.account?(0,eW.parseAccount)(e.account):void 0,r=e.abi?(0,en.encodeFunctionData)(e):e.data,n={...e,account:t,data:e.dataSuffix?(0,el.concat)([r||"0x",e.dataSuffix]):r,from:e.from??t?.address};return(0,eY.assertRequest)(n),(0,eZ.formatTransactionRequest)(n)}),i=e.stateOverrides?(0,tg.serializeStateOverride)(e.stateOverrides):void 0;t.push({blockOverrides:r,calls:n,stateOverrides:i})}let c="bigint"==typeof r?(0,g.numberToHex)(r):void 0;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:t,returnFullTransactions:a,traceTransfers:s,validation:o},c||n]})).map((e,t)=>({...tP(e),calls:e.calls.map((e,r)=>{let{abi:n,args:a,functionName:s,to:o}=i[t].calls[r],c=e.error?.data??e.returnData,u=BigInt(e.gasUsed),l=e.logs?.map(e=>rt(e)),f="0x1"===e.status?"success":"failure",d=n&&"success"===f&&"0x"!==c?(0,er.decodeFunctionResult)({abi:n,data:c,functionName:s}):null,h=(()=>{let t;if("success"!==f&&(e.error?.data==="0x"?t=new eg.AbiDecodingZeroDataError:e.error&&(t=new eo.RawContractError(e.error)),t))return ex(t,{abi:n??[],address:o??"0x",args:a,functionName:s??"<unknown>"})})();return{data:c,gasUsed:u,logs:l,status:f,..."success"===f?{result:d}:{error:h}}})}))}catch(t){let e=(0,tb.getNodeError)(t,{});if(e instanceof tm.UnknownNodeError)throw t;throw e}}var rE=e.i(40115),rB=e.i(36037),rI=e.i(4046),rA=e.i(62366),rT=e.i(80826);function rP(e){let t;if("string"==typeof e)t=(0,rT.parseSignature)(e);else{let r=(0,rA.parseStructs)(e),n=e.length;for(let i=0;i<n;i++){let n=e[i];if(!(0,rI.isStructSignature)(n)){t=(0,rT.parseSignature)(n,r);break}}}if(!t)throw new rB.InvalidAbiItemError({signature:e});return t}var rS=e.i(58629);let rR=BigInt(0x100000000-1),rN=BigInt(32);function rC(e,t=!1){let r=e.length,n=new Uint32Array(r),i=new Uint32Array(r);for(let a=0;a<r;a++){let{h:r,l:s}=function(e,t=!1){return t?{h:Number(e&rR),l:Number(e>>rN&rR)}:{h:0|Number(e>>rN&rR),l:0|Number(e&rR)}}(e[a],t);[n[a],i[a]]=[r,s]}return[n,i]}let rO="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function rk(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function rF(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function rM(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function rU(e,t){rF(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}function rj(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function rL(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rq(e,t){return e<<32-t|e>>>t}let rz=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0]?e=>e:function(e){for(let r=0;r<e.length;r++){var t;e[r]=(t=e[r])<<24&0xff000000|t<<8&0xff0000|t>>>8&65280|t>>>24&255}return e};function r$(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}(e)),rF(e),e}class rD{}function rH(e){let t=t=>e().update(r$(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function r_(e=32){if(rO&&"function"==typeof rO.getRandomValues)return rO.getRandomValues(new Uint8Array(e));if(rO&&"function"==typeof rO.randomBytes)return Uint8Array.from(rO.randomBytes(e));throw Error("crypto.getRandomValues must be defined")}let rG=BigInt(0),rV=BigInt(1),rW=BigInt(2),rQ=BigInt(7),rK=BigInt(256),rZ=BigInt(113),rY=[],rJ=[],rX=[];for(let e=0,t=rV,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],rY.push(2*(5*n+r)),rJ.push((e+1)*(e+2)/2%64);let i=rG;for(let e=0;e<7;e++)(t=(t<<rV^(t>>rQ)*rZ)%rK)&rW&&(i^=rV<<(rV<<BigInt(e))-rV);rX.push(i)}let r0=rC(rX,!0),r1=r0[0],r2=r0[1],r6=(e,t,r)=>r>32?t<<r-32|e>>>64-r:e<<r|t>>>32-r,r5=(e,t,r)=>r>32?e<<r-32|t>>>64-r:t<<r|e>>>32-r;class r8 extends rD{constructor(e,t,r,n=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,rk(r),!(0<e&&e<200))throw Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}(this.state)}clone(){return this._cloneInto()}keccak(){rz(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,i=(t+2)%10,a=r[i],s=r[i+1],o=r6(a,s,1)^r[n],c=r5(a,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){let n=rJ[r],a=r6(t,i,n),s=r5(t,i,n),o=rY[r];t=e[o],i=e[o+1],e[o]=a,e[o+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=r1[n],e[1]^=r2[n]}rj(r)}(this.state32,this.rounds),rz(this.state32),this.posOut=0,this.pos=0}update(e){rM(this),rF(e=r$(e));let{blockLen:t,state:r}=this,n=e.length;for(let i=0;i<n;){let a=Math.min(t-this.pos,n-i);for(let t=0;t<a;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){rM(this,!1),rF(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();let a=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+a),n),this.posOut+=a,n+=a}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return rk(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(rU(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,rj(this.state)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:a}=this;return e||(e=new r8(t,r,n,a,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=a,e.destroyed=this.destroyed,e}}let r3=rH(()=>new r8(136,1,32));var r4=rS,r9=e.i(77540);function r7(e,t){if(no(e)>t)throw new nd({givenSize:no(e),maxSize:t})}function ne(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function nt(e,t={}){let{dir:r="left"}=t,n=e,i=0;for(let e=0;e<n.length-1;e++)if("0"===n["left"===r?e:n.length-e-1].toString())i++;else break;return"left"===r?n.slice(i):n.slice(0,n.length-i)}var nr=e.i(16572),nn=e.i(79724);let ni=new TextDecoder,na=new TextEncoder;function ns(e,t={}){let{size:r}=t,n=e;r&&(nr.assertSize(e,r),n=r9.padRight(e,r));let i=n.slice(2);i.length%2&&(i=`0${i}`);let a=i.length/2,s=new Uint8Array(a);for(let e=0,t=0;e<a;e++){let r=ne(i.charCodeAt(t++)),n=ne(i.charCodeAt(t++));if(void 0===r||void 0===n)throw new r4.BaseError(`Invalid byte sequence ("${i[t-2]}${i[t-1]}" in "${i}").`);s[e]=r<<4|n}return s}function no(e){return e.length}function nc(e,t={}){let{size:r}=t;void 0!==r&&r7(e,r);let n=r9.fromBytes(e,t);return r9.toNumber(n,t)}function nu(e){return nt(e,{dir:"left"})}class nl extends r4.BaseError{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}class nf extends r4.BaseError{constructor(e){super(`Value \`${"object"==typeof e?nn.stringify(e):e}\` of type \`${typeof e}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class nd extends r4.BaseError{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class nh extends r4.BaseError{constructor({offset:e,position:t,size:r}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}class np extends r4.BaseError{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}function ny(e,t={}){var r;let{as:n="string"==typeof e?"Hex":"Bytes"}=t,i=r3(e instanceof Uint8Array?e:"string"==typeof e?ns(e):(r=e)instanceof Uint8Array?r:new Uint8Array(r));return"Bytes"===n?i:r9.fromBytes(i)}class nm extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){let t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){let e=this.keys().next().value;e&&this.delete(e)}return this}}let nb={checksum:new nm(8192)}.checksum;var ng=rS,nw=rS;function nv(e,t={}){let{compressed:r}=t,{prefix:n,x:i,y:a}=e;if(!1===r||"bigint"==typeof i&&"bigint"==typeof a){if(4!==n)throw new nB({prefix:n,cause:new nA});return}if(!0===r||"bigint"==typeof i&&void 0===a){if(3!==n&&2!==n)throw new nB({prefix:n,cause:new nI});return}throw new nE({publicKey:e})}function nx(e){if(132!==e.length&&130!==e.length&&68!==e.length)throw new nT({publicKey:e});if(130===e.length)return{prefix:4,x:BigInt(r9.slice(e,0,32)),y:BigInt(r9.slice(e,32,64))};if(132===e.length){let t=Number(r9.slice(e,0,1));return{prefix:t,x:BigInt(r9.slice(e,1,33)),y:BigInt(r9.slice(e,33,65))}}return{prefix:Number(r9.slice(e,0,1)),x:BigInt(r9.slice(e,1,33))}}class nE extends nw.BaseError{constructor({publicKey:e}){super(`Value \`${nn.stringify(e)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class nB extends nw.BaseError{constructor({prefix:e,cause:t}){super(`Prefix "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class nI extends nw.BaseError{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class nA extends nw.BaseError{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}class nT extends nw.BaseError{constructor({publicKey:e}){super(`Value \`${e}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${r9.size(r9.from(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}}let nP=/^0x[a-fA-F0-9]{40}$/;function nS(e,t={}){let{strict:r=!0}=t;if(!nP.test(e))throw new nC({address:e,cause:new nO});if(r){if(e.toLowerCase()===e)return;if(nR(e)!==e)throw new nC({address:e,cause:new nk})}}function nR(e){if(nb.has(e))return nb.get(e);nS(e,{strict:!1});let t=e.substring(2).toLowerCase(),r=ny(function(e,t={}){let{size:r}=t,n=na.encode(e);return"number"==typeof r?(r7(n,r),function(e,t={}){let{dir:r,size:n=32}=t;if(0===n)return e;if(e.length>n)throw new np({size:e.length,targetSize:n,type:"Bytes"});let i=new Uint8Array(n);for(let t=0;t<n;t++){let a="right"===r;i[a?t:n-t-1]=e[a?t:e.length-t-1]}return i}(n,{dir:"right",size:r})):n}(t),{as:"Bytes"}),n=t.split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&n[e]&&(n[e]=n[e].toUpperCase()),(15&r[e>>1])>=8&&n[e+1]&&(n[e+1]=n[e+1].toUpperCase());let i=`0x${n.join("")}`;return nb.set(e,i),i}function nN(e,t={}){let{strict:r=!0}=t??{};try{return nS(e,{strict:r}),!0}catch{return!1}}class nC extends ng.BaseError{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class nO extends ng.BaseError{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class nk extends ng.BaseError{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}function nF(e){let t=!0,r="",n=0,i="",a=!1;for(let s=0;s<e.length;s++){let o=e[s];if(["(",")",","].includes(o)&&(t=!0),"("===o&&n++,")"===o&&n--,t){if(0===n){if(" "===o&&["event","function","error",""].includes(i))i="";else if(i+=o,")"===o){a=!0;break}continue}if(" "===o){","!==e[s-1]&&","!==r&&",("!==r&&(r="",t=!1);continue}i+=o,r+=o}}if(!a)throw new rS.BaseError("Unable to normalize signature.");return i}function nM(e,t={}){let{prepare:r=!0}=t,n=Array.isArray(e)||"string"==typeof e?rP(e):e;return{...n,...r?{hash:nL(n)}:{}}}function nU(e,t,r){let n,{args:i=[],prepare:a=!0}=r??{},s=r9.validate(t,{strict:!1}),o=e.filter(e=>s?"function"===e.type||"error"===e.type?nj(e)===r9.slice(t,0,4):"event"===e.type&&nL(e)===t:"name"in e&&e.name===t);if(0===o.length)throw new nz({name:t});if(1===o.length)return{...o[0],...a?{hash:nL(o[0])}:{}};for(let e of o){if("inputs"in e){if(!i||0===i.length){if(!e.inputs||0===e.inputs.length)return{...e,...a?{hash:nL(e)}:{}};continue}if(e.inputs&&0!==e.inputs.length&&e.inputs.length===i.length&&i.every((t,r)=>{let n="inputs"in e&&e.inputs[r];return!!n&&function e(t,r){let n=typeof t,i=r.type;switch(i){case"address":return nN(t,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:if("tuple"===i&&"components"in r)return Object.values(r.components).every((r,n)=>e(Object.values(t)[n],r));if(/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(i))return"number"===n||"bigint"===n;if(/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(i))return"string"===n||t instanceof Uint8Array;if(/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(i))return Array.isArray(t)&&t.every(t=>e(t,{...r,type:i.replace(/(\[[0-9]{0,}\])$/,"")}));return!1}}(t,n)})){if(n&&"inputs"in n&&n.inputs){let t=function e(t,r,n){for(let i in t){let a=t[i],s=r[i];if("tuple"===a.type&&"tuple"===s.type&&"components"in a&&"components"in s)return e(a.components,s.components,n[i]);let o=[a.type,s.type];if(o.includes("address")&&o.includes("bytes20")||(o.includes("address")&&o.includes("string")||o.includes("address")&&o.includes("bytes"))&&nN(n[i],{strict:!1}))return o}}(e.inputs,n.inputs,i);if(t)throw new nq({abiItem:e,type:t[0]},{abiItem:n,type:t[1]})}n=e}}}let c=(()=>{if(n)return n;let[e,...t]=o;return{...e,overloads:t}})();if(!c)throw new nz({name:t});return{...c,...a?{hash:nL(c)}:{}}}function nj(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return nU(t,r)}return e[0]})();return r9.slice(nL(t),0,4)}function nL(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return nU(t,r)}return e[0]})();return"string"!=typeof t&&"hash"in t&&t.hash?t.hash:ny(r9.fromString(function(...e){let t=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return nU(t,r)}return e[0]})();return nF("string"==typeof t?t:rE.formatAbiItem(t))}(t)))}class nq extends rS.BaseError{constructor(e,t){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${e.type}\` in \`${nF(rE.formatAbiItem(e.abiItem))}\`, and`,`\`${t.type}\` in \`${nF(rE.formatAbiItem(t.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class nz extends rS.BaseError{constructor({name:e,data:t,type:r="item"}){super(`ABI ${r}${e?` with name "${e}"`:t?` with data "${t}"`:""} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}rS.BaseError;var n$=e.i(6444),nD=e.i(28882),nH=rS;let n_=/^(.*)\[([0-9]*)\]$/,nG=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nV=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,nW=2n**256n-1n;function nQ(e){let t=0;for(let r=0;r<e.length;r++){let{dynamic:n,encoded:i}=e[r];n?t+=32:t+=r9.size(i)}let r=[],n=[],i=0;for(let a=0;a<e.length;a++){let{dynamic:s,encoded:o}=e[a];s?(r.push(r9.fromNumber(t+i,{size:32})),n.push(o),i+=r9.size(o)):r.push(o)}return r9.concat(...r,...n)}function nK(e){let t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function nZ(e){let{type:t}=e;if("string"===t||"bytes"===t||t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(nZ);let r=nK(e.type);return!!(r&&nZ({...e,type:r[1]}))}var nY=rS;let nJ={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:1/0,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new n2({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new n1({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new n0({offset:e});let t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new n0({offset:e});let t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){let r=t??this.position;return this.assertPosition(r+e-1),this.bytes.subarray(r,r+e)},inspectUint8(e){let t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){let t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){let t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){let t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();let e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();let r=this.inspectBytes(e);return this.position+=t??e,r},readUint8(){this.assertReadLimit(),this._touch();let e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();let e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();let e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();let e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){let t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===1/0)return;let e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function nX(e,{recursiveReadLimit:t=8192}={}){let r=Object.create(nJ);return r.bytes=e,r.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),r.positionReadCount=new Map,r.recursiveReadLimit=t,r}class n0 extends nY.BaseError{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class n1 extends nY.BaseError{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class n2 extends nY.BaseError{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function n6(e,t,r={}){let{as:n="Array",checksumAddress:i=!1}=r,a="string"==typeof t?ns(t):t,s=nX(a);if(0===no(a)&&e.length>0)throw new n9;if(no(a)&&32>no(a))throw new n4({data:"string"==typeof t?t:r9.fromBytes(t),parameters:e,size:no(a)});let o=0,c="Array"===n?[]:{};for(let t=0;t<e.length;++t){let r=e[t];s.setPosition(o);let[a,u]=function e(t,r,n){let{checksumAddress:i,staticPosition:a}=n,s=nK(r.type);if(s){let[n,o]=s;return function(t,r,n){let{checksumAddress:i,length:a,staticPosition:s}=n;if(!a){let n=s+nc(t.readBytes(32)),a=n+32;t.setPosition(n);let o=nc(t.readBytes(32)),c=nZ(r),u=0,l=[];for(let n=0;n<o;++n){t.setPosition(a+(c?32*n:u));let[s,o]=e(t,r,{checksumAddress:i,staticPosition:a});u+=o,l.push(s)}return t.setPosition(s+32),[l,32]}if(nZ(r)){let n=s+nc(t.readBytes(32)),o=[];for(let s=0;s<a;++s){t.setPosition(n+32*s);let[a]=e(t,r,{checksumAddress:i,staticPosition:n});o.push(a)}return t.setPosition(s+32),[o,32]}let o=0,c=[];for(let n=0;n<a;++n){let[n,a]=e(t,r,{checksumAddress:i,staticPosition:s+o});o+=a,c.push(n)}return[c,o]}(t,{...r,type:o},{checksumAddress:i,length:n,staticPosition:a})}if("tuple"===r.type)return function(t,r,n){let{checksumAddress:i,staticPosition:a}=n,s=0===r.components.length||r.components.some(({name:e})=>!e),o=s?[]:{},c=0;if(nZ(r)){let n=a+nc(t.readBytes(32));for(let a=0;a<r.components.length;++a){let u=r.components[a];t.setPosition(n+c);let[l,f]=e(t,u,{checksumAddress:i,staticPosition:n});c+=f,o[s?a:u?.name]=l}return t.setPosition(a+32),[o,32]}for(let n=0;n<r.components.length;++n){let u=r.components[n],[l,f]=e(t,u,{checksumAddress:i,staticPosition:a});o[s?n:u?.name]=l,c+=f}return[o,c]}(t,r,{checksumAddress:i,staticPosition:a});if("address"===r.type)return function(e,t={}){let r,{checksum:n=!1}=t,i=e.readBytes(32);return[(r=r9.fromBytes(function(e,t,r,n={}){let{strict:i}=n;!1;let a=e.slice(-20,void 0);return i&&function(e,t,r){if("number"==typeof r&&no(e)!==r- -20)throw new nh({offset:r,position:"end",size:no(e)})}(a,0,void 0),a}(i,0)),n?nR(r):r),32]}(t,{checksum:i});if("bool"===r.type)return[function(e,t={}){let{size:r}=t,n=e;if(void 0!==r&&(r7(n,r),n=nu(n)),n.length>1||n[0]>1)throw new nl(n);return!!n[0]}(t.readBytes(32),{size:32}),32];if(r.type.startsWith("bytes"))return function(e,t,{staticPosition:r}){let[n,i]=t.type.split("bytes");if(!i){let t=nc(e.readBytes(32));e.setPosition(r+t);let n=nc(e.readBytes(32));if(0===n)return e.setPosition(r+32),["0x",32];let i=e.readBytes(n);return e.setPosition(r+32),[r9.fromBytes(i),32]}return[r9.fromBytes(e.readBytes(Number.parseInt(i,10),32)),32]}(t,r,{staticPosition:a});if(r.type.startsWith("uint")||r.type.startsWith("int")){var o,c;let e,n,i;return o=t,e=(c=r).type.startsWith("int"),n=Number.parseInt(c.type.split("int")[1]||"256",10),i=o.readBytes(32),[n>48?function(e,t={}){let{size:r}=t;void 0!==r&&r7(e,r);let n=r9.fromBytes(e,t);return r9.toBigInt(n,t)}(i,{signed:e}):nc(i,{signed:e}),32]}if("string"===r.type)return function(e,{staticPosition:t}){let r=nc(e.readBytes(32));e.setPosition(t+r);let n=nc(e.readBytes(32));if(0===n)return e.setPosition(t+32),["",32];let i=function(e,t={}){let{size:r}=t,n=e;return void 0!==r&&(r7(n,r),n=nt(n,{dir:"right"})),ni.decode(n)}(nu(e.readBytes(n,32)));return e.setPosition(t+32),[i,32]}(t,{staticPosition:a});throw new ii(r.type)}(s,r,{checksumAddress:i,staticPosition:0});o+=u,"Array"===n?c.push(a):c[r.name??t]=a}return c}function n5(e,t,r){let{checksumAddress:n=!1}=r??{};if(e.length!==t.length)throw new it({expectedLength:e.length,givenLength:t.length});let i=nQ(function({checksumAddress:e,parameters:t,values:r}){let n=[];for(let i=0;i<t.length;i++)n.push(function e({checksumAddress:t=!1,parameter:r,value:n}){let i=nK(r.type);if(i){let[a,s]=i;return function(t,r){let{checksumAddress:n,length:i,parameter:a}=r,s=null===i;if(!Array.isArray(t))throw new ir(t);if(!s&&t.length!==i)throw new n7({expectedLength:i,givenLength:t.length,type:`${a.type}[${i}]`});let o=!1,c=[];for(let r=0;r<t.length;r++){let i=e({checksumAddress:n,parameter:a,value:t[r]});i.dynamic&&(o=!0),c.push(i)}if(s||o){let e=nQ(c);if(s){let t=r9.fromNumber(c.length,{size:32});return{dynamic:!0,encoded:c.length>0?r9.concat(t,e):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:r9.concat(...c.map(({encoded:e})=>e))}}(n,{checksumAddress:t,length:a,parameter:{...r,type:s}})}if("tuple"===r.type)return function(t,r){let{checksumAddress:n,parameter:i}=r,a=!1,s=[];for(let r=0;r<i.components.length;r++){let o=i.components[r],c=Array.isArray(t)?r:o.name,u=e({checksumAddress:n,parameter:o,value:t[c]});s.push(u),u.dynamic&&(a=!0)}return{dynamic:a,encoded:a?nQ(s):r9.concat(...s.map(({encoded:e})=>e))}}(n,{checksumAddress:t,parameter:r});if("address"===r.type)return function(e,t){let{checksum:r=!1}=t;return nS(e,{strict:r}),{dynamic:!1,encoded:r9.padLeft(e.toLowerCase())}}(n,{checksum:t});if("bool"===r.type){var a=n;if("boolean"!=typeof a)throw new rS.BaseError(`Invalid boolean value: "${a}" (type: ${typeof a}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:r9.padLeft(r9.fromBoolean(a))}}if(r.type.startsWith("uint")||r.type.startsWith("int")){let e=r.type.startsWith("int"),[,,t="256"]=nV.exec(r.type)??[];return function(e,{signed:t,size:r}){if("number"==typeof r){let n=2n**(BigInt(r)-(t?1n:0n))-1n,i=t?-n-1n:0n;if(e>n||e<i)throw new r9.IntegerOutOfRangeError({max:n.toString(),min:i.toString(),signed:t,size:r/8,value:e.toString()})}return{dynamic:!1,encoded:r9.fromNumber(e,{size:32,signed:t})}}(n,{signed:e,size:Number(t)})}if(r.type.startsWith("bytes"))return function(e,{type:t}){let[,r]=t.split("bytes"),n=r9.size(e);if(!r){let t=e;return n%32!=0&&(t=r9.padRight(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:r9.concat(r9.padLeft(r9.fromNumber(n,{size:32})),t)}}if(n!==Number.parseInt(r,10))throw new ie({expectedSize:Number.parseInt(r,10),value:e});return{dynamic:!1,encoded:r9.padRight(e)}}(n,{type:r.type});if("string"===r.type){var s=n;let e=r9.fromString(s),t=Math.ceil(r9.size(e)/32),r=[];for(let n=0;n<t;n++)r.push(r9.padRight(r9.slice(e,32*n,(n+1)*32)));return{dynamic:!0,encoded:r9.concat(r9.padRight(r9.fromNumber(r9.size(e),{size:32})),...r)}}throw new ii(r.type)}({checksumAddress:e,parameter:t[i],value:r[i]}));return n}({checksumAddress:n,parameters:e,values:t}));return 0===i.length?"0x":i}function n8(e,t){if(e.length!==t.length)throw new it({expectedLength:e.length,givenLength:t.length});let r=[];for(let n=0;n<e.length;n++){let i=e[n],a=t[n];r.push(n8.encode(i,a))}return r9.concat(...r)}function n3(e){return Array.isArray(e)&&"string"==typeof e[0]||"string"==typeof e?function(e){let t=[];if("string"==typeof e){let r=(0,rT.splitParameters)(e),n=r.length;for(let e=0;e<n;e++)t.push((0,rT.parseAbiParameter)(r[e],{modifiers:rI.modifiers}))}else{let r=(0,rA.parseStructs)(e),n=e.length;for(let i=0;i<n;i++){let n=e[i];if((0,rI.isStructSignature)(n))continue;let a=(0,rT.splitParameters)(n),s=a.length;for(let e=0;e<s;e++)t.push((0,rT.parseAbiParameter)(a[e],{modifiers:rI.modifiers,structs:r}))}}if(0===t.length)throw new nD.InvalidAbiParametersError({params:e});return t}(e):e}(n8||(n8={})).encode=function e(t,r,n=!1){if("address"===t)return nS(r),r9.padLeft(r.toLowerCase(),32*!!n);if("string"===t)return r9.fromString(r);if("bytes"===t)return r;if("bool"===t)return r9.padLeft(r9.fromBoolean(r),n?32:1);let i=t.match(nV);if(i){let[e,t,a="256"]=i,s=Number.parseInt(a,10)/8;return r9.fromNumber(r,{size:n?32:s,signed:"int"===t})}let a=t.match(nG);if(a){let[e,t]=a;if(Number.parseInt(t,10)!==(r.length-2)/2)throw new ie({expectedSize:Number.parseInt(t,10),value:r});return r9.padRight(r,32*!!n)}let s=t.match(n_);if(s&&Array.isArray(r)){let[t,n]=s,i=[];for(let t=0;t<r.length;t++)i.push(e(n,r[t],!0));return 0===i.length?"0x":r9.concat(...i)}throw new ii(t)};class n4 extends nH.BaseError{constructor({data:e,parameters:t,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${n$.formatAbiParameters(t)})`,`Data:   ${e} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class n9 extends nH.BaseError{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class n7 extends nH.BaseError{constructor({expectedLength:e,givenLength:t,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class ie extends nH.BaseError{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${r9.size(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class it extends nH.BaseError{constructor({expectedLength:e,givenLength:t}){super(`ABI encoding parameters/values length mismatch.
Expected length (parameters): ${e}
Given length (values): ${t}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class ir extends nH.BaseError{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class ii extends nH.BaseError{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}function ia(e,t={}){return nM(e,t)}function is(e,t,r){let n=nU(e,t,r);if("function"!==n.type)throw new nz({name:t,type:"function"});return n}let io="0x0000000000000000000000000000000000000000";async function ic(e,t){let{blockNumber:r,blockTag:n,calls:i,stateOverrides:a,traceAssetChanges:s,traceTransfers:o,validation:c}=t,u=t.account?(0,eW.parseAccount)(t.account):void 0;if(s&&!u)throw new es.BaseError("`account` is required when `traceAssetChanges` is true");let l=u?function(...e){let[t,r]=(()=>{if(Array.isArray(e[0])){let[t,r]=e;return[function(e){let t=e.find(e=>"constructor"===e.type);if(!t)throw new nz({name:"constructor"});return t}(t),r]}return e})(),{bytecode:n,args:i}=r;return r9.concat(n,t.inputs?.length&&i?.length?n5(t.inputs,i):"0x")}(nM("constructor(bytes, bytes)"),{bytecode:rg.deploylessCallViaBytecodeBytecode,args:["0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033",function(...e){let[t,r=[]]=(()=>{if(Array.isArray(e[0])){let[t,r,n]=e;return[is(t,r,{args:n}),n]}let[t,r]=e;return[t,r]})(),{overloads:n}=t,i=n?is([t,...n],t.name,{args:r}):t,a=nj(i),s=r.length>0?n5(i.inputs,r):void 0;return s?r9.concat(a,s):a}(ia("function getBalance(address)"),[u.address])]}):void 0,f=s?await Promise.all(t.calls.map(async t=>{if(!t.data&&!t.abi)return;let{accessList:r}=await eJ(e,{account:u.address,...t,data:t.abi?(0,en.encodeFunctionData)(t):t.data});return r.map(({address:e,storageKeys:t})=>t.length>0?e:null)})).then(e=>e.flat().filter(Boolean)):[],d=await rx(e,{blockNumber:r,blockTag:n,blocks:[...s?[{calls:[{data:l}],stateOverrides:a},{calls:f.map((e,t)=>({abi:[ia("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:e,from:io,nonce:t})),stateOverrides:[{address:io,nonce:0}]}]:[],{calls:[...i,{}].map(e=>({...e,from:u?.address})),stateOverrides:a},...s?[{calls:[{data:l}]},{calls:f.map((e,t)=>({abi:[ia("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:e,from:io,nonce:t})),stateOverrides:[{address:io,nonce:0}]},{calls:f.map((e,t)=>({to:e,abi:[ia("function decimals() returns (uint256)")],functionName:"decimals",from:io,nonce:t})),stateOverrides:[{address:io,nonce:0}]},{calls:f.map((e,t)=>({to:e,abi:[ia("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:io,nonce:t})),stateOverrides:[{address:io,nonce:0}]},{calls:f.map((e,t)=>({to:e,abi:[ia("function symbol() returns (string)")],functionName:"symbol",from:io,nonce:t})),stateOverrides:[{address:io,nonce:0}]}]:[]],traceTransfers:o,validation:c}),h=s?d[2]:d[0],[p,y,,m,b,g,w,v]=s?d:[],{calls:x,...E}=h,B=x.slice(0,-1)??[],I=[...p?.calls??[],...y?.calls??[]].map(e=>"success"===e.status?(0,ta.hexToBigInt)(e.data):null),A=[...m?.calls??[],...b?.calls??[]].map(e=>"success"===e.status?(0,ta.hexToBigInt)(e.data):null),T=(g?.calls??[]).map(e=>"success"===e.status?e.result:null),P=(v?.calls??[]).map(e=>"success"===e.status?e.result:null),S=(w?.calls??[]).map(e=>"success"===e.status?e.result:null),R=[];for(let[e,t]of A.entries()){let r=I[e];if("bigint"!=typeof t||"bigint"!=typeof r)continue;let n=T[e-1],i=P[e-1],a=S[e-1],s=0===e?{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimals:18,symbol:"ETH"}:{address:f[e-1],decimals:a||n?Number(n??1):void 0,symbol:i??void 0};R.some(e=>e.token.address===s.address)||R.push({token:s,value:{pre:r,post:t,diff:t-r}})}return{assetChanges:R,block:E,results:B}}async function iu(e,t){let{abi:r,address:n,args:i,dataSuffix:a,functionName:s,...o}=t,c=o.account?(0,eW.parseAccount)(o.account):e.account,u=(0,en.encodeFunctionData)({abi:r,args:i,functionName:s});try{let{data:l}=await eb(e,eE.call,"call")({batch:!1,data:`${u}${a?a.replace("0x",""):""}`,to:n,...o,account:c}),f=(0,er.decodeFunctionResult)({abi:r,args:i,functionName:s,data:l||"0x"}),d=r.filter(e=>"name"in e&&e.name===t.functionName);return{result:f,request:{abi:d,address:n,args:i,dataSuffix:a,functionName:s,...o,account:c}}}catch(e){throw ex(e,{abi:r,address:n,args:i,docsPath:"/docs/contract/simulateContract",functionName:s,sender:c?.address})}}async function il(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}var id=rS;let ih="0x6492649264926492649264926492649264926492649264926492649264926492";function ip(e){if(r9.slice(e,-32)!==ih)throw new iw(e)}function iy(e){return"string"==typeof e?im(e):e}function im(e){ip(e);let[t,r,n]=n6(n3("address, bytes, bytes"),e);return{data:r,signature:n,to:t}}function ib(e){let{data:t,signature:r,to:n}=e;return r9.concat(n5(n3("address, bytes, bytes"),[n,t,r]),ih)}function ig(e){try{return ip(e),!0}catch{return!1}}class iw extends id.BaseError{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}e.s(["InvalidWrappedSignatureError",()=>iw,"assert",()=>ip,"from",()=>iy,"magicBytes",0,ih,"universalSignatureValidatorAbi",0,[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],"universalSignatureValidatorBytecode",0,"0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572","unwrap",()=>im,"validate",()=>ig,"wrap",()=>ib],99090);var iv=e.i(99090),iv=iv;function ix(e){if(e<=255)return 1;if(e<=65535)return 2;if(e<=0xffffff)return 3;if(e<=0xffffffff)return 4;throw new rS.BaseError("Length is too large.")}var iE=rS;function iB(e,t={}){let{recovered:r}=t;if(void 0===e.r||void 0===e.s||r&&void 0===e.yParity)throw new iR({signature:e});if(e.r<0n||e.r>nW)throw new iN({value:e.r});if(e.s<0n||e.s>nW)throw new iC({value:e.s});if("number"==typeof e.yParity&&0!==e.yParity&&1!==e.yParity)throw new iO({value:e.yParity})}function iI(e){if(130!==e.length&&132!==e.length)throw new iS({signature:e});let t=BigInt(r9.slice(e,0,32)),r=BigInt(r9.slice(e,32,64)),n=(()=>{let t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return iP(t)}catch{throw new iO({value:t})}})();return void 0===n?{r:t,s:r}:{r:t,s:r,yParity:n}}function iA(e){if(void 0!==e.r&&void 0!==e.s)return iT(e)}function iT(e){let t=(()=>{var t,r;let n;if("string"==typeof e)return iI(e);if(e instanceof Uint8Array)return iI(r9.fromBytes(e));return"string"==typeof e.r?(t=e,n=(()=>{let e=t.v?Number(t.v):void 0,r=t.yParity?Number(t.yParity):void 0;if("number"==typeof e&&"number"!=typeof r&&(r=iP(e)),"number"!=typeof r)throw new iO({value:t.yParity});return r})(),{r:BigInt(t.r),s:BigInt(t.s),yParity:n}):e.v?{r:(r=e).r,s:r.s,yParity:iP(r.v)}:{r:e.r,s:e.s,...void 0!==e.yParity?{yParity:e.yParity}:{}}})();return iB(t),t}function iP(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return+(e%2==0);throw new ik({value:e})}class iS extends iE.BaseError{constructor({signature:e}){super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${r9.size(r9.from(e))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class iR extends iE.BaseError{constructor({signature:e}){super(`Signature \`${nn.stringify(e)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class iN extends iE.BaseError{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class iC extends iE.BaseError{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class iO extends iE.BaseError{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class ik extends iE.BaseError{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}var iF=rS;class iM extends rD{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=rL(this.buffer)}update(e){rM(this),rF(e=r$(e));let{view:t,buffer:r,blockLen:n}=this,i=e.length;for(let a=0;a<i;){let s=Math.min(n-this.pos,i-a);if(s===n){let t=rL(e);for(;n<=i-a;a+=n)this.process(t,a);continue}r.set(e.subarray(a,a+s),this.pos),this.pos+=s,a+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){rM(this),rU(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:i}=this,{pos:a}=this;t[a++]=128,rj(this.buffer.subarray(a)),this.padOffset>n-a&&(this.process(r,0),a=0);for(let e=a;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),a=BigInt(0xffffffff),s=Number(r>>i&a),o=Number(r&a),c=4*!!n,u=4*!n;e.setUint32(t+c,s,n),e.setUint32(t+u,o,n)}(r,n-8,BigInt(8*this.length),i),this.process(r,0);let s=rL(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let c=o/4,u=this.get();if(c>u.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)s.setUint32(4*e,u[e],i)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:a,pos:s}=this;return e.destroyed=a,e.finished=i,e.length=n,e.pos=s,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}let iU=Uint32Array.from([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),ij=Uint32Array.from([0xc1059ed8,0x367cd507,0x3070dd17,0xf70e5939,0xffc00b31,0x68581511,0x64f98fa7,0xbefa4fa4]),iL=Uint32Array.from([0xcbbb9d5d,0xc1059ed8,0x629a292a,0x367cd507,0x9159015a,0x3070dd17,0x152fecd8,0xf70e5939,0x67332667,0xffc00b31,0x8eb44a87,0x68581511,0xdb0c2e0d,0x64f98fa7,0x47b5481d,0xbefa4fa4]),iq=Uint32Array.from([0x6a09e667,0xf3bcc908,0xbb67ae85,0x84caa73b,0x3c6ef372,0xfe94f82b,0xa54ff53a,0x5f1d36f1,0x510e527f,0xade682d1,0x9b05688c,0x2b3e6c1f,0x1f83d9ab,0xfb41bd6b,0x5be0cd19,0x137e2179]),iz=Uint32Array.from([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),i$=new Uint32Array(64);class iD extends iM{constructor(e=32){super(64,e,8,!1),this.A=0|iU[0],this.B=0|iU[1],this.C=0|iU[2],this.D=0|iU[3],this.E=0|iU[4],this.F=0|iU[5],this.G=0|iU[6],this.H=0|iU[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:a,G:s,H:o}=this;return[e,t,r,n,i,a,s,o]}set(e,t,r,n,i,a,s,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|a,this.G=0|s,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)i$[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=i$[e-15],r=i$[e-2],n=rq(t,7)^rq(t,18)^t>>>3,i=rq(r,17)^rq(r,19)^r>>>10;i$[e]=i+i$[e-7]+n+i$[e-16]|0}let{A:r,B:n,C:i,D:a,E:s,F:o,G:c,H:u}=this;for(let e=0;e<64;e++){var l,f,d,h;let t=u+(rq(s,6)^rq(s,11)^rq(s,25))+((l=s)&o^~l&c)+iz[e]+i$[e]|0,p=(rq(r,2)^rq(r,13)^rq(r,22))+((f=r)&(d=n)^f&(h=i)^d&h)|0;u=c,c=o,o=s,s=a+t|0,a=i,i=n,n=r,r=t+p|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,a=a+this.D|0,s=s+this.E|0,o=o+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,i,a,s,o,c,u)}roundClean(){rj(i$)}destroy(){this.set(0,0,0,0,0,0,0,0),rj(this.buffer)}}let iH=rC(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),i_=iH[0],iG=iH[1],iV=new Uint32Array(80),iW=new Uint32Array(80),iQ=rH(()=>new iD);class iK extends rD{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.createHasher");rk(e.outputLen),rk(e.blockLen)}(e);const r=r$(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),rj(i)}update(e){return rM(this),this.iHash.update(e),this}digestInto(e){rM(this),rF(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:a,outputLen:s}=this;return e.finished=n,e.destroyed=i,e.blockLen=a,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let iZ=(e,t,r)=>new iK(e,t).update(r).digest();iZ.create=(e,t)=>new iK(e,t);let iY=BigInt(0),iJ=BigInt(1);function iX(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function i0(e){if(!iX(e))throw Error("Uint8Array expected")}function i1(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}function i2(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function i6(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?iY:BigInt("0x"+e)}let i5="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,i8=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function i3(e){if(i0(e),i5)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=i8[e[r]];return t}function i4(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function i9(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(i5)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=i4(e.charCodeAt(i)),a=i4(e.charCodeAt(i+1));if(void 0===r||void 0===a)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+a}return n}function i7(e){return i6(i3(e))}function ae(e){return i0(e),i6(i3(Uint8Array.from(e).reverse()))}function at(e,t){return i9(e.toString(16).padStart(2*t,"0"))}function ar(e,t){return at(e,t).reverse()}function an(e,t,r){let n;if("string"==typeof t)try{n=i9(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(iX(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let i=n.length;if("number"==typeof r&&i!==r)throw Error(e+" of length "+r+" expected, got "+i);return n}function ai(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];i0(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}let aa=e=>"bigint"==typeof e&&iY<=e;function as(e,t,r){return aa(e)&&aa(t)&&aa(r)&&t<=e&&e<r}function ao(e,t,r,n){if(!as(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}let ac=e=>(iJ<<BigInt(e))-iJ,au=e=>new Uint8Array(e),al={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||iX(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function af(e,t,r={}){let n=(t,r,n)=>{let i=al[r];if("function"!=typeof i)throw Error("invalid validator function");let a=e[t];if((!n||void 0!==a)&&!i(a,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+a)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}function ad(e){let t=new WeakMap;return(r,...n)=>{let i=t.get(r);if(void 0!==i)return i;let a=e(r,...n);return t.set(r,a),a}}let ah=BigInt(0),ap=BigInt(1),ay=BigInt(2),am=BigInt(3),ab=BigInt(4),ag=BigInt(5),aw=BigInt(8);function av(e,t){let r=e%t;return r>=ah?r:t+r}function ax(e,t,r){let n=e;for(;t-- >ah;)n*=n,n%=r;return n}function aE(e,t){if(e===ah)throw Error("invert: expected non-zero number");if(t<=ah)throw Error("invert: expected positive modulus, got "+t);let r=av(e,t),n=t,i=ah,a=ap,s=ap,o=ah;for(;r!==ah;){let e=n/r,t=n%r,c=i-s*e,u=a-o*e;n=r,r=t,i=s,a=o,s=c,o=u}if(n!==ap)throw Error("invert: does not exist");return av(i,t)}function aB(e,t){let r=(e.ORDER+ap)/ab,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw Error("Cannot find square root");return n}function aI(e,t){let r=(e.ORDER-ag)/aw,n=e.mul(t,ay),i=e.pow(n,r),a=e.mul(t,i),s=e.mul(e.mul(a,ay),i),o=e.mul(a,e.sub(s,e.ONE));if(!e.eql(e.sqr(o),t))throw Error("Cannot find square root");return o}let aA=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function aT(e){return af(e,aA.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function aP(e,t,r=!1){let n=Array(t.length).fill(r?e.ZERO:void 0),i=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),a=e.inv(i);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),a),n}function aS(e,t){let r=(e.ORDER-ap)/ay,n=e.pow(t,r),i=e.eql(n,e.ONE),a=e.eql(n,e.ZERO),s=e.eql(n,e.neg(e.ONE));if(!i&&!a&&!s)throw Error("invalid Legendre symbol result");return i?1:a?0:-1}function aR(e,t){void 0!==t&&rk(t);let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function aN(e,t,r=!1,n={}){let i;if(e<=ah)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:a,nByteLength:s}=aR(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,isLE:r,BITS:a,BYTES:s,MASK:ac(a),ZERO:ah,ONE:ap,create:t=>av(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return ah<=t&&t<e},is0:e=>e===ah,isOdd:e=>(e&ap)===ap,neg:t=>av(-t,e),eql:(e,t)=>e===t,sqr:t=>av(t*t,e),add:(t,r)=>av(t+r,e),sub:(t,r)=>av(t-r,e),mul:(t,r)=>av(t*r,e),pow:(e,t)=>(function(e,t,r){if(r<ah)throw Error("invalid exponent, negatives unsupported");if(r===ah)return e.ONE;if(r===ap)return t;let n=e.ONE,i=t;for(;r>ah;)r&ap&&(n=e.mul(n,i)),i=e.sqr(i),r>>=ap;return n})(o,e,t),div:(t,r)=>av(t*aE(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>aE(t,e),sqrt:n.sqrt||(t=>(i||(i=e%ab===am?aB:e%aw===ag?aI:function(e){if(e<BigInt(3))throw Error("sqrt is not defined for small field");let t=e-ap,r=0;for(;t%ay===ah;)t/=ay,r++;let n=ay,i=aN(e);for(;1===aS(i,n);)if(n++>1e3)throw Error("Cannot find square root: probably non-prime P");if(1===r)return aB;let a=i.pow(n,t),s=(t+ap)/ay;return function(e,n){if(e.is0(n))return n;if(1!==aS(e,n))throw Error("Cannot find square root");let i=r,o=e.mul(e.ONE,a),c=e.pow(n,t),u=e.pow(n,s);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,r=e.sqr(c);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===i)throw Error("Cannot find square root");let n=ap<<BigInt(i-t-1),a=e.pow(o,n);i=t,o=e.sqr(a),c=e.mul(c,o),u=e.mul(u,a)}return u}}(e)),i(o,t))),toBytes:e=>r?ar(e,s):at(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?ae(e):i7(e)},invertBatch:e=>aP(o,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(o)}function aC(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function aO(e){let t=aC(e);return t+Math.ceil(t/2)}let ak=BigInt(0),aF=BigInt(1);function aM(e,t){let r=t.negate();return e?r:t}function aU(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function aj(e,t){aU(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:ac(e),maxNumber:i,shiftBy:BigInt(e)}}function aL(e,t,r){let{windowSize:n,mask:i,maxNumber:a,shiftBy:s}=r,o=Number(e&i),c=e>>s;o>n&&(o-=a,c+=aF);let u=t*n,l=u+Math.abs(o)-1,f=0===o;return{nextN:c,offset:l,isZero:f,isNeg:o<0,isNegF:t%2!=0,offsetF:u}}let aq=new WeakMap,az=new WeakMap;function a$(e){return az.get(e)||1}function aD(e){return aT(e.Fp),af(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...aR(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}function aH(e){void 0!==e.lowS&&i1("lowS",e.lowS),void 0!==e.prehash&&i1("prehash",e.prehash)}let a_={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=a_;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,i=i2(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");let a=n>127?i2(i.length/2|128):"";return i2(e)+a+i+t},decode(e,t){let{Err:r}=a_,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let i=t[n++],a=0;if(128&i){let e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)a=a<<8|e;if(n+=e,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=i;let s=t.subarray(n,n+a);if(s.length!==a)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+a)}}},_int:{encode(e){let{Err:t}=a_;if(e<aG)throw new t("integer: negative integers are not allowed");let r=i2(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=a_;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return i7(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=a_,i=an("signature",e),{v:a,l:s}=n.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:c}=n.decode(2,a),{v:u,l:l}=n.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(u)}},hexFromSig(e){let{_tlv:t,_int:r}=a_,n=t.encode(2,r.encode(e.r)),i=t.encode(2,r.encode(e.s));return t.encode(48,n+i)}},aG=BigInt(0),aV=BigInt(1),aW=BigInt(2),aQ=BigInt(3),aK=BigInt(4),aZ=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),aY=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aJ=BigInt(0),aX=BigInt(1),a0=BigInt(2),a1=(e,t)=>(e+t/a0)/t,a2=aN(aZ,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),i=BigInt(22),a=BigInt(23),s=BigInt(44),o=BigInt(88),c=e*e*e%aZ,u=c*c*e%aZ,l=ax(u,t,aZ)*u%aZ,f=ax(l,t,aZ)*u%aZ,d=ax(f,a0,aZ)*c%aZ,h=ax(d,n,aZ)*d%aZ,p=ax(h,i,aZ)*h%aZ,y=ax(p,s,aZ)*p%aZ,m=ax(y,o,aZ)*y%aZ,b=ax(m,s,aZ)*p%aZ,g=ax(b,t,aZ)*u%aZ,w=ax(g,a,aZ)*h%aZ,v=ax(w,r,aZ)*c%aZ,x=ax(v,a0,aZ);if(!a2.eql(a2.sqr(x),e))throw Error("Cannot find square root");return x}}),a6=(i={a:aJ,b:BigInt(7),Fp:a2,n:aY,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-aX*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=BigInt("0x100000000000000000000000000000000"),a=a1(t*e,aY),s=a1(-r*e,aY),o=av(e-a*t-s*n,aY),c=av(-a*r-s*t,aY),u=o>i,l=c>i;if(u&&(o=aY-o),l&&(c=aY-c),o>i||c>i)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:o,k2neg:l,k2:c}}}},{...(r=e=>(function(e){let t,r=(af(t=aD(e),{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})),{Fp:n,n:i,nByteLength:a,nBitLength:s}=r,o=n.BYTES+1,c=2*n.BYTES+1;function u(e){return av(e,i)}let{ProjectivePoint:l,normPrivateKeyToScalar:f,weierstrassEquation:d,isWithinCurveOrder:h}=function(e){var t;let r=function(e){let t=aD(e);af(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});let{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw Error("invalid endo: CURVE.a must be 0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}(e),{Fp:n}=r,i=aN(r.n,r.nBitLength),a=r.toBytes||((e,t,r)=>{let i=t.toAffine();return ai(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),s=r.fromBytes||(e=>{let t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){let{a:t,b:i}=r,a=n.sqr(e),s=n.mul(a,e);return n.add(n.add(s,n.mul(e,t)),i)}function c(e,t){let r=n.sqr(t),i=o(e);return n.eql(r,i)}if(!c(r.Gx,r.Gy))throw Error("bad curve params: generator point");let u=n.mul(n.pow(r.a,aQ),aK),l=n.mul(n.sqr(r.b),BigInt(27));if(n.is0(n.add(u,l)))throw Error("bad curve params: a or b");function f(e){let t,{allowedPrivateKeyLengths:n,nByteLength:i,wrapPrivateKey:a,n:s}=r;if(n&&"bigint"!=typeof e){if(iX(e)&&(e=i3(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*i,"0")}try{t="bigint"==typeof e?e:i7(an("private key",e,i))}catch(t){throw Error("invalid private key, expected hex or "+i+" bytes, got "+typeof e)}return a&&(t=av(t,s)),ao("private key",t,aV,s),t}function d(e){if(!(e instanceof y))throw Error("ProjectivePoint expected")}let h=ad((e,t)=>{let{px:r,py:i,pz:a}=e;if(n.eql(a,n.ONE))return{x:r,y:i};let s=e.is0();null==t&&(t=s?n.ONE:n.inv(a));let o=n.mul(r,t),c=n.mul(i,t),u=n.mul(a,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw Error("invZ was invalid");return{x:o,y:c}}),p=ad(e=>{if(e.is0()){if(r.allowInfinityPoint&&!n.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:i}=e.toAffine();if(!n.isValid(t)||!n.isValid(i))throw Error("bad point: x or y not FE");if(!c(t,i))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class y{constructor(e,t,r){if(null==e||!n.isValid(e))throw Error("x required");if(null==t||!n.isValid(t)||n.is0(t))throw Error("y required");if(null==r||!n.isValid(r))throw Error("z required");this.px=e,this.py=t,this.pz=r,Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof y)throw Error("projective point not allowed");let i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?y.ZERO:new y(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=aP(n,e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(y.fromAffine)}static fromHex(e){let t=y.fromAffine(s(an("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(f(e))}static msm(e,t){return function(e,t,r,n){if(!Array.isArray(r))throw Error("array expected");r.forEach((t,r)=>{if(!(t instanceof e))throw Error("invalid point at index "+r)});if(!Array.isArray(n))throw Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)});let i=r.length,a=n.length;if(i!==a)throw Error("arrays of points and scalars must have equal length");let s=e.ZERO,o=function(e){let t;for(t=0;e>iY;e>>=iJ,t+=1);return t}(BigInt(i)),c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);let u=ac(c),l=Array(Number(u)+1).fill(s),f=Math.floor((t.BITS-1)/c)*c,d=s;for(let e=f;e>=0;e-=c){l.fill(s);for(let t=0;t<a;t++){let i=Number(n[t]>>BigInt(e)&u);l[i]=l[i].add(r[t])}let t=s;for(let e=l.length-1,r=s;e>0;e--)r=r.add(l[e]),t=t.add(r);if(d=d.add(t),0!==e)for(let e=0;e<c;e++)d=d.double()}return d}(y,i,e,t)}_setWindowSize(e){g.setWindowSize(this,e)}assertValidity(){p(this)}hasEvenY(){let{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){d(e);let{px:t,py:r,pz:i}=this,{px:a,py:s,pz:o}=e,c=n.eql(n.mul(t,o),n.mul(a,i)),u=n.eql(n.mul(r,o),n.mul(s,i));return c&&u}negate(){return new y(this.px,n.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,i=n.mul(t,aQ),{px:a,py:s,pz:o}=this,c=n.ZERO,u=n.ZERO,l=n.ZERO,f=n.mul(a,a),d=n.mul(s,s),h=n.mul(o,o),p=n.mul(a,s);return p=n.add(p,p),l=n.mul(a,o),l=n.add(l,l),c=n.mul(e,l),u=n.mul(i,h),u=n.add(c,u),c=n.sub(d,u),u=n.add(d,u),u=n.mul(c,u),c=n.mul(p,c),l=n.mul(i,l),h=n.mul(e,h),p=n.sub(f,h),p=n.mul(e,p),p=n.add(p,l),l=n.add(f,f),f=n.add(l,f),f=n.add(f,h),f=n.mul(f,p),u=n.add(u,f),h=n.mul(s,o),h=n.add(h,h),f=n.mul(h,p),c=n.sub(c,f),l=n.mul(h,d),l=n.add(l,l),new y(c,u,l=n.add(l,l))}add(e){d(e);let{px:t,py:i,pz:a}=this,{px:s,py:o,pz:c}=e,u=n.ZERO,l=n.ZERO,f=n.ZERO,h=r.a,p=n.mul(r.b,aQ),m=n.mul(t,s),b=n.mul(i,o),g=n.mul(a,c),w=n.add(t,i),v=n.add(s,o);w=n.mul(w,v),v=n.add(m,b),w=n.sub(w,v),v=n.add(t,a);let x=n.add(s,c);return v=n.mul(v,x),x=n.add(m,g),v=n.sub(v,x),x=n.add(i,a),u=n.add(o,c),x=n.mul(x,u),u=n.add(b,g),x=n.sub(x,u),f=n.mul(h,v),u=n.mul(p,g),f=n.add(u,f),u=n.sub(b,f),f=n.add(b,f),l=n.mul(u,f),b=n.add(m,m),b=n.add(b,m),g=n.mul(h,g),v=n.mul(p,v),b=n.add(b,g),g=n.sub(m,g),g=n.mul(h,g),v=n.add(v,g),m=n.mul(b,v),l=n.add(l,m),m=n.mul(x,v),u=n.mul(w,u),u=n.sub(u,m),m=n.mul(w,b),f=n.mul(x,f),new y(u,l,f=n.add(f,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return g.wNAFCached(this,e,y.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:i}=r;ao("scalar",e,aG,i);let a=y.ZERO;if(e===aG)return a;if(this.is0()||e===aV)return this;if(!t||g.hasPrecomputes(this))return g.wNAFCachedUnsafe(this,e,y.normalizeZ);let{k1neg:s,k1:o,k2neg:c,k2:u}=t.splitScalar(e),l=a,f=a,d=this;for(;o>aG||u>aG;)o&aV&&(l=l.add(d)),u&aV&&(f=f.add(d)),d=d.double(),o>>=aV,u>>=aV;return s&&(l=l.negate()),c&&(f=f.negate()),f=new y(n.mul(f.px,t.beta),f.py,f.pz),l.add(f)}multiply(e){let t,i,{endo:a,n:s}=r;if(ao("scalar",e,aV,s),a){let{k1neg:r,k1:s,k2neg:o,k2:c}=a.splitScalar(e),{p:u,f:l}=this.wNAF(s),{p:f,f:d}=this.wNAF(c);u=g.constTimeNegate(r,u),f=g.constTimeNegate(o,f),f=new y(n.mul(f.px,a.beta),f.py,f.pz),t=u.add(f),i=l.add(d)}else{let{p:r,f:n}=this.wNAF(e);t=r,i=n}return y.normalizeZ([t,i])[0]}multiplyAndAddUnsafe(e,t,r){let n=y.BASE,i=(e,t)=>t!==aG&&t!==aV&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),a=i(this,t).add(i(e,r));return a.is0()?void 0:a}toAffine(e){return h(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===aV)return!0;if(t)return t(y,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===aV?this:t?t(y,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return i1("isCompressed",e),this.assertValidity(),a(y,this,e)}toHex(e=!0){return i1("isCompressed",e),i3(this.toRawBytes(e))}}y.BASE=new y(r.Gx,r.Gy,n.ONE),y.ZERO=new y(n.ZERO,n.ONE,n.ZERO);let{endo:m,nBitLength:b}=r,g=(t=m?Math.ceil(b/2):b,{constTimeNegate:aM,hasPrecomputes:e=>1!==a$(e),unsafeLadder(e,t,r=y.ZERO){let n=e;for(;t>ak;)t&aF&&(r=r.add(n)),n=n.double(),t>>=aF;return r},precomputeWindow(e,r){let{windows:n,windowSize:i}=aj(r,t),a=[],s=e,o=s;for(let e=0;e<n;e++){o=s,a.push(o);for(let e=1;e<i;e++)o=o.add(s),a.push(o);s=o.double()}return a},wNAF(e,r,n){let i=y.ZERO,a=y.BASE,s=aj(e,t);for(let e=0;e<s.windows;e++){let{nextN:t,offset:o,isZero:c,isNeg:u,isNegF:l,offsetF:f}=aL(n,e,s);n=t,c?a=a.add(aM(l,r[f])):i=i.add(aM(u,r[o]))}return{p:i,f:a}},wNAFUnsafe(e,r,n,i=y.ZERO){let a=aj(e,t);for(let e=0;e<a.windows&&n!==ak;e++){let{nextN:t,offset:s,isZero:o,isNeg:c}=aL(n,e,a);if(n=t,!o){let e=r[s];i=i.add(c?e.negate():e)}}return i},getPrecomputes(e,t,r){let n=aq.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&aq.set(t,r(n))),n},wNAFCached(e,t,r){let n=a$(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let i=a$(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){aU(r,t),az.set(e,r),aq.delete(e)}});return{CURVE:r,ProjectivePoint:y,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:function(e){return as(e,aV,r.n)}}}({...r,toBytes(e,t,r){let i=t.toAffine(),a=n.toBytes(i.x);return(i1("isCompressed",r),r)?ai(Uint8Array.from([t.hasEvenY()?2:3]),a):ai(Uint8Array.from([4]),a,n.toBytes(i.y))},fromBytes(e){let t=e.length,r=e[0],i=e.subarray(1);if(t===o&&(2===r||3===r)){let e,t=i7(i);if(!as(t,aV,n.ORDER))throw Error("Point is not on curve");let a=d(t);try{e=n.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&aV)===aV)&&(e=n.neg(e)),{x:t,y:e}}if(t===c&&4===r)return{x:n.fromBytes(i.subarray(0,n.BYTES)),y:n.fromBytes(i.subarray(n.BYTES,2*n.BYTES))};throw Error("invalid Point, expected length of "+o+", or uncompressed "+c+", got "+t)}}),p=(e,t,r)=>i7(e.slice(t,r));class y{constructor(e,t,r){ao("r",e,aV,i),ao("s",t,aV,i),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){return new y(p(e=an("compactSignature",e,2*a),0,a),p(e,a,2*a))}static fromDER(e){let{r:t,s:r}=a_.toSig(an("DER",e));return new y(t,r)}assertValidity(){}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){let{r:t,s:a,recovery:s}=this,o=g(an("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw Error("recovery id invalid");let c=2===s||3===s?t+r.n:t;if(c>=n.ORDER)throw Error("recovery id 2 or 3 invalid");let f=(1&s)==0?"02":"03",d=l.fromHex(f+i3(at(c,n.BYTES))),h=aE(c,i),p=u(-o*h),y=u(a*h),m=l.BASE.multiplyAndAddUnsafe(d,p,y);if(!m)throw Error("point at infinify");return m.assertValidity(),m}hasHighS(){return this.s>i>>aV}normalizeS(){return this.hasHighS()?new y(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return i9(this.toDERHex())}toDERHex(){return a_.hexFromSig(this)}toCompactRawBytes(){return i9(this.toCompactHex())}toCompactHex(){return i3(at(this.r,a))+i3(at(this.s,a))}}function m(e){if("bigint"==typeof e)return!1;if(e instanceof l)return!0;let t=an("key",e).length,i=n.BYTES,s=i+1;if(!r.allowedPrivateKeyLengths&&a!==s)return t===s||t===2*i+1}let b=r.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let t=i7(e),r=8*e.length-s;return r>0?t>>BigInt(r):t},g=r.bits2int_modN||function(e){return u(b(e))},w=ac(s);function v(e){return ao("num < 2^"+s,e,aG,w),at(e,a)}let x={lowS:r.lowS,prehash:!1},E={lowS:r.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:r,getPublicKey:function(e,t=!0){return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(!0===m(e))throw Error("first arg must be private key");if(!1===m(t))throw Error("second arg must be public key");return l.fromHex(t).multiply(f(e)).toRawBytes(r)},sign:function(e,t,a=x){let{seed:s,k2sig:o}=function(e,t,a=x){if(["recovered","canonical"].some(e=>e in a))throw Error("sign() legacy options not supported");let{hash:s,randomBytes:o}=r,{lowS:c,prehash:d,extraEntropy:p}=a;null==c&&(c=!0),e=an("msgHash",e),aH(a),d&&(e=an("prehashed msgHash",s(e)));let m=g(e),w=f(t),E=[v(w),v(m)];if(null!=p&&!1!==p){let e=!0===p?o(n.BYTES):p;E.push(an("extraEntropy",e))}return{seed:ai(...E),k2sig:function(e){var t;let r=b(e);if(!h(r))return;let n=aE(r,i),a=l.BASE.multiply(r).toAffine(),s=u(a.x);if(s===aG)return;let o=u(n*u(m+s*w));if(o===aG)return;let f=2*(a.x!==s)|Number(a.y&aV),d=o;return c&&o>i>>aV&&(d=(t=o)>i>>aV?u(-t):t,f^=1),new y(s,d,f)}}}(e,t,a);return(function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=au(e),i=au(e),a=0,s=()=>{n.fill(1),i.fill(0),a=0},o=(...e)=>r(i,n,...e),c=(e=au(0))=>{let t;if(i=o((t=[0],Uint8Array.from(t)),e),n=o(),0!==e.length){let t;i=o((t=[1],Uint8Array.from(t)),e),n=o()}},u=()=>{if(a++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return ai(...r)};return(e,t)=>{let r;for(s(),c(e);!(r=t(u()));)c();return s(),r}})(r.hash.outputLen,r.nByteLength,r.hmac)(s,o)},verify:function(e,t,n,a=E){let s,o;t=an("msgHash",t),n=an("publicKey",n);let{lowS:c,prehash:f,format:d}=a;if(aH(a),"strict"in a)throw Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw Error("format must be compact or der");let h="string"==typeof e||iX(e),p=!h&&!d&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!h&&!p)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(p&&(o=new y(e.r,e.s)),h){try{"compact"!==d&&(o=y.fromDER(e))}catch(e){if(!(e instanceof a_.Err))throw e}o||"der"===d||(o=y.fromCompact(e))}s=l.fromHex(n)}catch(e){return!1}if(!o||c&&o.hasHighS())return!1;f&&(t=r.hash(t));let{r:m,s:b}=o,w=g(t),v=aE(b,i),x=u(w*v),B=u(m*v),I=l.BASE.multiplyAndAddUnsafe(s,x,B)?.toAffine();return!!I&&u(I.x)===m},ProjectivePoint:l,Signature:y,utils:{isValidPrivateKey(e){try{return f(e),!0}catch(e){return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{let e=aO(r.n);return function(e,t,r=!1){let n=e.length,i=aC(t),a=aO(t);if(n<16||n<a||n>1024)throw Error("expected "+a+"-1024 bytes of input, got "+n);let s=av(r?ae(e):i7(e),t-ap)+ap;return r?ar(s,i):at(s,i)}(r.randomBytes(e),r.n)},precompute:(e=8,t=l.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}})({...i,hash:e,hmac:(t,...r)=>iZ(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];rF(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:r_}))(iQ),create:r});a6.ProjectivePoint;let a5=(n=[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e))).map(e=>Array.from(e).reverse()),(e,t)=>{let[r,i,a,s]=n.map(t=>t.reduce((t,r)=>a2.add(a2.mul(t,e),r))),[o,c]=aP(a2,[i,s],!0);return e=a2.mul(r,o),t=a2.mul(t,a2.mul(a,c)),{x:e,y:t}}),a8=function(e,t){if(aT(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=function(e,t){let r=e.ORDER,n=aG;for(let e=r-aV;e%aW===aG;e/=aW)n+=aV;let i=n,a=aW<<i-aV-aV,s=a*aW,o=(r-aV)/s,c=(o-aV)/aW,u=s-aV,l=e.pow(t,o),f=e.pow(t,(o+aV)/aW),d=(t,r)=>{let n=l,s=e.pow(r,u),o=e.sqr(s);o=e.mul(o,r);let d=e.mul(t,o);d=e.pow(d,c),d=e.mul(d,s),s=e.mul(d,r),o=e.mul(d,t);let h=e.mul(o,s);d=e.pow(h,a);let p=e.eql(d,e.ONE);s=e.mul(o,f),d=e.mul(h,n),o=e.cmov(s,o,p),h=e.cmov(d,h,p);for(let t=i;t>aV;t--){let r=t-aW;r=aW<<r-aV;let i=e.pow(h,r),a=e.eql(i,e.ONE);s=e.mul(o,n),n=e.mul(n,n),i=e.mul(h,n),o=e.cmov(s,o,a),h=e.cmov(i,h,a)}return{isValid:p,value:o}};if(e.ORDER%aK===aQ){let r=(e.ORDER-aQ)/aK,n=e.sqrt(e.neg(t));d=(t,i)=>{let a=e.sqr(i),s=e.mul(t,i);a=e.mul(a,s);let o=e.pow(a,r);o=e.mul(o,s);let c=e.mul(o,n),u=e.mul(e.sqr(o),i),l=e.eql(u,t),f=e.cmov(c,o,l);return{isValid:l,value:f}}}return d}(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let i,a,s,o,c,u,l,f;i=e.sqr(n),i=e.mul(i,t.Z),a=e.sqr(i),a=e.add(a,i),s=e.add(a,e.ONE),s=e.mul(s,t.B),o=e.cmov(t.Z,e.neg(a),!e.eql(a,e.ZERO)),o=e.mul(o,t.A),a=e.sqr(s),u=e.sqr(o),c=e.mul(u,t.A),a=e.add(a,c),a=e.mul(a,s),u=e.mul(u,o),c=e.mul(u,t.B),a=e.add(a,c),l=e.mul(i,s);let{isValid:d,value:h}=r(a,u);f=e.mul(i,n),f=e.mul(f,h),l=e.cmov(l,s,d),f=e.cmov(f,h,d);let p=e.isOdd(n)===e.isOdd(f);f=e.cmov(e.neg(f),f,p);let y=aP(e,[o],!0)[0];return{x:l=e.mul(l,y),y:f}}}(a2,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:a2.create(BigInt("-11"))});!function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined")}(a6.ProjectivePoint,e=>{let{x:t,y:r}=a8(a2.create(e[0]));return a5(t,r)},a2.ORDER);let a3="0x8010801080108010801080108010801080108010801080108010801080108010",a4=n3("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function a9(e){if("string"==typeof e){if(r9.slice(e,-32)!==a3)throw new sn(e)}else iB(e.authorization)}function a7(e){return"string"==typeof e?se(e):e}function se(e){a9(e);let t=r9.toNumber(r9.slice(e,-64,-32)),r=r9.slice(e,-t-64,-64),n=r9.slice(e,0,-t-64),[i,a,s]=n6(a4,r);return{authorization:function(e,t={}){return"string"==typeof e.chainId?function(e){let{address:t,chainId:r,nonce:n}=e,i=iA(e);return{address:t,chainId:Number(r),nonce:BigInt(n),...i}}(e):{...e,...t.signature}}({address:i.delegation,chainId:Number(i.chainId),nonce:i.nonce,yParity:i.yParity,r:i.r,s:i.s}),signature:n,...s&&"0x"!==s?{data:s,to:a}:{}}}function st(e){let{data:t,signature:r}=e;a9(e);let n=function(e,t={}){let r=ny(`0x${(function(e,t={}){nv(e);let{prefix:r,x:n,y:i}=e,{includePrefix:a=!0}=t;return r9.concat(a?r9.fromNumber(r,{size:1}):"0x",r9.fromNumber(n,{size:32}),"bigint"==typeof i?r9.fromNumber(i,{size:32}):"0x")})(e).slice(4)}`).substring(26);return function(e,t={}){let{checksum:r=!1}=t;return(nS(e),r)?nR(e):e}(`0x${r}`,t)}(function(e){var t;let r,{payload:n,signature:i}=e,{r:a,s,yParity:o}=i;return t=new a6.Signature(BigInt(a),BigInt(s)).addRecoveryBit(o).recoverPublicKey(r9.from(n).substring(2)),nv(r=(()=>{if(r9.validate(t))return nx(t);if(function(e){try{if(!(e instanceof Uint8Array)&&(!e||"object"!=typeof e||!("BYTES_PER_ELEMENT"in e)||1!==e.BYTES_PER_ELEMENT||"Uint8Array"!==e.constructor.name))throw new nf(e);return!0}catch{return!1}}(t)){var e;return e=t,nx(r9.fromBytes(e))}let{prefix:r,x:n,y:i}=t;return"bigint"==typeof n&&"bigint"==typeof i?{prefix:r??4,x:n,y:i}:{prefix:r,x:n}})()),r}({payload:function(e,t={}){let{presign:r}=t;return ny(r9.concat("0x05",function(e,t={}){let{as:r="Hex"}=t;return function(e,t){let{as:r}=t,n=function e(t){var r,n;let i,a,s,o;return Array.isArray(t)?(a=ix(i=(r=t.map(t=>e(t))).reduce((e,t)=>e+t.length,0)),{length:i<=55?1+i:1+a+i,encode(e){for(let{encode:t}of(i<=55?e.pushByte(192+i):(e.pushByte(247+a),1===a?e.pushUint8(i):2===a?e.pushUint16(i):3===a?e.pushUint24(i):e.pushUint32(i)),r))t(e)}}):(o=ix((s="string"==typeof(n=t)?ns(n):n).length),{length:1===s.length&&s[0]<128?1:s.length<=55?1+s.length:1+o+s.length,encode(e){1===s.length&&s[0]<128||(s.length<=55?e.pushByte(128+s.length):(e.pushByte(183+o),1===o?e.pushUint8(s.length):2===o?e.pushUint16(s.length):3===o?e.pushUint24(s.length):e.pushUint32(s.length))),e.pushBytes(s)}})}(e),i=nX(new Uint8Array(n.length));return(n.encode(i),"Hex"===r)?r9.fromBytes(i.bytes):i.bytes}(e,{as:r})}(function(e){let{address:t,chainId:r,nonce:n}=e,i=iA(e);return[r?r9.fromNumber(r):"0x",t,n?r9.fromNumber(n):"0x",...i?function(e){let{r:t,s:r,yParity:n}=e;return[n?"0x01":"0x",0n===t?"0x":r9.trimLeft(r9.fromNumber(t)),0n===r?"0x":r9.trimLeft(r9.fromNumber(r))]}(i):[]]}(r?{address:e.address,chainId:e.chainId,nonce:e.nonce}:e))))}(e.authorization,{presign:!0}),signature:iT(e.authorization)})),i=n5(a4,[{...e.authorization,delegation:e.authorization.address,chainId:BigInt(e.authorization.chainId)},e.to??n,t??"0x"]),a=r9.fromNumber(r9.size(i),{size:32});return r9.concat(r,i,a,a3)}function sr(e){try{return a9(e),!0}catch{return!1}}class sn extends iF.BaseError{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}e.s(["InvalidWrappedSignatureError",()=>sn,"assert",()=>a9,"from",()=>a7,"magicBytes",0,a3,"suffixParameters",0,a4,"unwrap",()=>se,"validate",()=>sr,"wrap",()=>st],71028);var si=e.i(71028),si=si,sa=e.i(77213);async function ss({address:e,authorization:t,signature:r}){return(0,t8.isAddressEqual)((0,tn.getAddress)(e),await tf({authorization:t,signature:r}))}var so=e.i(35841);async function sc(e,t){let r,{address:n,chain:i=e.chain,hash:a,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??i?.contracts?.erc6492Verifier?.address,multicallAddress:o=t.multicallAddress??i?.contracts?.multicall3?.address}=t;if(i?.verifyHash)return await i.verifyHash(e,t);let c=(r=t.signature,(0,eh.isHex)(r)?r:"object"==typeof r&&"r"in r&&"s"in r?function({r:e,s:t,to:r="hex",v:n,yParity:i}){let a=(()=>{if(0===i||1===i)return i;if(n&&(27n===n||28n===n||n>=35n))return+(n%2n===0n);throw Error("Invalid `v` or `yParity` value")})(),s=`0x${new so.secp256k1.Signature((0,ta.hexToBigInt)(e),(0,ta.hexToBigInt)(t)).toCompactHex()}${0===a?"1b":"1c"}`;return"hex"===r?s:(0,ef.hexToBytes)(s)}(r):(0,g.bytesToHex)(r));try{if(si.validate(c))return await su(e,{...t,multicallAddress:o,signature:c});return await sl(e,{...t,verifierAddress:s,signature:c})}catch(e){try{if((0,t8.isAddressEqual)((0,tn.getAddress)(n),await tc({hash:a,signature:c})))return!0}catch{}if(e instanceof sd)return!1;throw e}}async function su(e,t){let{address:r,blockNumber:n,blockTag:i,hash:a,multicallAddress:s}=t,{authorization:o,data:c,signature:u,to:l}=si.unwrap(t.signature);if(await t5(e,{address:r,blockNumber:n,blockTag:i})===(0,el.concatHex)(["0xef0100",o.address]))return await sf(e,{address:r,blockNumber:n,blockTag:i,hash:a,signature:u});let f={address:o.address,chainId:Number(o.chainId),nonce:Number(o.nonce),r:(0,g.numberToHex)(o.r,{size:32}),s:(0,g.numberToHex)(o.s,{size:32}),yParity:o.yParity};if(!await ss({address:r,authorization:f}))throw new sd;let d=await eb(e,eB,"readContract")({...s?{address:s}:{code:rg.multicall3Bytecode},authorizationList:[f],abi:et.multicall3Abi,blockNumber:n,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:l??r,callData:c}]:[],{allowFailure:!0,target:r,callData:(0,en.encodeFunctionData)({abi:et.erc1271Abi,functionName:"isValidSignature",args:[a,u]})}]]}),h=d[d.length-1]?.returnData;if(h?.startsWith("0x1626ba7e"))return!0;throw new sd}async function sl(e,t){let{address:r,factory:n,factoryData:i,hash:a,signature:s,verifierAddress:o,...c}=t,u=await (async()=>!n&&!i||iv.validate(s)?s:iv.wrap({data:i,signature:s,to:n}))(),l=o?{to:o,data:(0,en.encodeFunctionData)({abi:et.erc6492SignatureValidatorAbi,functionName:"isValidSig",args:[r,a,u]}),...c}:{data:(0,sa.encodeDeployData)({abi:et.erc6492SignatureValidatorAbi,args:[r,a,u],bytecode:rg.erc6492SignatureValidatorByteCode}),...c},{data:f}=await eb(e,eE.call,"call")(l).catch(e=>{if(e instanceof eo.CallExecutionError)throw new sd;throw e});if((0,ta.hexToBool)(f??"0x0"))return!0;throw new sd}async function sf(e,t){let{address:r,blockNumber:n,blockTag:i,hash:a,signature:s}=t;if((await eb(e,eB,"readContract")({address:r,abi:et.erc1271Abi,args:[a,s],blockNumber:n,blockTag:i,functionName:"isValidSignature"}).catch(e=>{if(e instanceof eo.ContractFunctionExecutionError)throw new sd;throw e})).startsWith("0x1626ba7e"))return!0;throw new sd}class sd extends Error{}function sh(e,t){let r,n;return(0,ed.keccak256)((r="string"==typeof e?(0,g.stringToHex)(e):"string"==typeof e.raw?e.raw:(0,g.bytesToHex)(e.raw),n=(0,g.stringToHex)(`\x19Ethereum Signed Message:
${(0,ti.size)(r)}`),(0,el.concat)([n,r])),t)}async function sp(e,{address:t,message:r,factory:n,factoryData:i,signature:a,...s}){let o=sh(r);return eb(e,sc,"verifyHash")({address:t,factory:n,factoryData:i,hash:o,signature:a,...s})}var sy=e.i(67869),sm=e.i(6556),sb=es;class sg extends sb.BaseError{constructor({domain:e}){super(`Invalid domain "${(0,sm.stringify)(e)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class sw extends sb.BaseError{constructor({primaryType:e,types:t}){super(`Invalid primary type \`${e}\` must be one of \`${JSON.stringify(Object.keys(t))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class sv extends sb.BaseError{constructor({type:e}){super(`Struct type "${e}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}var sx=e.i(43886),sE=e.i(82436);function sB({data:e,primaryType:t,types:r}){let n=function e({data:t,primaryType:r,types:n}){let i=[{type:"bytes32"}],a=[function({primaryType:e,types:t}){let r=(0,g.toHex)(function({primaryType:e,types:t}){let r="",n=function e({primaryType:t,types:r},n=new Set){let i=t.match(/^\w*/u),a=i?.[0];if(n.has(a)||void 0===r[a])return n;for(let t of(n.add(a),r[a]))e({primaryType:t.type,types:r},n);return n}({primaryType:e,types:t});for(let i of(n.delete(e),[e,...Array.from(n).sort()]))r+=`${i}(${t[i].map(({name:e,type:t})=>`${t} ${e}`).join(",")})`;return r}({primaryType:e,types:t}));return(0,ed.keccak256)(r)}({primaryType:r,types:n})];for(let s of n[r]){let[r,o]=function t({types:r,name:n,type:i,value:a}){if(void 0!==r[i])return[{type:"bytes32"},(0,ed.keccak256)(e({data:a,primaryType:i,types:r}))];if("bytes"===i)return[{type:"bytes32"},(0,ed.keccak256)(a)];if("string"===i)return[{type:"bytes32"},(0,ed.keccak256)((0,g.toHex)(a))];if(i.lastIndexOf("]")===i.length-1){let e=i.slice(0,i.lastIndexOf("[")),s=a.map(i=>t({name:n,type:e,types:r,value:i}));return[{type:"bytes32"},(0,ed.keccak256)((0,e5.encodeAbiParameters)(s.map(([e])=>e),s.map(([,e])=>e)))]}return[{type:i},a]}({types:n,name:s.name,type:s.type,value:t[s.name]});i.push(r),a.push(o)}return(0,e5.encodeAbiParameters)(i,a)}({data:e,primaryType:t,types:r});return(0,ed.keccak256)(n)}async function sI(e,t){let{address:r,factory:n,factoryData:i,signature:a,message:s,primaryType:o,types:c,domain:u,...l}=t,f=function(e){let{domain:t={},message:r,primaryType:n}=e,i={EIP712Domain:function({domain:e}){return["string"==typeof e?.name&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},("number"==typeof e?.chainId||"bigint"==typeof e?.chainId)&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}({domain:t}),...e.types};!function(e){let{domain:t,message:r,primaryType:n,types:i}=e,a=(e,t)=>{for(let r of e){let{name:e,type:n}=r,s=t[e],o=n.match(sE.integerRegex);if(o&&("number"==typeof s||"bigint"==typeof s)){let[e,t,r]=o;(0,g.numberToHex)(s,{signed:"int"===t,size:Number.parseInt(r,10)/8})}if("address"===n&&"string"==typeof s&&!(0,sx.isAddress)(s))throw new sy.InvalidAddressError({address:s});let c=n.match(sE.bytesRegex);if(c){let[e,t]=c;if(t&&(0,ti.size)(s)!==Number.parseInt(t,10))throw new eg.BytesSizeMismatchError({expectedSize:Number.parseInt(t,10),givenSize:(0,ti.size)(s)})}let u=i[n];u&&(function(e){if("address"===e||"bool"===e||"string"===e||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new sv({type:e})}(n),a(u,s))}};if(i.EIP712Domain&&t){if("object"!=typeof t)throw new sg({domain:t});a(i.EIP712Domain,t)}if("EIP712Domain"!==n)if(i[n])a(i[n],r);else throw new sw({primaryType:n,types:i})}({domain:t,message:r,primaryType:n,types:i});let a=["0x1901"];return t&&a.push(function({domain:e,types:t}){return sB({data:e,primaryType:"EIP712Domain",types:t})}({domain:t,types:i})),"EIP712Domain"!==n&&a.push(sB({data:r,primaryType:n,types:i})),(0,ed.keccak256)((0,el.concat)(a))}({message:s,primaryType:o,types:c,domain:u});return eb(e,sc,"verifyHash")({address:r,factory:n,factoryData:i,hash:f,signature:a,...l})}let sA=new Map,sT=new Map,sP=0;function sS(e,t,r){let n=++sP,i=()=>sA.get(e)||[],a=()=>{let t,r=i();if(!r.some(e=>e.id===n))return;let a=sT.get(e);if(1===r.length&&a){let e=a();e instanceof Promise&&e.catch(()=>{})}t=i(),sA.set(e,t.filter(e=>e.id!==n))},s=i();if(sA.set(e,[...s,{id:n,fns:t}]),s&&s.length>0)return a;let o={};for(let e in t)o[e]=(...t)=>{let r=i();if(0!==r.length)for(let n of r)n.fns[e]?.(...t)};let c=r(o);return"function"==typeof c&&sT.set(e,c),a}var sR=e.i(94027),sN=e.i(86753),sC=e.i(79345);function sO(e,{emitOnBegin:t,initialWaitTime:r,interval:n}){let i=!0,a=()=>i=!1;return(async()=>{let s;t&&(s=await e({unpoll:a}));let o=await r?.(s)??n;await (0,sC.wait)(o);let c=async()=>{i&&(await e({unpoll:a}),await (0,sC.wait)(n),c())};c()})(),a}function sk(e,{emitOnBegin:t=!1,emitMissed:r=!1,onBlockNumber:n,onError:i,poll:a,pollingInterval:s=e.pollingInterval}){let o;return(void 0!==a?a:"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type))?sS((0,sm.stringify)(["watchBlockNumber",e.uid,t,r,s]),{onBlockNumber:n,onError:i},n=>sO(async()=>{try{let t=await eb(e,t2,"getBlockNumber")({cacheTime:0});if(void 0!==o){if(t===o)return;if(t-o>1&&r)for(let e=o+1n;e<t;e++)n.onBlockNumber(e,o),o=e}(void 0===o||t>o)&&(n.onBlockNumber(t,o),o=t)}catch(e){n.onError?.(e)}},{emitOnBegin:t,interval:s})):sS((0,sm.stringify)(["watchBlockNumber",e.uid,t,r]),{onBlockNumber:n,onError:i},t=>{let r=!0,n=()=>r=!1;return(async()=>{try{let i=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:a}=await i.subscribe({params:["newHeads"],onData(e){if(!r)return;let n=(0,ta.hexToBigInt)(e.result?.number);t.onBlockNumber(n,o),o=n},onError(e){t.onError?.(e)}});n=a,r||n()}catch(e){i?.(e)}})(),()=>n()})}async function sF(e,t){let r,n,i,a,s,{checkReplacement:o=!0,confirmations:c=1,hash:u,onReplaced:l,retryCount:f=6,retryDelay:d=({count:e})=>200*~~(1<<e),timeout:h=18e4}=t,p=(0,sm.stringify)(["waitForTransactionReceipt",e.uid,u]),y=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval,m=!1,{promise:b,resolve:g,reject:w}=(0,sR.withResolvers)(),v=h?setTimeout(()=>{s?.(),a?.(),w(new tp.WaitForTransactionReceiptTimeoutError({hash:u}))},h):void 0;return a=sS(p,{onReplaced:l,resolve:g,reject:w},async t=>{if((i=await eb(e,rb,"getTransactionReceipt")({hash:u}).catch(()=>void 0))&&c<=1){clearTimeout(v),t.resolve(i),a?.();return}s=eb(e,sk,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:y,async onBlockNumber(l){let h=e=>{clearTimeout(v),s?.(),e(),a?.()},p=l;if(!m)try{if(i){if(c>1&&(!i.blockNumber||p-i.blockNumber+1n<c))return;h(()=>t.resolve(i));return}if(o&&!r&&(m=!0,await (0,sN.withRetry)(async()=>{(r=await eb(e,rh,"getTransaction")({hash:u})).blockNumber&&(p=r.blockNumber)},{delay:d,retryCount:f}),m=!1),i=await eb(e,rb,"getTransactionReceipt")({hash:u}),c>1&&(!i.blockNumber||p-i.blockNumber+1n<c))return;h(()=>t.resolve(i))}catch(a){if(a instanceof tp.TransactionNotFoundError||a instanceof tp.TransactionReceiptNotFoundError){if(!r){m=!1;return}try{n=r,m=!0;let a=await (0,sN.withRetry)(()=>eb(e,tS,"getBlock")({blockNumber:p,includeTransactions:!0}),{delay:d,retryCount:f,shouldRetry:({error:e})=>e instanceof tI});m=!1;let s=a.transactions.find(({from:e,nonce:t})=>e===n.from&&t===n.nonce);if(!s||(i=await eb(e,rb,"getTransactionReceipt")({hash:s.hash}),c>1&&(!i.blockNumber||p-i.blockNumber+1n<c)))return;let o="replaced";s.to===n.to&&s.value===n.value&&s.input===n.input?o="repriced":s.from===s.to&&0n===s.value&&(o="cancelled"),h(()=>{t.onReplaced?.({reason:o,replacedTransaction:n,transaction:s,transactionReceipt:i}),t.resolve(i)})}catch(e){h(()=>t.reject(e))}}else h(()=>t.reject(a))}}})}),b}let sM=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,sU=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;async function sj(e,t){let{address:r,domain:n,message:i,nonce:a,scheme:s,signature:o,time:c=new Date,...u}=t,l=function(e){let{scheme:t,statement:r,...n}=e.match(sM)?.groups??{},{chainId:i,expirationTime:a,issuedAt:s,notBefore:o,requestId:c,...u}=e.match(sU)?.groups??{},l=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...n,...u,...i?{chainId:Number(i)}:{},...a?{expirationTime:new Date(a)}:{},...s?{issuedAt:new Date(s)}:{},...o?{notBefore:new Date(o)}:{},...c?{requestId:c}:{},...l?{resources:l}:{},...t?{scheme:t}:{},...r?{statement:r}:{}}}(i);if(!l.address||!function(e){let{address:t,domain:r,message:n,nonce:i,scheme:a,time:s=new Date}=e;if(r&&n.domain!==r||i&&n.nonce!==i||a&&n.scheme!==a||n.expirationTime&&s>=n.expirationTime||n.notBefore&&s<n.notBefore)return!1;try{if(!n.address||!(0,sx.isAddress)(n.address,{strict:!1})||t&&!(0,t8.isAddressEqual)(n.address,t))return!1}catch{return!1}return!0}({address:r,domain:n,message:l,nonce:a,scheme:s,time:c}))return!1;let f=sh(i);return sc(e,{address:l.address,hash:f,signature:o,...u})}async function sL(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}async function sq(e,{serializedTransaction:t,throwOnReceiptRevert:r,timeout:n}){let i=await e.request({method:"eth_sendRawTransactionSync",params:n?[t,(0,g.numberToHex)(n)]:[t]},{retryCount:0}),a=(e.chain?.formatters?.transactionReceipt?.format||rm)(i);if("reverted"===a.status&&r)throw new tp.TransactionReceiptRevertedError({receipt:a});return a}function sz(e){return{call:t=>(0,eE.call)(e,t),createAccessList:t=>eJ(e,t),createBlockFilter:()=>e0(e),createContractEventFilter:t=>te(e,t),createEventFilter:t=>tt(e,t),createPendingTransactionFilter:()=>tr(e),estimateContractGas:t=>tY(e,t),estimateGas:t=>tZ(e,t),getBalance:t=>w(e,t),getBlobBaseFee:()=>tJ(e),getBlock:t=>tS(e,t),getBlockNumber:t=>t2(e,t),getBlockTransactionCount:t=>t6(e,t),getBytecode:t=>t5(e,t),getChainId:()=>t_(e),getCode:t=>t5(e,t),getContractEvents:t=>rn(e,t),getEip712Domain:t=>rs(e,t),getEnsAddress:t=>eI(e,t),getEnsAvatar:t=>e_(e,t),getEnsName:t=>eG(e,t),getEnsResolver:t=>eV(e,t),getEnsText:t=>eH(e,t),getFeeHistory:t=>rc(e,t),estimateFeesPerGas:t=>tO(e,t),getFilterChanges:t=>ru(e,t),getFilterLogs:t=>rl(e,t),getGasPrice:()=>tR(e),getLogs:t=>rr(e,t),getProof:t=>rf(e,t),estimateMaxPriorityFeePerGas:t=>tN(e,t),fillTransaction:t=>tG(e,t),getStorageAt:t=>rd(e,t),getTransaction:t=>rh(e,t),getTransactionConfirmations:t=>rp(e,t),getTransactionCount:t=>tF(e,t),getTransactionReceipt:t=>rb(e,t),multicall:t=>rw(e,t),prepareTransactionRequest:t=>tK(e,t),readContract:t=>eB(e,t),sendRawTransaction:t=>sL(e,t),sendRawTransactionSync:t=>sq(e,t),simulate:t=>rx(e,t),simulateBlocks:t=>rx(e,t),simulateCalls:t=>ic(e,t),simulateContract:t=>iu(e,t),verifyHash:t=>sc(e,t),verifyMessage:t=>sp(e,t),verifySiweMessage:t=>sj(e,t),verifyTypedData:t=>sI(e,t),uninstallFilter:t=>il(e,t),waitForTransactionReceipt:t=>sF(e,t),watchBlocks:t=>(function(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:r=!1,emitOnBegin:n=!1,onBlock:i,onError:a,includeTransactions:s,poll:o,pollingInterval:c=e.pollingInterval}){let u,l,f,d,h=void 0!==o?o:"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type),p=s??!1;return h?sS((0,sm.stringify)(["watchBlocks",e.uid,t,r,n,p,c]),{onBlock:i,onError:a},i=>sO(async()=>{try{let n=await eb(e,tS,"getBlock")({blockTag:t,includeTransactions:p});if(null!==n.number&&u?.number!=null){if(n.number===u.number)return;if(n.number-u.number>1&&r)for(let t=u?.number+1n;t<n.number;t++){let r=await eb(e,tS,"getBlock")({blockNumber:t,includeTransactions:p});i.onBlock(r,u),u=r}}(u?.number==null||"pending"===t&&n?.number==null||null!==n.number&&n.number>u.number)&&(i.onBlock(n,u),u=n)}catch(e){i.onError?.(e)}},{emitOnBegin:n,interval:c})):(l=!0,f=!0,d=()=>l=!1,(async()=>{try{n&&eb(e,tS,"getBlock")({blockTag:t,includeTransactions:p}).then(e=>{!l||f&&(i(e,void 0),f=!1)}).catch(a);let r=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),{unsubscribe:s}=await r.subscribe({params:["newHeads"],async onData(t){if(!l)return;let r=await eb(e,tS,"getBlock")({blockNumber:t.result?.number,includeTransactions:p}).catch(()=>{});l&&(i(r,u),f=!1,u=r)},onError(e){a?.(e)}});d=s,l||d()}catch(e){a?.(e)}})(),()=>d())})(e,t),watchBlockNumber:t=>sk(e,t),watchContractEvent:t=>(function(e,t){let r,n,i,a,{abi:s,address:o,args:c,batch:u=!0,eventName:l,fromBlock:f,onError:d,onLogs:h,poll:p,pollingInterval:y=e.pollingInterval,strict:m}=t;return(void 0!==p?p:"bigint"==typeof f||"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type))?(r=m??!1,sS((0,sm.stringify)(["watchContractEvent",o,c,u,e.uid,l,y,r,f]),{onLogs:h,onError:d},t=>{let n,i;void 0!==f&&(n=f-1n);let a=!1,d=sO(async()=>{if(!a){try{i=await eb(e,te,"createContractEventFilter")({abi:s,address:o,args:c,eventName:l,strict:r,fromBlock:f})}catch{}a=!0;return}try{let a;if(i)a=await eb(e,ru,"getFilterChanges")({filter:i});else{let t=await eb(e,t2,"getBlockNumber")({});a=n&&n<t?await eb(e,rn,"getContractEvents")({abi:s,address:o,args:c,eventName:l,fromBlock:n+1n,toBlock:t,strict:r}):[],n=t}if(0===a.length)return;if(u)t.onLogs(a);else for(let e of a)t.onLogs([e])}catch(e){i&&e instanceof ev.InvalidInputRpcError&&(a=!1),t.onError?.(e)}},{emitOnBegin:!0,interval:y});return async()=>{i&&await eb(e,il,"uninstallFilter")({filter:i}),d()}})):(n=(0,sm.stringify)(["watchContractEvent",o,c,u,e.uid,l,y,m??!1]),i=!0,a=()=>i=!1,sS(n,{onLogs:h,onError:d},t=>((async()=>{try{let r=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),n=l?e9({abi:s,eventName:l,args:c}):[],{unsubscribe:u}=await r.subscribe({params:["logs",{address:o,topics:n}],onData(e){if(!i)return;let r=e.result;try{let{eventName:e,args:n}=t7({abi:s,data:r.data,topics:r.topics,strict:m}),i=rt(r,{args:n,eventName:e});t.onLogs([i])}catch(a){let e,n;if(a instanceof eg.DecodeLogDataMismatch||a instanceof eg.DecodeLogTopicsMismatch){if(m)return;e=a.abiItem.name,n=a.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let i=rt(r,{args:n?[]:{},eventName:e});t.onLogs([i])}},onError(e){t.onError?.(e)}});a=u,i||a()}catch(e){d?.(e)}})(),()=>a())))})(e,t),watchEvent:t=>(function(e,{address:t,args:r,batch:n=!0,event:i,events:a,fromBlock:s,onError:o,onLogs:c,poll:u,pollingInterval:l=e.pollingInterval,strict:f}){let d,h,p=void 0!==u?u:"bigint"==typeof s||"webSocket"!==e.transport.type&&"ipc"!==e.transport.type&&("fallback"!==e.transport.type||"webSocket"!==e.transport.transports[0].config.type&&"ipc"!==e.transport.transports[0].config.type),y=f??!1;return p?sS((0,sm.stringify)(["watchEvent",t,r,n,e.uid,i,l,s]),{onLogs:c,onError:o},o=>{let c,u;void 0!==s&&(c=s-1n);let f=!1,d=sO(async()=>{if(!f){try{u=await eb(e,tt,"createEventFilter")({address:t,args:r,event:i,events:a,strict:y,fromBlock:s})}catch{}f=!0;return}try{let s;if(u)s=await eb(e,ru,"getFilterChanges")({filter:u});else{let n=await eb(e,t2,"getBlockNumber")({});s=c&&c!==n?await eb(e,rr,"getLogs")({address:t,args:r,event:i,events:a,fromBlock:c+1n,toBlock:n}):[],c=n}if(0===s.length)return;if(n)o.onLogs(s);else for(let e of s)o.onLogs([e])}catch(e){u&&e instanceof ev.InvalidInputRpcError&&(f=!1),o.onError?.(e)}},{emitOnBegin:!0,interval:l});return async()=>{u&&await eb(e,il,"uninstallFilter")({filter:u}),d()}}):(d=!0,h=()=>d=!1,(async()=>{try{let n=(()=>{if("fallback"===e.transport.type){let t=e.transport.transports.find(e=>"webSocket"===e.config.type||"ipc"===e.config.type);return t?t.value:e.transport}return e.transport})(),s=a??(i?[i]:void 0),u=[];s&&(u=[s.flatMap(e=>e9({abi:[e],eventName:e.name,args:r}))],i&&(u=u[0]));let{unsubscribe:l}=await n.subscribe({params:["logs",{address:t,topics:u}],onData(e){if(!d)return;let t=e.result;try{let{eventName:e,args:r}=t7({abi:s??[],data:t.data,topics:t.topics,strict:y}),n=rt(t,{args:r,eventName:e});c([n])}catch(i){let e,r;if(i instanceof eg.DecodeLogDataMismatch||i instanceof eg.DecodeLogTopicsMismatch){if(f)return;e=i.abiItem.name,r=i.abiItem.inputs?.some(e=>!("name"in e&&e.name))}let n=rt(t,{args:r?[]:{},eventName:e});c([n])}},onError(e){o?.(e)}});h=l,d||h()}catch(e){o?.(e)}})(),()=>h())})(e,t),watchPendingTransactions:t=>(function(e,{batch:t=!0,onError:r,onTransactions:n,poll:i,pollingInterval:a=e.pollingInterval}){let s,o;return(void 0!==i?i:"webSocket"!==e.transport.type&&"ipc"!==e.transport.type)?sS((0,sm.stringify)(["watchPendingTransactions",e.uid,t,a]),{onTransactions:n,onError:r},r=>{let n,i=sO(async()=>{try{if(!n)try{n=await eb(e,tr,"createPendingTransactionFilter")({});return}catch(e){throw i(),e}let a=await eb(e,ru,"getFilterChanges")({filter:n});if(0===a.length)return;if(t)r.onTransactions(a);else for(let e of a)r.onTransactions([e])}catch(e){r.onError?.(e)}},{emitOnBegin:!0,interval:a});return async()=>{n&&await eb(e,il,"uninstallFilter")({filter:n}),i()}}):(s=!0,o=()=>s=!1,(async()=>{try{let{unsubscribe:t}=await e.transport.subscribe({params:["newPendingTransactions"],onData(e){if(!s)return;let t=e.result;n([t])},onError(e){r?.(e)}});o=t,s||o()}catch(e){r?.(e)}})(),()=>o())})(e,t)}}function s$(e,t={}){let r=function(e,t={}){try{return e.getClient(t)}catch{return}}(e,t);return r?.extend(sz)}function sD(e={}){let t=p(e);return(0,y.useSyncExternalStoreWithSelector)(e=>(function(e,t){let{onChange:r}=t;return e.subscribe(()=>s$(e),r,{equalityFn:(e,t)=>e?.uid===t?.uid})})(t,{onChange:e}),()=>s$(t,e),()=>s$(t,e),e=>e,(e,t)=>e?.uid===t?.uid)}var sH=e.i(76111);function s_(){let[e,t]=(0,s.useState)(!1),{address:r,isConnected:n}=b(),i=sD(),{data:c,isLoading:l,isError:f}=function(e={}){let t=p(e),r=W({config:t});return G(function(e,t={}){return{...t.query,enabled:!!(t.address&&(t.query?.enabled??!0)),queryFn:async t=>{let[,{scopeKey:r,...n}]=t.queryKey;if(!n.address)throw Error("address is required");return await x(e,{...n,address:n.address})??null},queryKey:function(e={}){return["balance",I(e)]}(t)}}(t,{...e,chainId:e.chainId??r,query:e.query}))}({address:r,chainId:sH.monadTestnet.id,query:{enabled:!!r}}),d=W(),{connect:h,connectors:y,isPending:m}=function(e={}){let t=p(e),r={mutationFn:e=>K(t,e),mutationKey:["connect"]},n=_({...e.mutation,...r});return(0,s.useEffect)(()=>t.subscribe(({status:e})=>e,(e,t)=>{"connected"===t&&"disconnected"===e&&n.reset()}),[t,n.reset]),{...n,connect:n.mutate,connectAsync:n.mutateAsync,connectors:function(e={}){let t=p(e);return(0,s.useSyncExternalStore)(e=>(function(e,t){let{onChange:r}=t;return e._internal.connectors.subscribe((e,t)=>{r(Object.values(e),t)})})(t,{onChange:e}),()=>Y(t),()=>Y(t))}({config:t})}}(),{disconnect:g}=function(e={}){let t=p(e),r={mutationFn:e=>J(t,e),mutationKey:["disconnect"]},n=_({...e.mutation,...r});return{...n,connectors:(function(e={}){let t=p(e);return(0,s.useSyncExternalStore)(e=>(function(e,t){let{onChange:r}=t;return e.subscribe(()=>ee(e),r,{equalityFn:u})})(t,{onChange:e}),()=>ee(t),()=>ee(t))})({config:t}).map(e=>e.connector),disconnect:n.mutate,disconnectAsync:n.mutateAsync}}(),w=d===sH.monadTestnet.id,[v,E]=(0,s.useState)(null);return((0,s.useEffect)(()=>{t(!0)},[]),(0,s.useEffect)(()=>{if(!e||!r||!i||!w)return void E(null);let t=!1;return(async()=>{try{let e=await i.getBalance({address:r});t||E((0,o.formatEther)(e))}catch{t||E(null)}})(),()=>{t=!0}},[r,w,e,i]),e)?(0,a.jsxs)("div",{className:"card wallet-card",children:[(0,a.jsx)("h3",{children:"Wallet"}),n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("p",{className:"muted",children:["Connected: ",(0,a.jsx)("span",{className:"mono",children:r})]}),(0,a.jsxs)("p",{className:"muted",children:["Balance:"," ",(0,a.jsx)("span",{className:"mono",children:f?"Unavailable":l&&!v?"Loading...":v?`${Number(v).toFixed(4)} MON`:c?.value!==void 0?`${Number((0,o.formatEther)(c.value)).toFixed(4)} ${c.symbol||"MON"}`:"0.0000 MON"})]}),(0,a.jsx)("p",{className:w?"success":"error",children:w?"Monad Testnet":`Wrong network (${d})`}),(0,a.jsx)("button",{className:"secondary",onClick:()=>g(),children:"Disconnect"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"muted",children:"Connect your wallet to view challenges."}),(0,a.jsx)("button",{onClick:()=>h({connector:y[0]}),disabled:m,children:"Connect Wallet"})]})]}):(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("h3",{children:"Wallet"}),(0,a.jsx)("p",{className:"muted",children:"Loading wallet status..."})]})}async function sG(e,t){let{chainId:r,timeout:n=0,...i}=t,a=e.getClient({chainId:r}),s=v(a,sF,"waitForTransactionReceipt"),o=await s({...i,timeout:n});if("reverted"===o.status){let e=v(a,rh,"getTransaction"),{from:t,...r}=await e({hash:o.transactionHash}),n=v(a,eE.call,"call"),i=await n({...r,account:t,data:r.input,gasPrice:"eip1559"!==r.type?r.gasPrice:void 0,maxFeePerGas:"eip1559"===r.type?r.maxFeePerGas:void 0,maxPriorityFeePerGas:"eip1559"===r.type?r.maxPriorityFeePerGas:void 0});throw Error(i?.data?(0,ta.hexToString)(`0x${i.data.substring(138)}`):"unknown reason")}return{...o,chainId:a.chain.id}}function sV(e={}){let t=p(e),r=W({config:t});return G(function(e,t={}){return{...t.query,enabled:!!(t.hash&&(t.query?.enabled??!0)),queryFn:async r=>{let[,{scopeKey:n,...i}]=r.queryKey;if(!i.hash)throw Error("hash is required");return sG(e,{...i,onReplaced:t.onReplaced,hash:i.hash})},queryKey:function(e={}){let{onReplaced:t,...r}=e;return["waitForTransactionReceipt",I(r)]}(t)}}(t,{...e,chainId:e.chainId??r,query:e.query}))}var sW=es;class sQ extends sW.BaseError{constructor({docsPath:e}={}){super("Could not find an Account to execute with this Action.\nPlease provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client.",{docsPath:e,docsSlug:"account",name:"AccountNotFoundError"})}}class sK extends sW.BaseError{constructor({docsPath:e,metaMessages:t,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:e,metaMessages:t,name:"AccountTypeNotSupportedError"})}}var sZ=e.i(14863);let sY=new tD.LruMap(128);async function sJ(e,t){let{account:r=e.account,assertChainId:n=!0,chain:i=e.chain,accessList:a,authorizationList:s,blobs:o,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,type:y,value:m,...b}=t;if(void 0===r)throw new sQ({docsPath:"/docs/actions/wallet/sendTransaction"});let g=r?(0,eW.parseAccount)(r):null;try{(0,eY.assertRequest)(t);let r=await (async()=>t.to?t.to:null!==t.to&&s&&s.length>0?await tf({authorization:s[0]}).catch(()=>{throw new es.BaseError("`to` is required. Could not infer from `authorizationList`.")}):void 0)();if(g?.type==="json-rpc"||null===g){let t;null!==i&&(t=await eb(e,t_,"getChainId")({}),n&&function({chain:e,currentChainId:t}){if(!e)throw new sZ.ChainNotFoundError;if(t!==e.id)throw new sZ.ChainMismatchError({chain:e,currentChainId:t})}({currentChainId:t,chain:i}));let w=e.chain?.formatters?.transactionRequest?.format,v=(w||eZ.formatTransactionRequest)({...(0,eK.extract)(b,{format:w}),accessList:a,account:g,authorizationList:s,blobs:o,chainId:t,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,to:r,type:y,value:m},"sendTransaction"),x=sY.get(e.uid);try{return await e.request({method:x?"wallet_sendTransaction":"eth_sendTransaction",params:[v]},{retryCount:0})}catch(t){if(!1===x)throw t;if("InvalidInputRpcError"===t.name||"InvalidParamsRpcError"===t.name||"MethodNotFoundRpcError"===t.name||"MethodNotSupportedRpcError"===t.name)return await e.request({method:"wallet_sendTransaction",params:[v]},{retryCount:0}).then(t=>(sY.set(e.uid,!0),t)).catch(r=>{if("MethodNotFoundRpcError"===r.name||"MethodNotSupportedRpcError"===r.name)throw sY.set(e.uid,!1),t;throw r});throw t}}if(g?.type==="local"){let t=await eb(e,tK,"prepareTransactionRequest")({account:g,accessList:a,authorizationList:s,blobs:o,chain:i,data:c,gas:u,gasPrice:l,maxFeePerBlobGas:f,maxFeePerGas:d,maxPriorityFeePerGas:h,nonce:p,nonceManager:g.nonceManager,parameters:[...tV,"sidecars"],type:y,value:m,...b,to:r}),n=i?.serializers?.transaction,w=await g.signTransaction(t,{serializer:n});return await eb(e,sL,"sendRawTransaction")({serializedTransaction:w})}if(g?.type==="smart")throw new sK({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"});throw new sK({docsPath:"/docs/actions/wallet/sendTransaction",type:g?.type})}catch(e){if(e instanceof sK)throw e;throw tH(e,{...t,account:g,chain:t.chain||void 0})}}async function sX(e,t){return sX.internal(e,sJ,"sendTransaction",t)}(sX||(sX={})).internal=async function(e,t,r,n){let{abi:i,account:a=e.account,address:s,args:o,dataSuffix:c,functionName:u,...l}=n;if(void 0===a)throw new sQ({docsPath:"/docs/contract/writeContract"});let f=a?(0,eW.parseAccount)(a):null,d=(0,en.encodeFunctionData)({abi:i,args:o,functionName:u});try{return await eb(e,t,r)({data:`${d}${c?c.replace("0x",""):""}`,to:s,account:f,...l})}catch(e){throw ex(e,{abi:i,address:s,args:o,docsPath:"/docs/contract/writeContract",functionName:u,sender:f?.address})}};var s0=e.i(37293),s1=e.i(14914);async function s2(e,t={}){let r,{assertChainId:n=!0}=t;if(t.connector){let{connector:n}=t;if("reconnecting"===e.state.status&&!n.getAccounts&&!n.getChainId)throw new Q.ConnectorUnavailableReconnectingError({connector:n});let[i,a]=await Promise.all([n.getAccounts().catch(e=>{if(null===t.account)return[];throw e}),n.getChainId()]);r={accounts:i,chainId:a,connector:n}}else r=e.state.connections.get(e.state.current);if(!r)throw new Q.ConnectorNotConnectedError;let i=t.chainId??r.chainId,a=await r.connector.getChainId();if(n&&a!==i)throw new Q.ConnectorChainMismatchError({connectionChainId:i,connectorChainId:a});let s=r.connector;if(s.getClient)return s.getClient({chainId:i});let o=(0,eW.parseAccount)(t.account??r.accounts[0]);if(o&&(o.address=(0,tn.getAddress)(o.address)),t.account&&!r.accounts.some(e=>e.toLowerCase()===o.address.toLowerCase()))throw new Q.ConnectorAccountNotFoundError({address:o.address,connector:s});let c=e.chains.find(e=>e.id===i),u=await r.connector.getProvider({chainId:i});return(0,s0.createClient)({account:o,chain:c,name:"Connector Client",transport:e=>(function(e,t={}){let{key:r="custom",methods:n,name:i="Custom Provider",retryDelay:a}=t;return({retryCount:s})=>(0,s1.createTransport)({key:r,methods:n,name:i,request:e.request.bind(e),retryCount:t.retryCount??s,retryDelay:a,type:"custom"})})(u)({...e,retryCount:0})})}async function s6(e,t){let r,{account:n,chainId:i,connector:a,...s}=t;r="object"==typeof n&&n?.type==="local"?e.getClient({chainId:i}):await s2(e,{account:n??void 0,assertChainId:!1,chainId:i,connector:a});let o=i&&r.chain?.id!==i?{id:i}:r.chain,c=v(r,sX,"writeContract");return await c({...s,...n?{account:n}:{},assertChainId:!!i,chain:o})}function s5(e={}){var t;let r=(t=p(e),{mutationFn:e=>s6(t,e),mutationKey:["writeContract"]}),n=_({...e.mutation,...r});return{...n,mutate:n.mutate,mutateAsync:n.mutateAsync,writeContract:n.mutate,writeContractAsync:n.mutateAsync}}let s8=[{inputs:[{internalType:"address",name:"opponent",type:"address"},{internalType:"uint32",name:"gameId",type:"uint32"},{internalType:"uint64",name:"acceptBy",type:"uint64"},{internalType:"uint64",name:"resolveBy",type:"uint64"},{internalType:"bytes32",name:"metaHash",type:"bytes32"}],name:"createChallenge",outputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],name:"acceptChallenge",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],name:"refund",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],name:"matches",outputs:[{internalType:"address",name:"creator",type:"address"},{internalType:"address",name:"opponent",type:"address"},{internalType:"uint96",name:"wager",type:"uint96"},{internalType:"uint32",name:"gameId",type:"uint32"},{internalType:"uint64",name:"createdAt",type:"uint64"},{internalType:"uint64",name:"acceptBy",type:"uint64"},{internalType:"uint64",name:"resolveBy",type:"uint64"},{internalType:"uint8",name:"state",type:"uint8"},{internalType:"address",name:"winner",type:"address"},{internalType:"bytes32",name:"metaHash",type:"bytes32"}],stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"matchId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"address",name:"opponent",type:"address"},{indexed:!1,internalType:"uint256",name:"wager",type:"uint256"},{indexed:!1,internalType:"uint32",name:"gameId",type:"uint32"},{indexed:!1,internalType:"uint64",name:"acceptBy",type:"uint64"},{indexed:!1,internalType:"uint64",name:"resolveBy",type:"uint64"},{indexed:!1,internalType:"bytes32",name:"metaHash",type:"bytes32"}],name:"ChallengeCreated",type:"event"}];function s3(){return"0x1eaC5D89E6e5958d978eeD15CC255B77f668CaF7"}let s4=[{inputs:[{internalType:"uint32",name:"gameId",type:"uint32"}],name:"createPveMatch",outputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"escrowMatchId",type:"uint256"},{internalType:"address",name:"opponent",type:"address"},{internalType:"uint32",name:"gameId",type:"uint32"},{internalType:"uint64",name:"acceptBy",type:"uint64"},{internalType:"uint64",name:"resolveBy",type:"uint64"}],name:"createPvpMatch",outputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"},{internalType:"uint8",name:"row",type:"uint8"},{internalType:"uint8",name:"col",type:"uint8"},{internalType:"uint8",name:"value",type:"uint8"}],name:"submitMove",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"},{internalType:"address",name:"player",type:"address"},{internalType:"uint8",name:"row",type:"uint8"},{internalType:"uint8",name:"col",type:"uint8"},{internalType:"uint8",name:"value",type:"uint8"}],name:"submitMoveFor",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],name:"acceptMatch",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"}],name:"matches",outputs:[{internalType:"address",name:"creator",type:"address"},{internalType:"address",name:"opponent",type:"address"},{internalType:"bool",name:"isPvp",type:"bool"},{internalType:"uint8",name:"state",type:"uint8"},{internalType:"uint64",name:"createdAt",type:"uint64"},{internalType:"uint64",name:"acceptBy",type:"uint64"},{internalType:"uint64",name:"resolveBy",type:"uint64"},{internalType:"uint32",name:"gameId",type:"uint32"},{internalType:"uint256",name:"startBlock",type:"uint256"},{internalType:"uint256",name:"creatorFinishBlock",type:"uint256"},{internalType:"uint256",name:"opponentFinishBlock",type:"uint256"},{internalType:"uint8",name:"puzzleIndex",type:"uint8"},{internalType:"bytes32",name:"puzzleHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint8",name:"index",type:"uint8"}],name:"getPackedPuzzle",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"matchId",type:"uint256"},{internalType:"uint8",name:"row",type:"uint8"},{internalType:"uint8",name:"col",type:"uint8"}],name:"getCell",outputs:[{internalType:"uint8",name:"",type:"uint8"}],stateMutability:"view",type:"function"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"matchId",type:"uint256"},{indexed:!0,internalType:"address",name:"creator",type:"address"},{indexed:!0,internalType:"address",name:"opponent",type:"address"},{indexed:!1,internalType:"bool",name:"isPvp",type:"bool"},{indexed:!1,internalType:"uint32",name:"gameId",type:"uint32"},{indexed:!1,internalType:"uint64",name:"acceptBy",type:"uint64"},{indexed:!1,internalType:"uint64",name:"resolveBy",type:"uint64"},{indexed:!1,internalType:"uint8",name:"puzzleIndex",type:"uint8"},{indexed:!1,internalType:"bytes32",name:"puzzleHash",type:"bytes32"}],name:"MatchCreated",type:"event"},{inputs:[],name:"nextMatchId",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];function s9(){return"0xA975583FE5DeeE7FAf66B7fBf328D897060C7Ed9"}let s7=10n**18n;function oe(){let{address:e}=b(),t=W(),r=sD(),n=s3(),i=s9(),[c,u]=(0,s.useState)([]),[l,f]=(0,s.useState)(0),[d,h]=(0,s.useState)("Idle"),[p,y]=(0,s.useState)(""),[m,g]=(0,s.useState)(!1),[w,v]=(0,s.useState)(null),[x,E]=(0,s.useState)(null),{writeContractAsync:B}=s5(),{isLoading:I}=sV({hash:x||void 0}),A=!!(e&&r&&n&&m),T=t===sH.monadTestnet.id;(0,s.useEffect)(()=>{g(!0)},[]),(0,s.useEffect)(()=>{if(!A)return void u([]);let t=!1;return(async()=>{if(r&&n&&e){h("Loading..."),y("");try{let i=(await r.getLogs({address:n,event:rP("event ChallengeCreated(uint256 indexed matchId,address indexed creator,address indexed opponent,uint256 wager,uint32 gameId,uint64 acceptBy,uint64 resolveBy,bytes32 metaHash)"),fromBlock:0n})).map(e=>{let t=t7({abi:s8,data:e.data,topics:e.topics});return{matchId:t.args.matchId,creator:t.args.creator,opponent:t.args.opponent,wager:t.args.wager,acceptBy:t.args.acceptBy,resolveBy:t.args.resolveBy}}).filter(t=>t.opponent.toLowerCase()===e.toLowerCase()),a=(await Promise.all(i.map(async e=>{let t=await r.readContract({address:n,abi:s8,functionName:"matches",args:[e.matchId]});return{event:e,state:t[7]}}))).filter(e=>1===e.state&&e.event.wager>=s7).map(e=>e.event).sort((e,t)=>e.wager>t.wager?-1:1);t||(u(a),h("Loaded"))}catch(e){t||(y(e?.shortMessage||e?.message||"Failed to load challenges"),h("Error"))}}})(),()=>{t=!0}},[e,n,A,r,l]);let P=(0,s.useMemo)(()=>m?n?e?p||("Loading..."===d?"Loading challenges...":c.length?null:"No pending challenges."):"Connect wallet to view pending challenges.":"Missing NEXT_PUBLIC_ARCADE_ESCROW_ADDRESS":"Loading challenges...",[e,c.length,p,n,d,m]),S=async e=>{if(!n||!i)return void y("Missing contract address");if(!T)return void y("Switch to Monad Testnet.");y(""),v(e.matchId),E(null);try{let t=await B({abi:s8,address:n,functionName:"acceptChallenge",args:[e.matchId],value:e.wager});E(t),await r?.waitForTransactionReceipt({hash:t});let a=await B({abi:s4,address:i,functionName:"acceptMatch",args:[e.matchId]});E(a),h("Challenge accepted."),f(e=>e+1)}catch(e){y(e?.shortMessage||e?.message||"Accept failed")}finally{v(null)}};return(0,a.jsxs)("aside",{className:"card",children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("h3",{children:"Pending Challenges"}),(0,a.jsx)("button",{className:"secondary",onClick:()=>f(e=>e+1),children:"Refresh"})]}),P?(0,a.jsx)("p",{className:"muted",children:P}):null,c.map(e=>(0,a.jsxs)("div",{className:"challenge-item",children:[(0,a.jsxs)("p",{className:"mono",children:["Match #",e.matchId.toString()]}),(0,a.jsxs)("p",{className:"muted",children:["From: ",e.creator]}),(0,a.jsxs)("p",{children:["Wager: ",(0,a.jsxs)("strong",{children:[(0,o.formatEther)(e.wager)," MON"]})]}),(0,a.jsx)("button",{className:"secondary",onClick:()=>S(e),disabled:!T||I||w===e.matchId,children:w===e.matchId?"Accepting...":"Accept Challenge"})]},e.matchId.toString()))]})}var ot=e.i(41801);async function or(e,{account:t=e.account,message:r}){if(!t)throw new sQ({docsPath:"/docs/actions/wallet/signMessage"});let n=(0,eW.parseAccount)(t);if(n.signMessage)return n.signMessage({message:r});let i="string"==typeof r?(0,g.stringToHex)(r):r.raw instanceof Uint8Array?(0,g.toHex)(r.raw):r.raw;return e.request({method:"personal_sign",params:[i,n.address]},{retryCount:0})}async function on(e,t){let{account:r,connector:n,...i}=t;return v("object"==typeof r&&"local"===r.type?e.getClient():await s2(e,{account:r,connector:n}),or,"signMessage")({...i,...r?{account:r}:{}})}var oi=e.i(11791);async function oa(e,t){let{addEthereumChainParameter:r,chainId:n}=t,i=e.state.connections.get(t.connector?.uid??e.state.current);if(i){let e=i.connector;if(!e.switchChain)throw new oi.SwitchChainNotSupportedError({connector:e});return await e.switchChain({addEthereumChainParameter:r,chainId:n})}let a=e.chains.find(e=>e.id===n);if(!a)throw new Q.ChainNotConfiguredError;return e.setState(e=>({...e,chainId:n})),a}let os=[];function oo(e){let t=e.chains;return u(os,t)?os:(os=t,t)}let oc=()=>Array.from({length:9},()=>Array(9).fill(0));function ou(){let{address:e}=b(),t=W(),{switchChain:r}=function(e={}){let t=p(e),r={mutationFn:e=>oa(t,e),mutationKey:["switchChain"]},n=_({...e.mutation,...r});return{...n,mutate:n.mutate,mutateAsync:n.mutateAsync,chains:function(e={}){let t=p(e);return(0,s.useSyncExternalStore)(e=>(function(e,t){let{onChange:r}=t;return e._internal.chains.subscribe((e,t)=>{r(e,t)})})(t,{onChange:e}),()=>oo(t),()=>oo(t))}({config:t}),switchChain:n.mutate,switchChainAsync:n.mutateAsync}}(),n=sD(),[i,o]=(0,s.useState)("0"),[c,u]=(0,s.useState)(null),[l,f]=(0,s.useState)(()=>oc()),[d,h]=(0,s.useState)(()=>oc()),[y,m]=(0,s.useState)(new Set),[g,w]=(0,s.useState)(""),[v,x]=(0,s.useState)(""),[E,B]=(0,s.useState)(null),[I,A]=(0,s.useState)(!1),[T,P]=(0,s.useState)(null),[S,R]=(0,s.useState)(0),[N,C]=(0,s.useState)(!0),[O,k]=(0,s.useState)(null),{writeContractAsync:F}=s5(),{signMessageAsync:M}=function(e={}){var t;let r=(t=p(e),{mutationFn:e=>on(t,e),mutationKey:["signMessage"]}),n=_({...e.mutation,...r});return{...n,signMessage:n.mutate,signMessageAsync:n.mutateAsync}}(),{isLoading:U}=sV({hash:E||void 0}),j=s9(),L=t===sH.monadTestnet.id,q=!!(j&&L),z=(0,s.useMemo)(()=>!!(q&&c&&c>0),[q,c]);(0,s.useEffect)(()=>{if(!I)return;let e=localStorage.getItem("arcade2-relayer-session");if(e)try{let t=JSON.parse(e);Date.now()<t.expiresAt&&k(t)}catch{localStorage.removeItem("arcade2-relayer-session")}},[I]);let $=(0,s.useMemo)(()=>{let e=new Set,t=(t,r)=>{e.add(`${t}-${r}`)};for(let e=0;e<9;e+=1)for(let r=0;r<9;r+=1){let n=l[e][r];if(0===n)continue;for(let i=0;i<9;i+=1)i!==r&&l[e][i]===n&&(t(e,r),t(e,i));for(let i=0;i<9;i+=1)i!==e&&l[i][r]===n&&(t(e,r),t(i,r));let i=3*Math.floor(e/3),a=3*Math.floor(r/3);for(let s=i;s<i+3;s+=1)for(let i=a;i<a+3;i+=1)(s!==e||i!==r)&&l[s][i]===n&&(t(e,r),t(s,i))}return e},[l]),D=(0,s.useMemo)(()=>!l.some(e=>e.some(e=>0===e))&&0===$.size,[l,$.size]),H=(0,s.useMemo)(()=>D&&0===y.size&&!U,[D,y.size,U]);(0,s.useEffect)(()=>{E&&!U&&w("Move confirmed.")},[E,U]),(0,s.useEffect)(()=>{A(!0)},[]),(0,s.useEffect)(()=>{if(!n||!j||!c||c<=0){f(oc()),h(oc());return}let e=!1;return(async()=>{try{w("Loading puzzle...");let t=(await n.readContract({address:j,abi:s4,functionName:"matches",args:[BigInt(c)]}))[11],r=await n.readContract({address:j,abi:s4,functionName:"getPackedPuzzle",args:[t]}),i=function(e){let t=Array.from(ot.Buffer.from(e.slice(2),"hex")),r=[];for(let e=0;e<81;e+=1){let n=t[Math.floor(e/2)]||0,i=e%2==0?n>>4:15&n;r.push(i)}let n=[];for(let e=0;e<9;e+=1)n.push(r.slice(9*e,9*e+9));return n}(r);e||(h(i),f(i.map(e=>e.map(e=>e))),w("Puzzle loaded"))}catch(t){e||(x(t?.shortMessage||t?.message||"Failed to load puzzle"),w(""))}})(),()=>{e=!0}},[j,c,n]);let G=async()=>{if(!j)return void x("Missing NEXT_PUBLIC_SUDOKU_ARENA_ADDRESS");if(!L)return void x("Switch to Monad Testnet to create a match");x(""),w(""),B(null);try{w("Creating PvE match...");let e=await F({abi:s4,address:j,chainId:sH.monadTestnet.id,functionName:"createPveMatch",args:[1]});B(e),w("Waiting for match creation..."),await n?.waitForTransactionReceipt({hash:e});let t=null,r=await n?.getTransactionReceipt({hash:e}),i=r?.logs.find(e=>e.address.toLowerCase()===j.toLowerCase());if(i){let e=t7({abi:s4,data:i.data,topics:i.topics});"MatchCreated"===e.eventName&&(t=Number(e.args.matchId))}if(!t&&n){let e=await n.readContract({address:j,abi:s4,functionName:"nextMatchId"});t=Number(e)}t?(u(t),o(String(t)),w(`Match #${t} ready`)):w("Match created, but could not read match id")}catch(e){x(e?.shortMessage||e?.message||"Match creation failed"),w("")}},V=async(t,r,n)=>{if(!L)return void x("Switch to Monad Testnet to submit moves");if(!z)return void x("Create or load a match first");if(0!==d[t][r])return void x("Cannot change a fixed cell");x(""),w("");let i=""===n?0:Number(n);if(Number.isNaN(i)||i<0||i>9)return;R(i),P({row:t,col:r});let a=`${t}-${r}`;m(e=>new Set(e).add(a));try{if(w("Submitting move..."),N&&O&&e){let n=await fetch("/api/relay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({matchId:c,row:t,col:r,value:i,player:e,expiresAt:O.expiresAt,signature:O.signature})}),a=null;if((n.headers.get("content-type")||"").includes("application/json")&&(a=await n.json()),!n.ok){let e=a?.error||`Relayer failed (${n.status})`;throw Error(e)}a?.hash&&B(a.hash),w("Move relayed. Waiting for confirmation...")}else{let e=await F({abi:s4,address:j,chainId:sH.monadTestnet.id,functionName:"submitMove",args:[BigInt(c),t,r,i]});B(e),w("Move submitted. Waiting for confirmation...")}f(e=>{let n=e.map(e=>[...e]);return n[t][r]=i,n})}catch(e){x(e?.shortMessage||e?.message||"Move failed")}finally{m(e=>{let t=new Set(e);return t.delete(a),t})}},Q=async()=>{if(!e)return void x("Connect your wallet first");let t=Date.now()+216e5,r=`Arcade2 Relayer Session
address:${e}
expiresAt:${t}
chainId:${sH.monadTestnet.id}`;try{let e=await M({message:r}),n={expiresAt:t,signature:e};localStorage.setItem("arcade2-relayer-session",JSON.stringify(n)),k(n),x(""),w("Relayer session enabled")}catch(e){x(e?.shortMessage||e?.message||"Relayer auth failed")}};return(0,a.jsxs)("section",{className:"card",children:[(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("h2",{children:"Sudoku (On-chain moves)"}),(0,a.jsx)("span",{className:"muted",children:c?`Match #${c}`:"No match loaded"})]}),j?null:(0,a.jsx)("p",{className:"error",children:"Missing NEXT_PUBLIC_SUDOKU_ARENA_ADDRESS"}),I?null:(0,a.jsx)("p",{className:"muted",children:"Loading match controls..."}),I&&!L&&j?(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("p",{className:"error",children:"Wrong network. Switch to Monad Testnet."}),(0,a.jsx)("button",{className:"secondary",onClick:()=>r({chainId:sH.monadTestnet.id}),children:"Switch Network"})]}):null,(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("button",{onClick:G,disabled:!I||!e||!j||!L,children:"Create PvE Match"}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("input",{type:"number",min:"1",step:"1",value:i,onChange:e=>o(e.target.value),disabled:!I}),(0,a.jsx)("button",{className:"secondary",onClick:()=>{let e=Number(i);!Number.isInteger(e)||e<=0?x("Invalid match id"):(x(""),u(e))},disabled:!I,children:"Load Match"})]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("label",{className:"row muted",children:[(0,a.jsx)("input",{type:"checkbox",checked:N,onChange:e=>C(e.target.checked),disabled:!I}),"Use relayer (fewer approvals)"]}),N?(0,a.jsx)("button",{className:"secondary",onClick:Q,disabled:!I||!e,children:O?"Relayer enabled":"Enable relayer"}):null]}),(0,a.jsx)("div",{className:"sudoku-grid",children:l.map((e,t)=>e.map((e,r)=>{let n=`${t}-${r}`,i=y.has(n),s=0!==d[t][r],o=S>0&&e===S,c=T&&(T.row===t||T.col===r),u=T&&Math.floor(T.row/3)===Math.floor(t/3)&&Math.floor(T.col/3)===Math.floor(r/3),l=$.has(n);return(0,a.jsx)("input",{className:`sudoku-cell ${i?"pending":""} ${s?"fixed":""} ${o?"highlight":""} ${c?"rowcol":""} ${u?"box":""} ${l?"invalid":""}`,inputMode:"numeric",maxLength:1,value:0===e?"":e,onChange:e=>V(t,r,e.target.value),onFocus:()=>{R(e),P({row:t,col:r})},onClick:()=>{R(e),P({row:t,col:r})},disabled:!z||U||s,style:{borderRightWidth:r%3==2?2:1,borderBottomWidth:t%3==2?2:1,borderLeftWidth:r%3==0?2:1,borderTopWidth:t%3==0?2:1,borderRightColor:r%3==2?"#4b4b5a":void 0,borderBottomColor:t%3==2?"#4b4b5a":void 0,borderLeftColor:r%3==0?"#4b4b5a":void 0,borderTopColor:t%3==0?"#4b4b5a":void 0}},n)}))}),D&&!H?(0,a.jsx)("p",{className:"success",children:"Solved! Waiting for chain confirmation."}):null,H?(0,a.jsx)("p",{className:"success",children:"Solved! On-chain moves confirmed."}):null,g?(0,a.jsx)("p",{className:"muted",children:g}):null,v?(0,a.jsx)("p",{className:"error",children:v}):null,(0,a.jsx)("p",{className:"muted",children:"Each number entry submits a transaction (including clears)."})]})}function ol({onClick:e}){return(0,a.jsx)("button",{className:"secondary",onClick:e,children:"Create Challenge"})}var of=e.i(42093),od=es;class oh extends od.BaseError{constructor({value:e}){super(`Number \`${e}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function op(e,t="wei"){return function(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new oh({value:e});let[r,n="0"]=e.split("."),i=r.startsWith("-");if(i&&(r=r.slice(1)),n=n.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${n}`))&&(r=`${BigInt(r)+1n}`),n="";else if(n.length>t){let[e,i,a]=[n.slice(0,t-1),n.slice(t-1,t),n.slice(t)],s=Math.round(Number(`${i}.${a}`));(n=s>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${s}`).length>t&&(n=n.slice(1),r=`${BigInt(r)+1n}`),n=n.slice(0,t)}else n=n.padEnd(t,"0");return BigInt(`${i?"-":""}${r}${n}`)}(e,of.etherUnits[t])}function oy({isOpen:e,onClose:t}){let{address:r,isConnected:n}=b(),i=W(),o=sD(),[c,u]=(0,s.useState)(""),[l,f]=(0,s.useState)(1),[d,h]=(0,s.useState)("1"),[p,y]=(0,s.useState)("30"),[m,w]=(0,s.useState)("60"),[v,x]=(0,s.useState)(""),[E,B]=(0,s.useState)(""),[I,A]=(0,s.useState)(null),{writeContractAsync:T}=s5(),{isLoading:P,isSuccess:S}=sV({hash:I||void 0}),R=i===sH.monadTestnet.id,N=s3(),C=s9();(0,s.useEffect)(()=>{e||(x(""),B(""),A(null))},[e]),(0,s.useEffect)(()=>{if(!S)return;x("Challenge created!");let e=setTimeout(()=>{t()},800);return()=>clearTimeout(e)},[S,t]);let O=(0,s.useMemo)(()=>!!(n&&r&&R&&N),[n,r,R,N]);if(!e)return null;let k=async()=>{let e=c.trim();if(!e)throw Error("Opponent is required");if(!(0,sx.isAddress)(e))throw Error("Opponent must be a 0x address");return e},F=async()=>{let e,t;if(!r)return;if(B(""),x(""),A(null),!N||!C)return void B("Missing contract address");if(!o)return void B("Public client not ready");if(!n)return void B("Connect your wallet first");if(!R)return void B("Wrong network. Switch to Monad Testnet.");try{x("Resolving opponent..."),e=await k()}catch(e){B(e?.message||"Failed to resolve opponent"),x("");return}if(e.toLowerCase()===r.toLowerCase()){B("Opponent cannot be your own address"),x("");return}try{t=op(d)}catch{B("Invalid wager"),x("");return}if(t<op(String(1))){B("Wager must be at least 1 MON"),x("");return}let i=Math.floor(Date.now()/1e3),a=i+60*Number(p),s=a+60*Number(m);if(!Number.isFinite(a)||a<=i){B("Accept window must be in the future"),x("");return}if(!Number.isFinite(s)||s<=a){B("Resolve window must be after accept window"),x("");return}let c={gameId:l,wager:t.toString(),createdBy:r,opponent:e,createdAtMs:Date.now()},u=(0,ed.keccak256)((0,g.stringToHex)(JSON.stringify(c)));try{x("Sending transaction...");let r=await T({abi:s8,address:N,functionName:"createChallenge",args:[e,l,BigInt(a),BigInt(s),u],value:t});A(r),x("Challenge created. Linking PvP match...");let n=await o.waitForTransactionReceipt({hash:r}),i=n?.logs.find(e=>e.address.toLowerCase()===N.toLowerCase());if(!i)return void x("Challenge created. Match id not found.");let c=t7({abi:s8,data:i.data,topics:i.topics});if("ChallengeCreated"!==c.eventName)return void x("Challenge created. Match id missing.");let f=c.args.matchId;await T({abi:s4,address:C,functionName:"createPvpMatch",args:[f,e,l,BigInt(a),BigInt(s)]}),x(`PvP match linked (#${f.toString()}).`)}catch(e){B(e?.shortMessage||e?.message||"Transaction failed"),x("")}};return(0,a.jsx)("div",{className:"modal-overlay",children:(0,a.jsxs)("div",{className:"modal",children:[(0,a.jsxs)("div",{className:"modal-header",children:[(0,a.jsx)("h2",{children:"Create Challenge"}),(0,a.jsx)("button",{className:"secondary",onClick:()=>{P||t()},children:"Close"})]}),N?null:(0,a.jsx)("p",{className:"error",children:"Missing NEXT_PUBLIC_ARCADE_ESCROW_ADDRESS"}),(0,a.jsxs)("label",{className:"field",children:[(0,a.jsx)("span",{children:"Opponent"}),(0,a.jsx)("input",{type:"text",placeholder:"0x...",value:c,onChange:e=>u(e.target.value)})]}),(0,a.jsxs)("label",{className:"field",children:[(0,a.jsx)("span",{children:"Game"}),(0,a.jsx)("select",{value:l,onChange:e=>f(Number(e.target.value)),children:(0,a.jsx)("option",{value:1,children:"Sudoku"})})]}),(0,a.jsxs)("label",{className:"field",children:[(0,a.jsx)("span",{children:"Wager (MON)"}),(0,a.jsx)("input",{type:"number",min:1,step:"0.01",value:d,onChange:e=>h(e.target.value)})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsxs)("label",{className:"field",children:[(0,a.jsx)("span",{children:"Accept window (minutes)"}),(0,a.jsx)("input",{type:"number",min:"1",step:"1",value:p,onChange:e=>y(e.target.value)})]}),(0,a.jsxs)("label",{className:"field",children:[(0,a.jsx)("span",{children:"Resolve window (minutes)"}),(0,a.jsx)("input",{type:"number",min:"1",step:"1",value:m,onChange:e=>w(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("button",{onClick:F,disabled:!O||P,children:"Create challenge"}),v?(0,a.jsx)("span",{className:"muted",children:v}):null]}),P?(0,a.jsx)("p",{className:"muted",children:"Waiting for confirmation..."}):null,E?(0,a.jsx)("p",{className:"error",children:E}):null,(0,a.jsxs)("p",{className:"muted",children:["Minimum wager: ",1," MON."]})]})})}function om(){let{isConnected:e}=b(),t=W(),[r,n]=(0,s.useState)("1"),[i,o]=(0,s.useState)(""),[c,u]=(0,s.useState)(""),[l,f]=(0,s.useState)(null),{writeContractAsync:d}=s5(),{isLoading:h,isSuccess:p}=sV({hash:l||void 0}),y=s3(),m=t===sH.monadTestnet.id,g=async()=>{if(u(""),o(""),f(null),!y)return void u("Missing contract address");if(!e)return void u("Connect your wallet first");if(!m)return void u("Wrong network. Switch to Monad Testnet.");let t=Number(r);if(!Number.isInteger(t)||t<=0)return void u("Invalid match id");try{o("Submitting refund...");let e=await d({abi:s8,address:y,functionName:"refund",args:[BigInt(t)]});f(e),o("Refund submitted")}catch(e){u(e?.shortMessage||e?.message||"Refund failed"),o("")}};return(0,a.jsxs)("section",{className:"card",children:[(0,a.jsx)("h3",{children:"Refund Challenge"}),(0,a.jsx)("p",{className:"muted",children:"Creator-only refunds after accept or resolve deadline."}),(0,a.jsxs)("label",{className:"field",children:[(0,a.jsx)("span",{children:"Match ID"}),(0,a.jsx)("input",{type:"number",min:"1",step:"1",value:r,onChange:e=>n(e.target.value)})]}),(0,a.jsxs)("div",{className:"row",children:[(0,a.jsx)("button",{onClick:g,disabled:h,children:"Request refund"}),i?(0,a.jsx)("span",{className:"muted",children:i}):null]}),p?(0,a.jsx)("p",{className:"success",children:"Refund confirmed"}):null,c?(0,a.jsx)("p",{className:"error",children:c}):null]})}function ob(){let[e,t]=(0,s.useState)(!1);return(0,a.jsxs)("main",{className:"container grid",children:[(0,a.jsxs)("section",{className:"stack",children:[(0,a.jsxs)("header",{className:"card hero-card",children:[(0,a.jsx)("h1",{children:"Onchain Arcade"}),(0,a.jsx)("p",{className:"muted",children:"Connect your wallet to see incoming wagers."})]}),(0,a.jsx)(s_,{}),(0,a.jsx)(ol,{onClick:()=>t(!0)}),(0,a.jsx)(oy,{isOpen:e,onClose:()=>t(!1)}),(0,a.jsx)(ou,{}),(0,a.jsx)(om,{})]}),(0,a.jsx)(oe,{})]})}e.s(["default",()=>ob],60843)}]);