{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackmccordic/Desktop/Vibes/Arcade2/src/lib/contracts/sudokuArena.ts"],"sourcesContent":["import type { Address } from \"viem\";\n\nexport const sudokuArenaAbi = [\n  {\n    inputs: [{ internalType: \"uint32\", name: \"gameId\", type: \"uint32\" }],\n    name: \"createPveMatch\",\n    outputs: [{ internalType: \"uint256\", name: \"matchId\", type: \"uint256\" }],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  },\n  {\n    inputs: [\n      { internalType: \"uint256\", name: \"escrowMatchId\", type: \"uint256\" },\n      { internalType: \"address\", name: \"opponent\", type: \"address\" },\n      { internalType: \"uint32\", name: \"gameId\", type: \"uint32\" },\n      { internalType: \"uint64\", name: \"acceptBy\", type: \"uint64\" },\n      { internalType: \"uint64\", name: \"resolveBy\", type: \"uint64\" }\n    ],\n    name: \"createPvpMatch\",\n    outputs: [{ internalType: \"uint256\", name: \"matchId\", type: \"uint256\" }],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  },\n  {\n    inputs: [\n      { internalType: \"uint256\", name: \"matchId\", type: \"uint256\" },\n      { internalType: \"uint8\", name: \"row\", type: \"uint8\" },\n      { internalType: \"uint8\", name: \"col\", type: \"uint8\" },\n      { internalType: \"uint8\", name: \"value\", type: \"uint8\" }\n    ],\n    name: \"submitMove\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  },\n  {\n    inputs: [\n      { internalType: \"uint256\", name: \"matchId\", type: \"uint256\" },\n      { internalType: \"address\", name: \"player\", type: \"address\" },\n      { internalType: \"uint8\", name: \"row\", type: \"uint8\" },\n      { internalType: \"uint8\", name: \"col\", type: \"uint8\" },\n      { internalType: \"uint8\", name: \"value\", type: \"uint8\" }\n    ],\n    name: \"submitMoveFor\",\n    outputs: [],\n    stateMutability: \"nonpayable\",\n    type: \"function\"\n  },\n  {\n    inputs: [{ internalType: \"uint256\", name: \"matchId\", type: \"uint256\" }],\n    name: \"matches\",\n    outputs: [\n      { internalType: \"address\", name: \"creator\", type: \"address\" },\n      { internalType: \"address\", name: \"opponent\", type: \"address\" },\n      { internalType: \"bool\", name: \"isPvp\", type: \"bool\" },\n      { internalType: \"uint8\", name: \"state\", type: \"uint8\" },\n      { internalType: \"uint64\", name: \"createdAt\", type: \"uint64\" },\n      { internalType: \"uint64\", name: \"acceptBy\", type: \"uint64\" },\n      { internalType: \"uint64\", name: \"resolveBy\", type: \"uint64\" },\n      { internalType: \"uint32\", name: \"gameId\", type: \"uint32\" },\n      { internalType: \"uint256\", name: \"startBlock\", type: \"uint256\" },\n      { internalType: \"uint256\", name: \"creatorFinishBlock\", type: \"uint256\" },\n      { internalType: \"uint256\", name: \"opponentFinishBlock\", type: \"uint256\" },\n      { internalType: \"uint8\", name: \"puzzleIndex\", type: \"uint8\" },\n      { internalType: \"bytes32\", name: \"puzzleHash\", type: \"bytes32\" }\n    ],\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    inputs: [{ internalType: \"uint8\", name: \"index\", type: \"uint8\" }],\n    name: \"getPackedPuzzle\",\n    outputs: [{ internalType: \"bytes\", name: \"\", type: \"bytes\" }],\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    inputs: [\n      { internalType: \"uint256\", name: \"matchId\", type: \"uint256\" },\n      { internalType: \"uint8\", name: \"row\", type: \"uint8\" },\n      { internalType: \"uint8\", name: \"col\", type: \"uint8\" }\n    ],\n    name: \"getCell\",\n    outputs: [{ internalType: \"uint8\", name: \"\", type: \"uint8\" }],\n    stateMutability: \"view\",\n    type: \"function\"\n  },\n  {\n    anonymous: false,\n    inputs: [\n      { indexed: true, internalType: \"uint256\", name: \"matchId\", type: \"uint256\" },\n      { indexed: true, internalType: \"address\", name: \"creator\", type: \"address\" },\n      { indexed: true, internalType: \"address\", name: \"opponent\", type: \"address\" },\n      { indexed: false, internalType: \"bool\", name: \"isPvp\", type: \"bool\" },\n      { indexed: false, internalType: \"uint32\", name: \"gameId\", type: \"uint32\" },\n      { indexed: false, internalType: \"uint64\", name: \"acceptBy\", type: \"uint64\" },\n      { indexed: false, internalType: \"uint64\", name: \"resolveBy\", type: \"uint64\" },\n      { indexed: false, internalType: \"uint8\", name: \"puzzleIndex\", type: \"uint8\" },\n      { indexed: false, internalType: \"bytes32\", name: \"puzzleHash\", type: \"bytes32\" }\n    ],\n    name: \"MatchCreated\",\n    type: \"event\"\n  },\n  {\n    inputs: [],\n    name: \"nextMatchId\",\n    outputs: [{ internalType: \"uint256\", name: \"\", type: \"uint256\" }],\n    stateMutability: \"view\",\n    type: \"function\"\n  }\n] as const;\n\nexport function getSudokuArenaAddress(): Address | null {\n  const value = process.env.NEXT_PUBLIC_SUDOKU_ARENA_ADDRESS;\n  if (!value) return null;\n  return value as Address;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 390, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackmccordic/Desktop/Vibes/Arcade2/src/lib/wagmi.ts"],"sourcesContent":["import { http, createConfig } from \"wagmi\";\nimport { injected } from \"wagmi/connectors\";\n\nexport const monadTestnet = {\n  id: 10143,\n  name: \"Monad Testnet\",\n  nativeCurrency: { name: \"MON\", symbol: \"MON\", decimals: 18 },\n  rpcUrls: {\n    default: {\n      http: [process.env.NEXT_PUBLIC_MONAD_RPC_URL || \"https://testnet-rpc.monad.xyz\"]\n    },\n    public: {\n      http: [process.env.NEXT_PUBLIC_MONAD_RPC_URL || \"https://testnet-rpc.monad.xyz\"]\n    }\n  },\n  blockExplorers: {\n    default: { name: \"Monad Explorer\", url: \"https://testnet.monadexplorer.com\" }\n  }\n} as const;\n\nexport const wagmiConfig = createConfig({\n  chains: [monadTestnet],\n  connectors: [injected()],\n  transports: {\n    [monadTestnet.id]: http()\n  }\n});\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;;;AAEO,MAAM,eAAe;IAC1B,IAAI;IACJ,MAAM;IACN,gBAAgB;QAAE,MAAM;QAAO,QAAQ;QAAO,UAAU;IAAG;IAC3D,SAAS;QACP,SAAS;YACP,MAAM;gBAAC,QAAQ,GAAG,CAAC,yBAAyB,IAAI;aAAgC;QAClF;QACA,QAAQ;YACN,MAAM;gBAAC,QAAQ,GAAG,CAAC,yBAAyB,IAAI;aAAgC;QAClF;IACF;IACA,gBAAgB;QACd,SAAS;YAAE,MAAM;YAAkB,KAAK;QAAoC;IAC9E;AACF;AAEO,MAAM,cAAc,IAAA,oMAAY,EAAC;IACtC,QAAQ;QAAC;KAAa;IACtB,YAAY;QAAC,IAAA,0MAAQ;KAAG;IACxB,YAAY;QACV,CAAC,aAAa,EAAE,CAAC,EAAE,IAAA,2LAAI;IACzB;AACF"}},
    {"offset": {"line": 443, "column": 0}, "map": {"version":3,"sources":["file:///Users/jackmccordic/Desktop/Vibes/Arcade2/src/app/api/relay/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { createPublicClient, createWalletClient, http, verifyMessage } from \"viem\";\nimport { privateKeyToAccount } from \"viem/accounts\";\nimport { sudokuArenaAbi } from \"@/lib/contracts/sudokuArena\";\nimport { monadTestnet } from \"@/lib/wagmi\";\n\ntype RelayRequest = {\n  matchId: number;\n  row: number;\n  col: number;\n  value: number;\n  player: `0x${string}`;\n  expiresAt: number;\n  signature: `0x${string}`;\n};\n\nfunction buildSessionMessage(player: string, expiresAt: number) {\n  return `Arcade2 Relayer Session\naddress:${player}\nexpiresAt:${expiresAt}\nchainId:${monadTestnet.id}`;\n}\n\nexport async function POST(req: Request) {\n  const body = (await req.json()) as RelayRequest;\n  const { matchId, row, col, value, player, expiresAt, signature } = body;\n\n  if (!process.env.RELAYER_PRIVATE_KEY || !process.env.MONAD_RPC_URL) {\n    return NextResponse.json({ error: \"Relayer not configured\" }, { status: 500 });\n  }\n\n  if (!process.env.NEXT_PUBLIC_SUDOKU_ARENA_ADDRESS) {\n    return NextResponse.json({ error: \"Sudoku arena address missing\" }, { status: 500 });\n  }\n\n  if (!player || !signature || !Number.isFinite(expiresAt)) {\n    return NextResponse.json({ error: \"Invalid session payload\" }, { status: 400 });\n  }\n\n  if (Date.now() > expiresAt) {\n    return NextResponse.json({ error: \"Session expired\" }, { status: 401 });\n  }\n\n  const message = buildSessionMessage(player, expiresAt);\n  const isValid = await verifyMessage({\n    address: player,\n    message,\n    signature\n  });\n\n  if (!isValid) {\n    return NextResponse.json({ error: \"Invalid session signature\" }, { status: 401 });\n  }\n\n  const rawKey = process.env.RELAYER_PRIVATE_KEY || \"\";\n  const normalizedKey = rawKey.startsWith(\"0x\") ? rawKey : `0x${rawKey}`;\n  const account = privateKeyToAccount(normalizedKey as `0x${string}`);\n  const transport = http(process.env.MONAD_RPC_URL);\n  const publicClient = createPublicClient({\n    chain: monadTestnet,\n    transport\n  });\n  const walletClient = createWalletClient({\n    account,\n    chain: monadTestnet,\n    transport\n  });\n\n  try {\n    const hash = await walletClient.writeContract({\n      address: process.env.NEXT_PUBLIC_SUDOKU_ARENA_ADDRESS as `0x${string}`,\n      abi: sudokuArenaAbi,\n      functionName: \"submitMoveFor\",\n      args: [BigInt(matchId), player, row, col, value]\n    });\n\n    await publicClient.waitForTransactionReceipt({ hash });\n\n    return NextResponse.json({ hash });\n  } catch (err: any) {\n    return NextResponse.json(\n      { error: err?.shortMessage || err?.message || \"Relay failed\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;AAYA,SAAS,oBAAoB,MAAc,EAAE,SAAiB;IAC5D,OAAO,CAAC;QACF,EAAE,OAAO;UACP,EAAE,UAAU;QACd,EAAE,yJAAY,CAAC,EAAE,EAAE;AAC3B;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,OAAQ,MAAM,IAAI,IAAI;IAC5B,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG;IAEnE,IAAI,CAAC,QAAQ,GAAG,CAAC,mBAAmB,IAAI,CAAC,QAAQ,GAAG,CAAC,aAAa,EAAE;QAClE,OAAO,oKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAyB,GAAG;YAAE,QAAQ;QAAI;IAC9E;IAEA;;IAIA,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,OAAO,QAAQ,CAAC,YAAY;QACxD,OAAO,oKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;IAEA,IAAI,KAAK,GAAG,KAAK,WAAW;QAC1B,OAAO,oKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAkB,GAAG;YAAE,QAAQ;QAAI;IACvE;IAEA,MAAM,UAAU,oBAAoB,QAAQ;IAC5C,MAAM,UAAU,MAAM,IAAA,0MAAa,EAAC;QAClC,SAAS;QACT;QACA;IACF;IAEA,IAAI,CAAC,SAAS;QACZ,OAAO,oKAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;IAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,mBAAmB,IAAI;IAClD,MAAM,gBAAgB,OAAO,UAAU,CAAC,QAAQ,SAAS,CAAC,EAAE,EAAE,QAAQ;IACtE,MAAM,UAAU,IAAA,4MAAmB,EAAC;IACpC,MAAM,YAAY,IAAA,2LAAI,EAAC,QAAQ,GAAG,CAAC,aAAa;IAChD,MAAM,eAAe,IAAA,yMAAkB,EAAC;QACtC,OAAO,yJAAY;QACnB;IACF;IACA,MAAM,eAAe,IAAA,yMAAkB,EAAC;QACtC;QACA,OAAO,yJAAY;QACnB;IACF;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,aAAa,aAAa,CAAC;YAC5C,OAAO;YACP,KAAK,8KAAc;YACnB,cAAc;YACd,MAAM;gBAAC,OAAO;gBAAU;gBAAQ;gBAAK;gBAAK;aAAM;QAClD;QAEA,MAAM,aAAa,yBAAyB,CAAC;YAAE;QAAK;QAEpD,OAAO,oKAAY,CAAC,IAAI,CAAC;YAAE;QAAK;IAClC,EAAE,OAAO,KAAU;QACjB,OAAO,oKAAY,CAAC,IAAI,CACtB;YAAE,OAAO,KAAK,gBAAgB,KAAK,WAAW;QAAe,GAC7D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}